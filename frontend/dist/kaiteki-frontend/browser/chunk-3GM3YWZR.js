import{a as Q}from"./chunk-LVSCLLUM.js";import{a as X}from"./chunk-OMZMQJJO.js";import{a as J}from"./chunk-7L2V3RXH.js";import{a as q}from"./chunk-TUIIUV2P.js";import{a as K}from"./chunk-Z4K7JQA7.js";import{Ia as B,n as V,o as R,ob as W,u as F}from"./chunk-VMAUWDUJ.js";import{Aa as x,F as a,Fb as I,Ib as L,Jb as j,K as p,Kb as c,Lb as r,Mb as d,Qb as T,Tb as D,Vb as M,X as O,Y as E,Yb as N,cb as P,cc as g,ec as w,fa as _,fb as l,gb as m,ld as A,o as s,pa as v,qa as b,qd as U,s as G,vc as z,wc as $,xb as y,za as S,zb as H}from"./chunk-TYBYM3PM.js";import"./chunk-REV7FFDQ.js";import{a as u,b as h}from"./chunk-MON7YFGF.js";var Y=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=v({type:t,selectors:[["app-integrations-layout"]],decls:1,vars:0,template:function(n,f){n&1&&d(0,"router-outlet")},dependencies:[V],changeDetection:0});let e=t;return e})();var C={github:{id:1,name:"GitHub",description:"Access your GitHub repositories with real-time monitoring of recent activities, pull requests and issues",connected:!1,icon:"github",onConnect:()=>console.log("Connect GitHub"),onDisconnect:()=>console.log("Disconnect GitHub")},spotify:{id:2,name:"Spotify",description:"Digital music, podcast, and video service that gives you access to millions of songs and other content from creators all over the world",connected:!1,icon:"spotify",onConnect:()=>console.log("Connect Spotify"),onDisconnect:()=>console.log("Disconnect Spotify")},telegram:{id:3,name:"Telegram",description:"Monitor your tasks and scheduled meetings using integration with cloud-based instant messaging app Telegram",connected:!1,icon:"telegram",onConnect:()=>console.log("Connect Telegram"),onDisconnect:()=>console.log("Disconnect Telegram")}};var rt=(e,t)=>t.id;function ct(e,t){e&1&&(c(0,"span",7),g(1,"Enabled"),r())}function st(e,t){if(e&1){let o=T();c(0,"button",11),D("click",function(){S(o);let n=M().$implicit;return x(n.onConnect())}),g(1," Connect "),r()}}function at(e,t){if(e&1){let o=T();c(0,"button",12),D("click",function(){S(o);let n=M().$implicit;return x(n.onDisconnect())}),g(1," Disconnect "),r()}}function pt(e,t){if(e&1&&(c(0,"div",3)(1,"div",4)(2,"div",5),d(3,"img",6),y(4,ct,2,0,"span",7),r(),y(5,st,2,0,"button",8)(6,at,2,0),r(),c(7,"h4",9),g(8),r(),c(9,"p",10),g(10),r()()),e&2){let o=t.$implicit;l(3),N("src","assets/images/integrations/",o.icon,".svg",P),H("alt",o.name),l(),I(4,o.connected?4:-1),l(),I(5,o.connected?6:5),l(3),w(" ",o.name," "),l(2),w(" ",o.description," ")}}var Z=(()=>{let t=class t{constructor(i,n,f,et,it,nt){this.spotifyService=i,this.telegramService=n,this.integrationsService=f,this.toastService=et,this.githubService=it,this.router=nt,this.integrations$=this.integrationsService.integrations$.pipe(O([]),E(()=>this.loadIntegrations()))}loadIntegrations(){return this.integrationsService.getUserIntegrations().pipe(G(i=>[h(u({},C.github),{connected:i.github?.enabled??!1,onConnect:()=>this.onGitHubConnect(),onDisconnect:()=>this.onGitHubDisconnect()}),h(u({},C.spotify),{connected:i.spotify?.enabled??!1,onConnect:()=>this.onSpotifyConnect(),onDisconnect:()=>this.onSpotifyDisconnect()}),h(u({},C.telegram),{connected:i.telegram?.enabled??!1,onConnect:()=>this.onTelegramConnect(),onDisconnect:()=>this.onTelegramDisconnect()})]),a(i=>(this.toastService.error("Failed to get integrations"),s(()=>i))))}onSpotifyConnect(){this.spotifyService.getConnectIntegrationUrl().pipe(p(1)).subscribe(i=>{window.location.replace(i.loginUrl)})}onSpotifyDisconnect(){this.spotifyService.disconnectSpotifyIntegration().pipe(p(1),a(i=>(this.toastService.error("Failed to disconnect Spotify"),s(()=>i)))).subscribe(()=>{this.toastService.open("Spotify integration disconnected!"),this.integrationsService.refreshIntegrations()})}onTelegramConnect(){this.telegramService.connectIntegration().pipe(a(i=>(this.toastService.error("Failed to connect Telegram"),s(()=>i))),p(1)).subscribe(()=>{this.toastService.open("Telegram integration connected!"),this.integrationsService.refreshIntegrations(),this.router.navigate(["/hub/integrations/telegram"])})}onTelegramDisconnect(){this.telegramService.disconnectIntegration().pipe(a(i=>(this.toastService.error("Failed to disconnect Telegram"),s(()=>i))),p(1)).subscribe(()=>{this.toastService.open("Telegram integration disconnected!"),this.integrationsService.refreshIntegrations()})}onGitHubConnect(){this.githubService.connectIntegration().pipe(p(1),a(i=>(this.toastService.error("Failed to connect GitHub integration"),s(()=>i)))).subscribe(()=>{this.toastService.open("GitHub integration connected!"),this.integrationsService.refreshIntegrations(),this.router.navigate(["/hub/integrations/github"])})}onGitHubDisconnect(){this.githubService.disconnectIntegration().pipe(p(1),a(i=>(this.toastService.error("Failed to disconnect GitHub integration"),s(()=>i)))).subscribe(()=>{this.toastService.open("GitHub integration disconnected!"),this.integrationsService.refreshIntegrations()})}};t.\u0275fac=function(n){return new(n||t)(m(J),m(Q),m(q),m(K),m(X),m(R))},t.\u0275cmp=v({type:t,selectors:[["app-integrations-list"]],decls:6,vars:2,consts:[["value","Integrations"],[1,"page"],[1,"integrations"],[1,"integrations__item"],[1,"integrations__item-header"],[1,"integrations__item-header-left"],[1,"integrations__item-icon",3,"src","alt"],[1,"integrations__item-enabled-tag"],[1,"integrations__item-connect"],[1,"integrations__item-title"],[1,"integrations__item-description"],[1,"integrations__item-connect",3,"click"],[1,"integrations__item-disconnect",3,"click"]],template:function(n,f){n&1&&(d(0,"app-page-header",0),c(1,"section",1)(2,"div",2),L(3,pt,11,7,"div",3,rt),z(5,"async"),r()()),n&2&&(l(3),j($(5,0,f.integrations$)))},dependencies:[B,A],styles:[".integrations[_ngcontent-%COMP%]{display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-template-rows:none}.integrations__item[_ngcontent-%COMP%]{border:1px solid #e2e8f0;padding:12px 16px;border-radius:8px;background:#fff}.integrations__item-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.integrations__item-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.integrations__item-enabled-tag[_ngcontent-%COMP%]{font-size:10px;color:#216435;padding:1px 8px;border-radius:8px;background:#c8f8d4}.integrations__item-icon[_ngcontent-%COMP%]{width:28px;height:28px}.integrations__item-connect[_ngcontent-%COMP%]{font-size:12px;border-radius:8px;border:1px solid #068e44;padding:6px 12px;color:#068e44}.integrations__item-connect[_ngcontent-%COMP%]:hover{background:#068e44;color:#f4f5f5}.integrations__item-connect-active[_ngcontent-%COMP%]{font-size:12px;border-radius:8px;background:#068e44;color:#f4f5f5;padding:6px 12px}.integrations__item-disconnect[_ngcontent-%COMP%]{font-size:12px;border-radius:8px;padding:6px 12px;color:#c57c7c;border:1px solid #c57c7c}.integrations__item-disconnect[_ngcontent-%COMP%]:hover{background:#f6e5e5}.integrations__item-title[_ngcontent-%COMP%]{font-size:14px;margin-top:12px!important;font-weight:500}.integrations__item-description[_ngcontent-%COMP%]{margin-top:4px!important;font-size:12px;color:#919191}"],changeDetection:0});let e=t;return e})();var lt=[{path:"",component:Y,children:[{path:"",component:Z},{path:"spotify",loadChildren:()=>import("./chunk-EMIHMTID.js").then(e=>e.SpotifyModule),title:"Spotify | Kaiteki"},{path:"telegram",loadChildren:()=>import("./chunk-KFXUQZCV.js").then(e=>e.TelegramModule),title:"Telegram | Kaiteki"},{path:"github",loadChildren:()=>import("./chunk-7IOJ6R26.js").then(e=>e.GithubModule),title:"GitHub | Kaiteki"}]}],tt=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=b({type:t}),t.\u0275inj=_({imports:[F.forChild(lt),F]});let e=t;return e})();var Ht=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=b({type:t}),t.\u0275inj=_({imports:[U,W,tt]});let e=t;return e})();export{Ht as IntegrationsModule};
