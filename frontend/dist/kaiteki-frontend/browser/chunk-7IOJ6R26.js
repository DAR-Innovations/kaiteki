import{a as V}from"./chunk-OMZMQJJO.js";import{a as T}from"./chunk-Z4K7JQA7.js";import{$a as xt,Ga as bt,Ia as B,S as dt,U as _t,V as mt,W as st,X as ut,Y as ht,_ as gt,ab as vt,b as rt,ba as Ct,bb as wt,ca as ft,cb as St,db as Mt,eb as yt,fb as Pt,gb as Rt,hb as Ot,ib as Et,m as lt,mb as U,nb as Tt,o as pt,ob as Gt,p as ct,u as L}from"./chunk-VMAUWDUJ.js";import{Aa as R,F as w,Fb as h,Gb as Z,Ib as G,Jb as k,K as I,Kb as n,Lb as o,Mb as g,Nb as f,Ob as b,Oc as it,Qb as O,Tb as E,Vb as d,X as K,Y as Q,aa as J,cb as X,cc as l,dc as D,dd as nt,ea as Y,ec as m,f as W,fa as H,fb as p,fc as tt,gb as v,ja as A,ld as $,mc as y,md as ot,n as q,o as x,oc as et,pa as F,qa as N,qd as at,vc as C,wc as S,xb as c,xc as j,za as P,zb as u}from"./chunk-TYBYM3PM.js";import"./chunk-REV7FFDQ.js";import"./chunk-MON7YFGF.js";var At=(t,e)=>e.id,Lt=(t,e)=>[t,e],Wt=()=>({height:"145px",width:"100%","border-radius":"12px"});function qt(t,e){if(t&1&&l(0),t&2){let i=d().$implicit;m(" ",i.description," ")}}function Kt(t,e){t&1&&l(0," Without description ")}function Qt(t,e){if(t&1&&(n(0,"div",14)(1,"p",15),l(2),o(),n(3,"p",16),c(4,qt,1,1)(5,Kt,1,0),o()()),t&2){let i=e.$implicit,a=d(4);u("routerLink",et(3,Lt,a.data.githubUsername,i.name)),p(2),D(i.name),p(2),h(4,i.description?4:5)}}function Jt(t,e){if(t&1&&G(0,Qt,6,6,"div",14,At),t&2){let i=d();k(i.data)}}function Yt(t,e){t&1&&g(0,"ngx-skeleton-loader",17),t&2&&u("theme",y(1,Wt))}function Xt(t,e){if(t&1&&G(0,Yt,1,2,"ngx-skeleton-loader",17,Z),t&2){let i=d(4);k(i.reposSkeletons)}}function Zt(t,e){if(t&1&&c(0,Jt,2,0)(1,Xt,2,0),t&2){let i=e;h(0,i.data?0:-1),p(),h(1,i.loading?1:-1)}}function te(t,e){if(t&1&&(n(0,"div",11)(1,"p",12),l(2),o(),n(3,"div",13),c(4,Zt,2,2),C(5,"withLoading"),C(6,"async"),o()()),t&2){let i,a=d(),r=d();p(2),m(" Your repositories for ",a.data.githubUsername," "),p(2),h(4,(i=S(6,4,S(5,2,r.repos$)))?4:-1,i)}}function ee(t,e){t&1&&(n(0,"p",18),l(1," Please specify and save the GitHub username to fetch your public repositoriess "),o())}function ie(t,e){if(t&1){let i=O();n(0,"div",5)(1,"div",6)(2,"p",7),l(3,"GitHub username"),o(),n(4,"form",8),g(5,"input",9),n(6,"button",10),E("click",function(){P(i);let r=d();return R(r.saveUsername())}),l(7," Save "),o()()(),c(8,te,7,6,"div",11)(9,ee,2,0),o()}if(t&2){let i=d();p(4),u("formGroup",i.formGroup),p(2),u("disabled",i.formGroup.invalid||i.formGroup.disabled),p(2),h(8,e.data?8:9)}}var It=(()=>{let e=class e{constructor(a,r,_){this.toastService=a,this.githubService=r,this.cd=_,this.refreshReposSubject=new W,this.formGroup=new ut({username:new ht(void 0,[_t.required])}),this.credentials$=this.githubService.getCredentials().pipe(J(s=>this.formGroup.patchValue({username:s.githubUsername})),w(s=>(this.toastService.error("Enter the GitHub username"),x(()=>s)))),this.repos$=this.refreshReposSubject.asObservable().pipe(K([]),Q(()=>this.githubService.getRepos().pipe(w(s=>(this.toastService.error("Failed to get user repositories"),x(()=>s)))))),this.reposSkeletons=new Array(10).fill("")}saveUsername(){let{username:a}=this.formGroup.getRawValue();a&&this.githubService.saveCredentials({githubUsername:a}).pipe(w(r=>(this.toastService.error("Failed to save the usernames"),x(()=>r))),I(1)).subscribe(()=>{this.toastService.open("Saved the username"),this.refreshReposSubject.next()})}};e.\u0275fac=function(r){return new(r||e)(v(T),v(V),v(it))},e.\u0275cmp=F({type:e,selectors:[["app-github-dashboard"]],decls:12,vars:5,consts:[["value","GitHub Dashboard"],[1,"page","github"],[1,"github__content"],[1,"github__header"],[1,"github__separator"],[1,"github__main"],[1,"github__username-wrapper"],[1,"github__username-label"],[1,"github__username-content",3,"formGroup"],["type","text","placeholder","JohnSnow","formControlName","username",1,"github__username-input"],[1,"github__username-button",3,"click","disabled"],[1,"github__repos"],[1,"github__repos-label"],[1,"github__repos-list"],[1,"github__repos-item",3,"routerLink"],[1,"github__repos-item-name"],[1,"github__repos-item-description"],["count","1","appearance","line",3,"theme"],[1,"github__message"]],template:function(r,_){if(r&1&&(g(0,"app-page-header",0),n(1,"section",1)(2,"section",2)(3,"div",3)(4,"h2"),l(5,"GitHub integration"),o(),n(6,"p"),l(7," Our GitHub integration fetches detailed information about your public repositories using just your GitHub username, showcasing names, descriptions, languages, and activity. Perfect for developers and teams. "),o()(),g(8,"div",4),c(9,ie,10,3,"div",5),C(10,"withLoading"),C(11,"async"),o()()),r&2){let s;p(9),h(9,(s=S(11,3,S(10,1,_.credentials$)))?9:-1,s)}},dependencies:[B,gt,dt,mt,st,Ct,ft,ct,bt,$,U],styles:[".github[_ngcontent-%COMP%]{display:flex;justify-content:center}.github__content[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:12px;padding:34px;border:1px solid #ebeaea;display:flex;flex-direction:column;gap:30px}@media (max-width: 48em){.github__content[_ngcontent-%COMP%]{padding:22px;gap:20px}}.github__header[_ngcontent-%COMP%]{max-width:60%}.github__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600}.github__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#7c7f85;font-weight:500;margin-top:6px!important}.github__separator[_ngcontent-%COMP%]{width:100%;height:1px;background:#ebeaea}.github__username-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.github__username-label[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.github__username-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.github__username-input[_ngcontent-%COMP%]{border:1px solid #e2e8f0;padding:8px 12px;border-radius:8px}.github__username-button[_ngcontent-%COMP%]{padding:8px 12px;background:#068e44;color:#f4f5f5;border-radius:8px}.github__repos[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:36px}.github__repos-label[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.github__repos-list[_ngcontent-%COMP%]{display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));grid-template-rows:none}.github__repos-item[_ngcontent-%COMP%]{cursor:pointer;border-radius:12px;padding:24px;border:1px solid #ebeaea}.github__repos-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.github__repos-item-name[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.github__repos-item-description[_ngcontent-%COMP%]{margin-top:6px!important;color:#9c9c9c;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.github__message[_ngcontent-%COMP%]{color:#9c9c9c;text-align:center;margin-top:50px!important}"],changeDetection:0});let t=e;return t})();var M=function(t){return t.PUSH="push",t.FORCE_PUSH="force_push",t.BRANCH_CREATION="branch_creation",t.BRANCH_DELETION="branch_deletion",t.PR_MERGE="pr_merge",t.MR_QUEUE_MR="merge_queue_merge",t}(M||{});var ne=(t,e)=>e.id,Ht=()=>["title","createdDate","state","assignee"],Ft=()=>["title","createdDate","state","comments","assignee"];function oe(t,e){}function ae(t,e){if(t&1&&l(0),t&2){let i=d(2);m(" ",i.data.repository.description," ")}}function re(t,e){t&1&&l(0," Without description ")}function le(t,e){if(t&1&&(n(0,"div",11)(1,"p",24),l(2),n(3,"a",25),l(4),o()(),n(5,"p",26),l(6),C(7,"date"),o()()),t&2){let i=e.$implicit,a=e.$index,r=d(3);p(2),tt(" #",a+1," ",r.getTitleByActivity(i.activity_type)," made by "),p(),u("href",i.actor.html_url,X),p(),D(i.actor.login),p(2),D(j(7,5,i.timestamp,"medium"))}}function pe(t,e){t&1&&(n(0,"th",27),l(1," Title "),o())}function ce(t,e){if(t&1&&(n(0,"td",28),l(1),o()),t&2){let i=e.$implicit;p(),m(" ",i.title," ")}}function de(t,e){t&1&&(n(0,"th",27),l(1," Created date "),o())}function _e(t,e){if(t&1&&(n(0,"td",28),l(1),C(2,"date"),o()),t&2){let i=e.$implicit;p(),m(" ",j(2,1,i.created_at,"medium")," ")}}function me(t,e){t&1&&(n(0,"th",27),l(1," State "),o())}function se(t,e){if(t&1&&(n(0,"td",28),l(1),o()),t&2){let i=e.$implicit;p(),m(" ",i.state," ")}}function ue(t,e){t&1&&(n(0,"th",27),l(1," Assignee "),o())}function he(t,e){if(t&1&&(n(0,"td",28),l(1),o()),t&2){let i,a=e.$implicit;p(),m(" ",(i=a.assignee==null?null:a.assignee.login)!==null&&i!==void 0?i:"Unassigned"," ")}}function ge(t,e){t&1&&g(0,"tr",29)}function Ce(t,e){if(t&1){let i=O();n(0,"tr",30),E("click",function(){let r=P(i).$implicit,_=d(3);return R(_.navigateToUrl(r.html_url))}),o()}}function fe(t,e){t&1&&(n(0,"th",27),l(1," Title "),o())}function be(t,e){if(t&1&&(n(0,"td",28),l(1),o()),t&2){let i=e.$implicit;p(),m(" ",i.title," ")}}function xe(t,e){t&1&&(n(0,"th",27),l(1," Created date "),o())}function ve(t,e){if(t&1&&(n(0,"td",28),l(1),C(2,"date"),o()),t&2){let i=e.$implicit;p(),m(" ",j(2,1,i.created_at,"medium")," ")}}function we(t,e){t&1&&(n(0,"th",27),l(1," State "),o())}function Se(t,e){if(t&1&&(n(0,"td",28),l(1),o()),t&2){let i=e.$implicit;p(),m(" ",i.state," ")}}function Me(t,e){t&1&&(n(0,"th",27),l(1," Comments "),o())}function ye(t,e){if(t&1&&(n(0,"td",28),l(1),o()),t&2){let i=e.$implicit;p(),m(" ",i.comments," ")}}function Pe(t,e){t&1&&(n(0,"th",27),l(1," Assignee "),o())}function Re(t,e){if(t&1&&(n(0,"td",28),l(1),o()),t&2){let i,a=e.$implicit;p(),m(" ",(i=a.assignee==null?null:a.assignee.login)!==null&&i!==void 0?i:"Unassigned"," ")}}function Oe(t,e){t&1&&g(0,"tr",29)}function Ee(t,e){if(t&1){let i=O();n(0,"tr",30),E("click",function(){let r=P(i).$implicit,_=d(3);return R(_.navigateToUrl(r.html_url))}),o()}}function Te(t,e){if(t&1){let i=O();n(0,"div",3)(1,"div",4)(2,"app-button",5),E("click",function(){P(i);let r=d(2);return R(r.onNavigateBack())}),l(3," Back "),o()(),n(4,"h2"),l(5),o(),n(6,"p"),c(7,ae,1,1)(8,re,1,0),o()(),g(9,"div",6),n(10,"div",7)(11,"div",8)(12,"p",9),l(13,"Recent activities"),o(),n(14,"div",10),G(15,le,8,8,"div",11,ne),o()(),n(17,"div",8)(18,"p",9),l(19,"Recent pull requests"),o(),n(20,"div",12)(21,"div",13)(22,"table",14),g(23,"caption"),f(24,15),c(25,pe,2,0,"th",16)(26,ce,2,1,"td",17),b(),f(27,18),c(28,de,2,0,"th",16)(29,_e,3,4,"td",17),b(),f(30,19),c(31,me,2,0,"th",16)(32,se,2,1,"td",17),b(),f(33,20),c(34,ue,2,0,"th",16)(35,he,2,1,"td",17),b(),c(36,ge,1,0,"tr",21)(37,Ce,1,0,"tr",22),o()()()(),n(38,"div",8)(39,"p",9),l(40,"Recent issues"),o(),n(41,"div",12)(42,"div",13)(43,"table",14),g(44,"caption"),f(45,15),c(46,fe,2,0,"th",16)(47,be,2,1,"td",17),b(),f(48,18),c(49,xe,2,0,"th",16)(50,ve,3,4,"td",17),b(),f(51,19),c(52,we,2,0,"th",16)(53,Se,2,1,"td",17),b(),f(54,23),c(55,Me,2,0,"th",16)(56,ye,2,1,"td",17),b(),f(57,20),c(58,Pe,2,0,"th",16)(59,Re,2,1,"td",17),b(),c(60,Oe,1,0,"tr",21)(61,Ee,1,0,"tr",22),o()()()()()}if(t&2){let i=d();p(5),m("Repository: ",i.data.repository.name,""),p(2),h(7,i.data.repository.description?7:8),p(8),k(i.data.activities),p(7),u("dataSource",i.data.pullRequests),p(14),u("matHeaderRowDef",y(8,Ht)),p(),u("matRowDefColumns",y(9,Ht)),p(6),u("dataSource",i.data.issues),p(17),u("matHeaderRowDef",y(10,Ft)),p(),u("matRowDefColumns",y(11,Ft))}}function Ge(t,e){if(t&1&&(c(0,oe,0,0),n(1,"section",1)(2,"section",2),c(3,Te,62,12),o()()),t&2){let i=e;h(0,i.data?0:-1),p(3),h(3,i.data?3:-1)}}var Nt=(()=>{let e=class e{constructor(a,r,_,s){this.githubService=a,this.route=r,this.toastService=_,this.location=s,this.repo$=this.getRepo()}getRepo(){let a=this.route.snapshot.paramMap.get("repoName");return a?this.githubService.getRepoDetails(a).pipe(I(1),w(r=>(this.toastService.open("Failed to get repository details"),x(()=>r)))):q(null)}navigateToUrl(a){window.open(a,"_blank")}getTitleByActivity(a){switch(a){case M.BRANCH_CREATION:return"Creating a new branch";case M.BRANCH_DELETION:return"Deleting an existing branch";case M.FORCE_PUSH:return"Force push to repository";case M.PUSH:return"Push to repository";case M.PR_MERGE:return"Pull request merged";case M.MR_QUEUE_MR:return"Merge queue creation"}}onNavigateBack(){this.location.back()}};e.\u0275fac=function(r){return new(r||e)(v(V),v(lt),v(T),v(nt))},e.\u0275cmp=F({type:e,selectors:[["app-github-repo"]],decls:4,vars:5,consts:[["value","GitHub Repository"],[1,"page","github"],[1,"github__content"],[1,"github__header"],[1,"github__back"],["icon","arrow_back_ios","variant","outline",1,"github__back-button",3,"click"],[1,"github__separator"],[1,"github__main"],[1,"github__section"],[1,"github__section-label"],[1,"github__section-content","github__activity-list"],[1,"github__activity"],[1,"github__section-content"],[1,"table_wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","state"],["matColumnDef","assignee"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["matColumnDef","comments"],[1,"github__activity-label"],["target","_blank",1,"github__activity-link",3,"href"],[1,"github__activity-timestamp"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(r,_){if(r&1&&(g(0,"app-page-header",0),c(1,Ge,4,2,"section",1),C(2,"withLoading"),C(3,"async")),r&2){let s;p(),h(1,(s=S(3,3,S(2,1,_.repo$)))?1:-1,s)}},dependencies:[Tt,B,xt,wt,Pt,St,vt,Rt,Mt,yt,Ot,Et,$,ot,U],styles:["[_nghost-%COMP%]     .mat-mdc-table{border:1px solid #e2e8f0;background:none}[_nghost-%COMP%]     .mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-header-cell{font-size:12px;text-transform:uppercase;color:#afafaf}[_nghost-%COMP%]     .mdc-data-table__cell, [_nghost-%COMP%]     .mdc-data-table__header-cell{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-row:hover .mat-mdc-cell{background:#f5f5f5}[_nghost-%COMP%]     .mat-mdc-table tbody, [_nghost-%COMP%]     .mat-mdc-table tfoot, [_nghost-%COMP%]     .mat-mdc-table thead, [_nghost-%COMP%]     .mat-mdc-cell, [_nghost-%COMP%]     .mat-mdc-footer-cell, [_nghost-%COMP%]     .mat-mdc-header-row, [_nghost-%COMP%]     .mat-mdc-row, [_nghost-%COMP%]     .mat-mdc-footer-row, [_nghost-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{background:none}.table_wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}table[_ngcontent-%COMP%]{width:100%;border-radius:12px;background:#fff!important;padding:8px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%}.github[_ngcontent-%COMP%]{display:flex;justify-content:center}.github__content[_ngcontent-%COMP%]{max-width:100%;background:#fff;border-radius:12px;padding:26px;border:1px solid #ebeaea;display:flex;flex-direction:column;gap:30px}@media (max-width: 48em){.github__content[_ngcontent-%COMP%]{padding:22px;gap:20px}}.github__header[_ngcontent-%COMP%]{width:100%;max-width:60%}.github__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:24px!important;font-size:22px;font-weight:600}.github__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#898e99;margin-top:6px!important}.github__separator[_ngcontent-%COMP%]{width:100%;height:1px;background:#ebeaea}.github__main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:40px}.github__section-label[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.github__section-content[_ngcontent-%COMP%]{margin-top:16px}.github__activity[_ngcontent-%COMP%]{border-radius:12px;padding:14px;border:1px solid #ebeaea}.github__activity[_ngcontent-%COMP%]:hover{background:#f5f5f5}.github__activity-list[_ngcontent-%COMP%]{display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-template-rows:none}.github__activity-link[_ngcontent-%COMP%]{color:#44c96c}.github__activity-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.github__activity-timestamp[_ngcontent-%COMP%]{margin-top:6px!important;color:#9c9c9c;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}"],changeDetection:0});let t=e;return t})();var ke=[{path:"",component:It,title:"GitHub Dashboard | Kaiteki"},{path:":owner/:repoName",component:Nt,title:"GitHub Repository | Kaiteki"}],jt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=N({type:e}),e.\u0275inj=H({imports:[L.forChild(ke),L]});let t=e;return t})();var De=(()=>{let e=class e{constructor(a,r){this.toastService=a,this.router=r}intercept(a,r){return a.url.includes("github")?r.handle(a).pipe(w(_=>_?.status===401?(this.router.navigate(["/hub/integrations"]),this.toastService.error("GitHub integration is not connected"),x(()=>_)):(this.toastService.error("GitHub integration is not available"),x(()=>_)))):r.handle(a)}};e.\u0275fac=function(r){return new(r||e)(A(T),A(pt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$t=[{provide:rt,useClass:De,multi:!0}];var ci=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=N({type:e}),e.\u0275inj=H({providers:[$t],imports:[at,Gt,jt]});let t=e;return t})();export{ci as GithubModule};
