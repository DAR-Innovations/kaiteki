import{a as Ct}from"./chunk-Q5IVZLKN.js";import{a as ht}from"./chunk-UHDHI43H.js";import"./chunk-JWTWT544.js";import{a as xt}from"./chunk-5C4BXUQC.js";import{a as zt}from"./chunk-UYMINATM.js";import{b as R}from"./chunk-YHW2EZXT.js";import{a as _e}from"./chunk-7NOJP65O.js";import{a as fe}from"./chunk-6HX3H25K.js";import{$a as mt,A as je,D as I,E as be,F as ue,G as ge,Ga as he,H as z,Ia as Ye,Ja as Ze,Ka as et,La as tt,O as J,P as Be,Q as Le,S as Ae,V as Ne,Va as it,W as ze,Wa as nt,X as Re,Xa as rt,Y as ve,Ya as ot,_ as He,_a as at,a as le,ab as st,ba as Ue,bb as lt,ca as We,cb as pt,db as ct,eb as dt,fb as _t,gb as ft,hb as bt,ib as ut,m as pe,ma as Qe,mb as H,nb as Ce,o as $e,ob as gt,p as ce,ra as Ge,sa as qe,u as Me,ua as Ke,va as Je,x as de,xa as Xe}from"./chunk-XIB24JUK.js";import{Aa as w,F as W,Fb as f,Hb as Ee,I as Pe,Ib as re,Jb as oe,K as Q,Ka as B,Kb as o,Lb as a,Mb as _,N as Te,Nb as D,Ob as F,Qb as P,Tb as M,Vb as c,X as ke,Y as ee,Yb as L,_ as Ie,aa as Oe,bc as ae,cc as s,dc as q,dd as Fe,ea as te,ec as h,f as Z,fa as ie,fb as m,fc as A,gb as b,ja as G,jd as me,ld as T,mc as N,md as se,n as k,nc as V,o as O,oc as De,pa as C,qa as ne,qd as Ve,s as E,vc as g,wc as x,xb as d,xc as K,za as y,zb as p}from"./chunk-TYBYM3PM.js";import"./chunk-REV7FFDQ.js";import{a as X,b as Y,f as Nt}from"./chunk-MON7YFGF.js";var wt=Nt(zt());var Mt=(()=>{let t=class t{constructor(i){this.httpClient=i,this.baseUrl=`${_e.apiUrl}/api/v1/members`}getTeamMemberById(i){return this.httpClient.get(`${this.baseUrl}/${i}`)}};t.\u0275fac=function(n){return new(n||t)(G(le))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ut(e,t){if(e&1&&(o(0,"div",1)(1,"div",2),_(2,"ngx-avatars",3),o(3,"div")(4,"p",4),s(5),a(),o(6,"p",5),s(7),g(8,"date"),a()()(),o(9,"div",6)(10,"div",7)(11,"p",8),s(12,"Email"),a(),o(13,"p",9),s(14),a()(),o(15,"div",7)(16,"p",8),s(17,"Birth date"),a(),o(18,"p",9),s(19),g(20,"date"),a()(),o(21,"div",7)(22,"p",8),s(23,"Worked for"),a(),o(24,"p",9),s(25),a()()()()),e&2){let r=t,i=c(2);m(2),L("src","api/v1/files/",r.avatarId,""),p("name",r.fullName),m(3),q(r.fullName),m(2),A(" ",r.position,", since ",K(8,9,r.joinedDate,"longDate")," "),m(7),q(r.email),m(5),q(K(20,12,r.birthDate,"longDate")),m(6),q(i.getWorkPeriodString(r.joinedDate))}}function Wt(e,t){if(e&1&&d(0,Ut,26,15,"div",1),e&2){let r;f(0,(r=t.data)?0:-1,r)}}var St=(()=>{let t=class t{constructor(i){this.teamMembersService=i,this.member$=k(null)}ngOnInit(){this.member$=this.teamMembersService.getTeamMemberById(this.memberId)}getWorkPeriodString(i){let n=(0,wt.default)().diff(i,"hours",!0),l=Math.floor(n/(365*24)),u=Math.floor(n%(365*24)/(30*24)),v=Math.floor(n%(30*24)/24),xe=Math.floor(n%24),j=[];return l>0&&j.push(`${l} year${l>1?"s":""}`),u>0&&j.push(`${u} month${u>1?"s":""}`),v>0&&j.push(`${v} day${v>1?"s":""}`),xe>0&&j.length===0&&j.push(`${xe} hour${xe>1?"s":""}`),j.join(", ")}};t.\u0275fac=function(n){return new(n||t)(b(Mt))},t.\u0275cmp=C({type:t,selectors:[["app-member-details-info"]],inputs:{memberId:"memberId"},decls:4,vars:5,consts:[[1,"member__info-wrapper"],[1,"member__info-card"],[1,"member__info-card-details"],["size","80","bgColor","#64748B",3,"src","name"],[1,"member__info-card-details-name"],[1,"member__info-card-details-position"],[1,"member__info-card-info"],[1,"member__info-card-info-section"],[1,"member__info-card-info-label"],[1,"member__info-card-info-value"]],template:function(n,l){if(n&1&&(o(0,"section",0),d(1,Wt,1,1),g(2,"withLoading"),g(3,"async"),a()),n&2){let u;m(),f(1,(u=x(3,3,x(2,1,l.member$)))?1:-1,u)}},dependencies:[z,T,se,H],styles:[".member__info-card[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;gap:30px;flex-wrap:wrap;background:#fff;border:1px solid #e6eaee;border-radius:8px;padding:24px;margin-bottom:20px}.member__info-card-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.member__info-card-details-name[_ngcontent-%COMP%]{font-weight:600;font-size:24px;margin-bottom:4px!important}.member__info-card-details-position[_ngcontent-%COMP%]{color:#535353}.member__info-card-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;column-gap:60px;row-gap:14px}.member__info-card-info-section[_ngcontent-%COMP%]{grid-column:span 1/span 1}.member__info-card-info-label[_ngcontent-%COMP%]{color:#6b6b6b;text-align:center}.member__info-card-info-value[_ngcontent-%COMP%]{text-align:center;font-weight:500}"],changeDetection:0});let e=t;return e})();var U=(()=>{let t=class t{constructor(i,n){this.httpClient=i,this.teamsService=n,this.baseUrl=`${_e.apiUrl}/api/v1/members/analytics`}getStatistics(i){return this.httpClient.get(`${this.baseUrl}/statistics`,{params:J({teamMemberId:i})})}getPerformanceByPeriod(i){return this.httpClient.get(`${this.baseUrl}/performance-by-period`,{params:J({teamMemberId:i})})}getTasksCountByPriority(i){return this.httpClient.get(`${this.baseUrl}/tasks-by-status`,{params:J({teamMemberId:i})})}exportMembers(i,n){let l=Y(X({},n),{teamId:i});return this.httpClient.get(`${this.baseUrl}/export`,{params:J(l),responseType:"blob"})}exportCurrentTeamMembers(i){return this.teamsService.currentTeam$.pipe(ee(n=>n?this.exportMembers(n.id,i):O(()=>Error("No current team"))))}};t.\u0275fac=function(n){return new(n||t)(G(le),G(R))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Kt=["memberId",""],Tt=()=>({height:"100%","min-height":"270px","border-radius":"8px"});function Jt(e,t){if(e&1&&(o(0,"div",1)(1,"div",3),_(2,"mat-progress-spinner",4),o(3,"p",5),s(4),a()(),o(5,"p",6),s(6,"Overall Performance"),a()()),e&2){let r=c();m(2),p("value",r.data.performance),m(2),h("",r.data.performance,"%")}}function Xt(e,t){e&1&&_(0,"ngx-skeleton-loader",2),e&2&&p("theme",N(1,Tt))}function Yt(e,t){if(e&1&&d(0,Jt,7,2,"div",1)(1,Xt,1,2,"ngx-skeleton-loader",2),e&2){let r=t;f(0,r.data?0:-1),m(),f(1,r.loading?1:-1)}}function Zt(e,t){if(e&1&&(o(0,"div",7)(1,"div",9)(2,"p",10),s(3,"Performance(%) by period"),a()(),o(4,"div"),_(5,"canvas",11),a()()),e&2){let r=c(),i=c();m(5),p("data",r.data)("options",i.performanceChartOptions)}}function ei(e,t){e&1&&_(0,"ngx-skeleton-loader",8),e&2&&p("theme",N(1,Tt))}function ti(e,t){if(e&1&&d(0,Zt,6,2,"div",7)(1,ei,1,2,"ngx-skeleton-loader",8),e&2){let r=t;f(0,r.data?0:-1),m(),f(1,r.loading||r.error?1:-1)}}var kt=(()=>{let t=class t{constructor(i,n){this.performanceService=i,this.membersAnalyticsService=n,this.memberPerformance$=k(null),this.performanceChartData$=k(null),this.performanceChartOptions={responsive:!0,maintainAspectRatio:!1,font:{family:"Poppins, sans-serif",size:14}}}ngOnInit(){this.memberPerformance$=this.performanceService.getTeamMemberPerformance(this.memberId).pipe(E(i=>Y(X({},i),{performance:i.performance*100}))),this.performanceChartData$=this.membersAnalyticsService.getPerformanceByPeriod(this.memberId).pipe(E(i=>({labels:i.labels,datasets:[{data:i.data,label:"Performance by period",borderColor:"rgba(6, 142, 68, 0.8)",backgroundColor:"rgba(6, 142, 68, 0.4)",fill:!0,tension:.5}]})))}};t.\u0275fac=function(n){return new(n||t)(b(ht),b(U))},t.\u0275cmp=C({type:t,selectors:[["app-member-performance-section","memberId",""]],inputs:{memberId:"memberId"},attrs:Kt,decls:7,vars:10,consts:[[1,"member__details-section"],[1,"member__details-section-statistics","performance"],["count","1","appearance","line",1,"member__details-performance-stats-loading",3,"theme"],[1,"member__details-performance-wrapper"],["diameter","150",3,"value"],[1,"member__details-performance-value"],[1,"member__details-performance-label"],[1,"member__details-section-graph"],["count","1","appearance","line",1,"member__details-performance-graph-loading",3,"theme"],[1,"member__details-section-graph-toolbar"],[1,"member__details-section-graph-title"],["baseChart","","height","250","type","line",3,"data","options"]],template:function(n,l){if(n&1&&(o(0,"div",0),d(1,Yt,2,2),g(2,"withLoading"),g(3,"async"),d(4,ti,2,2),g(5,"withLoading"),g(6,"async"),a()),n&2){let u,v;m(),f(1,(u=x(3,4,x(2,2,l.memberPerformance$)))?1:-1,u),m(3),f(4,(v=x(6,8,x(5,6,l.performanceChartData$)))?4:-1,v)}},dependencies:[at,he,de,T,H],styles:["[_nghost-%COMP%]     mat-progress-spinner{box-shadow:0 0 0 15px #e9e9e9 inset;border-radius:50%}.member__details-performance-stats-loading[_ngcontent-%COMP%]{grid-column:span 2/span 2}@media screen and (max-width: 48em){.member__details-performance-stats-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.member__details-performance-graph-loading[_ngcontent-%COMP%]{grid-column:span 3/span 3}@media screen and (max-width: 48em){.member__details-performance-graph-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}"],changeDetection:0});let e=t;return e})();var It=()=>({height:"100%","min-height":"270px","border-radius":"8px"});function ni(e,t){if(e&1&&(o(0,"div",1)(1,"div",3)(2,"div",4)(3,"mat-icon"),s(4,"apps"),a()(),o(5,"div",5)(6,"p",6),s(7,"Total"),a(),o(8,"p",7),s(9),a()()(),o(10,"div",3)(11,"div",4)(12,"mat-icon"),s(13,"task_alt"),a()(),o(14,"div",5)(15,"p",6),s(16,"Completed"),a(),o(17,"p",7),s(18),a()()(),o(19,"div",3)(20,"div",4)(21,"mat-icon"),s(22,"downloading"),a()(),o(23,"div",5)(24,"p",6),s(25,"In progress"),a(),o(26,"p",7),s(27),a()()(),o(28,"div",3)(29,"div",4)(30,"mat-icon"),s(31,"apps"),a()(),o(32,"div",5)(33,"p",6),s(34,"Open"),a(),o(35,"p",7),s(36),a()()()()),e&2){let r=t;m(9),h("",r.totalTasksCount," Tasks"),m(9),h("",r.completedTasksCount," Tasks"),m(9),h("",r.inProgressTasksCount," Tasks"),m(9),h("",r.openTasksCount," Tasks")}}function ri(e,t){e&1&&_(0,"ngx-skeleton-loader",2),e&2&&p("theme",N(1,It))}function oi(e,t){if(e&1&&d(0,ni,37,4,"div",1)(1,ri,1,2,"ngx-skeleton-loader",2),e&2){let r,i=t;f(0,(r=i.data)?0:-1,r),m(),f(1,i.loading||i.error?1:-1)}}function ai(e,t){if(e&1&&(o(0,"div",8)(1,"div",10)(2,"p",11),s(3,"Tasks count by statuses"),a()(),o(4,"div"),_(5,"canvas",12),a()()),e&2){let r=c(),i=c();m(5),p("data",r.data)("options",i.barChartOptions)}}function mi(e,t){e&1&&_(0,"ngx-skeleton-loader",9),e&2&&p("theme",N(1,It))}function si(e,t){if(e&1&&d(0,ai,6,2,"div",8)(1,mi,1,2,"ngx-skeleton-loader",9),e&2){let r=t;f(0,r.data?0:-1),m(),f(1,r.loading||r.error?1:-1)}}var Ot=(()=>{let t=class t{constructor(i){this.membersAnalyticsService=i,this.tasksAnalytics$=k(null),this.tasksCountByPriority$=k(null),this.barChartOptions={responsive:!0,maintainAspectRatio:!1,font:{family:"Poppins, sans-serif",size:14}}}ngOnInit(){this.tasksAnalytics$=this.membersAnalyticsService.getStatistics(this.memberId),this.tasksCountByPriority$=this.membersAnalyticsService.getTasksCountByPriority(this.memberId).pipe(E(i=>({labels:i.labels,datasets:[{data:i.data,label:"Tasks count by status",borderRadius:8,backgroundColor:"rgba(6, 142, 68, 0.8)"}]})))}};t.\u0275fac=function(n){return new(n||t)(b(U))},t.\u0275cmp=C({type:t,selectors:[["app-member-tasks-section"]],inputs:{memberId:"memberId"},decls:7,vars:10,consts:[[1,"member__details-section"],[1,"member__details__tasks"],["count","1","appearance","line",1,"member__details-section__task-analytics-loading",3,"theme"],[1,"member__details__tasks-item"],[1,"member__details__tasks-item-icon"],[1,"member__details__tasks-item-body"],[1,"member__details__tasks-item-title"],[1,"member__details__tasks-item-number"],[1,"member__details-section-graph"],["count","1","appearance","line",1,"member__details-section__tasks-by-teams-loading",3,"theme"],[1,"member__details-section-graph-toolbar"],[1,"member__details-section-graph-title"],["baseChart","","height","250",3,"data","options"]],template:function(n,l){if(n&1&&(o(0,"div",0),d(1,oi,2,2),g(2,"withLoading"),g(3,"async"),d(4,si,2,2),g(5,"withLoading"),g(6,"async"),a()),n&2){let u,v;m(),f(1,(u=x(3,4,x(2,2,l.tasksAnalytics$)))?1:-1,u),m(3),f(4,(v=x(6,8,x(5,6,l.tasksCountByPriority$)))?4:-1,v)}},dependencies:[I,he,de,T,H],styles:[".member__details__tasks[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);gap:12px;grid-column:span 2/span 2}@media screen and (max-width: 48em){.member__details__tasks[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.member__details__tasks-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;background:#fff;padding:12px;color:#242424;border:1px solid #e6eaee}.member__details__tasks-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.member__details__tasks-item-title[_ngcontent-%COMP%]{font-weight:600}.member__details__tasks-item-body[_ngcontent-%COMP%]{text-align:center;margin-top:12px}.member__details__tasks-item-number[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:#707070}.member__details-section__tasks-by-teams-loading[_ngcontent-%COMP%]{grid-column:span 3/span 3}@media screen and (max-width: 48em){.member__details-section__tasks-by-teams-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.member__details-section__task-analytics-loading[_ngcontent-%COMP%]{grid-column:span 2/span 2}@media screen and (max-width: 48em){.member__details-section__task-analytics-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}"],changeDetection:0});let e=t;return e})();function pi(e,t){if(e&1&&(o(0,"mat-option",6),s(1),a()),e&2){let r=t.$implicit;p("matTooltip",r)("value",r),m(),h(" ",r," ")}}var Et=(()=>{let t=class t{constructor(i,n){this.router=i,this.route=n,this.filter=new B,this.destroy$=new Z,this.views=["Table","Cards"],this.form=new Re({searchValue:new ve(""),view:new ve})}ngOnInit(){this.patchInitialFormValues(),this.trackFormValueChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}patchInitialFormValues(){let i=this.getQueryParameters();this.form.patchValue(i),this.filter.emit(i)}trackFormValueChanges(){this.form.valueChanges.pipe(Pe(800),Te(),Ie(this.destroy$)).subscribe(i=>{let n={searchValue:i.searchValue??void 0,view:i.view??void 0};this.saveQueryParameters(n),this.filter.emit(n)})}saveQueryParameters(i){this.router.navigate([],{queryParams:Be(i),queryParamsHandling:"merge"})}getQueryParameters(){let i={searchValue:"",view:this.views[0]},n=this.route.snapshot.queryParams;return Le(n,i)}};t.\u0275fac=function(n){return new(n||t)(b($e),b(pe))},t.\u0275cmp=C({type:t,selectors:[["app-members-filter"]],outputs:{filter:"filter"},decls:19,vars:1,consts:[[1,"filter"],[1,"filter__fields",3,"formGroup"],["appearance","outline"],["matPrefix",""],["matInput","","type","text","formControlName","searchValue"],["formControlName","view"],[3,"matTooltip","value"]],template:function(n,l){n&1&&(o(0,"section",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),s(5,"Filters"),a()(),o(6,"form",1)(7,"mat-form-field",2)(8,"mat-label"),s(9,"Search"),a(),o(10,"mat-icon",3),s(11,"search"),a(),_(12,"input",4),a(),o(13,"mat-form-field",2)(14,"mat-label"),s(15,"View"),a(),o(16,"mat-select",5),re(17,pi,2,3,"mat-option",6,Ee),a()()()()()()),n&2&&(m(6),p("formGroup",l.form),m(11),oe(l.views))},dependencies:[I,ot,it,nt,rt,Je,Ke,Ge,qe,Ze,je,Xe,He,Ae,Ne,ze,Ue,We],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter[_ngcontent-%COMP%]{margin-top:22px}.filter__fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;align-items:start}"],changeDetection:0});let e=t;return e})();function fi(e,t){if(e&1){let r=P();o(0,"div",0)(1,"div",1)(2,"h1",2),s(3),a()(),o(4,"div",3)(5,"app-button",4),M("click",function(n){y(r);let l=c();return w(l.onExportClick(n))}),o(6,"p"),s(7,"Export"),a()(),o(8,"app-button",5),M("click",function(n){y(r);let l=c();return w(l.onAddNewClick(n))}),o(9,"p"),s(10,"Invite"),a()()()()}e&2&&(m(3),h("",t.name," Members"))}var Dt=(()=>{let t=class t{constructor(i,n,l,u,v){this.dialog=i,this.teamsService=n,this.teamMembersAnalyticsService=l,this.toastService=u,this.filesService=v,this.currentTeam$=this.teamsService.currentTeam$}onAddNewClick(i){i.preventDefault(),this.dialog.open(Ct,{minWidth:"30%"}).afterClosed().pipe(Q(1)).subscribe()}onExportClick(i){i.preventDefault(),this.teamMembersAnalyticsService.exportCurrentTeamMembers({}).pipe(W(n=>(this.toastService.error("Failed to export members"),O(()=>n))),Q(1)).subscribe(n=>{this.filesService.downloadBlob(n),this.toastService.open("Successfully exported members")})}};t.\u0275fac=function(n){return new(n||t)(b(Qe),b(R),b(U),b(fe),b(xt))},t.\u0275cmp=C({type:t,selectors:[["app-members-toolbar"]],decls:2,vars:3,consts:[[1,"dashboard__toolbar"],[1,"dashboard__toolbar-left"],[1,"dashboard__toolbar-title"],[1,"dashboard__toolbar-right"],["icon","download","variant","outline",1,"dashboard__toolbar-item",3,"click"],["icon","add",1,"dashboard__toolbar-item",3,"click"]],template:function(n,l){if(n&1&&(d(0,fi,11,1,"div",0),g(1,"async")),n&2){let u;f(0,(u=x(1,1,l.currentTeam$))?0:-1,u)}},dependencies:[Ce,T],styles:[".dashboard__toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;overflow-x:auto;overflow-y:hidden}.dashboard__toolbar-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.dashboard__toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}@media (max-width: 40em){.dashboard__toolbar-left[_ngcontent-%COMP%]{display:none}}.dashboard__toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.dashboard__toolbar-item[_ngcontent-%COMP%]{text-overflow:ellipsis;text-wrap:nowrap}"],changeDetection:0});let e=t;return e})();var gi=(e,t)=>t.id,Ft=e=>[e],hi=(e,t)=>({background:e,color:t});function Ci(e,t){if(e&1){let r=P();o(0,"div",2),_(1,"ngx-avatars",3),o(2,"h3",4),s(3),a(),o(4,"span",5),s(5),a(),o(6,"div",6),s(7),a(),o(8,"div",7)(9,"app-button",8),M("click",function(n){y(r);let l=c(2);return w(l.onMenuClick(n))}),s(10," More "),a(),o(11,"mat-menu",null,0)(13,"button",9)(14,"mat-icon"),s(15,"person_outline"),a(),o(16,"span"),s(17,"View"),a()(),o(18,"button",10),M("click",function(){y(r);let n=c().$implicit,l=c();return w(l.onDeleteMember(n.id))}),o(19,"mat-icon"),s(20,"delete"),a(),o(21,"span"),s(22,"Remove"),a()()()()()}if(e&2){let r=ae(12),i=c().$implicit,n=c();p("routerLink",V(11,Ft,i.id)),m(),L("src","api/v1/files/",i.avatarId,""),p("name",i.fullName),m(2),A("",i.firstname," ",i.lastname,""),m(2),h(" ",i.position," "),m(),p("ngStyle",De(13,hi,n.getPerformanceColor(i.performance)[1],n.getPerformanceColor(i.performance)[0])),m(),h(" ",i.performance,"% "),m(2),p("matMenuTriggerFor",r),m(4),p("routerLink",V(16,Ft,i.id))}}function xi(e,t){if(e&1&&d(0,Ci,23,18,"div",2),e&2){let r=t.$implicit;f(0,r?0:-1)}}var Vt=(()=>{let t=class t{constructor(){this.delete=new B,this.members=[]}onDeleteMember(i){this.delete.emit(i)}onMenuClick(i){i.stopPropagation()}trackByTeamMembers(i,n){return n.id}getPerformanceColor(i){return i<=100&&i>=70?["#6d9f33","#F0F5EA"]:i<70&&i>=40?["#f4a40f","#FDF5E7"]:["#ef6a6b","#FDF0F0"]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=C({type:t,selectors:[["app-members-cards-view"]],inputs:{members:"members"},outputs:{delete:"delete"},decls:3,vars:0,consts:[["actionMenu","matMenu"],[1,"members__cards"],[1,"members__cards__item",3,"routerLink"],["size","80","bgColor","#64748B",3,"src","name"],[1,"members__cards__item-title"],[1,"members__cards__item-desc"],[1,"members__cards__item-performance",3,"ngStyle"],[1,"members__cards__item-bottom"],["variant","outline",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(n,l){n&1&&(o(0,"div",1),re(1,xi,1,1,null,null,gi),a()),n&2&&(m(),oe(l.members))},dependencies:[me,Ce,I,ue,be,ge,ce,z],styles:[".members__cards[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));grid-template-rows:none}.members__cards__item[_ngcontent-%COMP%]{cursor:pointer;position:relative;padding:16px;height:fit-content;border-radius:10px;background:#fff;border:1px solid #e9e9e9;overflow:hidden;word-wrap:break-word;display:flex;flex-direction:column;align-items:center}.members__cards__item-bottom[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:18px}.members__cards__item-title[_ngcontent-%COMP%]{font-weight:500;margin-top:14px}.members__cards__item-performance[_ngcontent-%COMP%]{width:fit-content;padding:2px 8px;position:absolute;right:16px;top:12px;border-radius:4px;font-size:14px;text-align:center}.members__cards__item-desc[_ngcontent-%COMP%]{font-size:12px;color:#575757}"],changeDetection:0});let e=t;return e})();var vi=e=>({color:e}),$t=e=>[e];function yi(e,t){e&1&&(o(0,"th",13),s(1," Name "),a())}function wi(e,t){if(e&1&&(o(0,"td",14)(1,"div",15),_(2,"ngx-avatars",16),o(3,"p"),s(4),a()()()),e&2){let r=t.$implicit;m(2),L("src","api/v1/files/",r.avatarId,""),p("name",r.fullName),m(2),A("",r.firstname," ",r.lastname,"")}}function Si(e,t){e&1&&(o(0,"th",13),s(1," Position "),a())}function Pi(e,t){if(e&1&&(o(0,"td",14),s(1),a()),e&2){let r=t.$implicit;m(),h(" ",r.position," ")}}function Ti(e,t){e&1&&(o(0,"th",13),s(1," Email "),a())}function ki(e,t){if(e&1&&(o(0,"td",14),s(1),a()),e&2){let r=t.$implicit;m(),h(" ",r.email," ")}}function Ii(e,t){e&1&&(o(0,"th",13),s(1," Since "),a())}function Oi(e,t){if(e&1&&(o(0,"td",14),s(1),g(2,"date"),a()),e&2){let r=t.$implicit;m(),h(" ",K(2,1,r.joinedDate,"EEEE, MMMM d")," ")}}function Ei(e,t){e&1&&(o(0,"th",13),s(1," Performance "),a())}function Di(e,t){if(e&1&&(o(0,"td",14)(1,"p",17),s(2),a()()),e&2){let r=t.$implicit,i=c();m(),p("ngStyle",V(2,vi,i.getPerformanceColor(r.performance))),m(),h(" ",r.performance,"% ")}}function Fi(e,t){e&1&&_(0,"th",13)}function Vi(e,t){if(e&1){let r=P();o(0,"td",14)(1,"button",18),M("click",function(n){y(r);let l=c();return w(l.onMoreClick(n))}),o(2,"mat-icon"),s(3,"more_horizont"),a()(),o(4,"mat-menu",null,0)(6,"button",19)(7,"mat-icon"),s(8,"person_outline"),a(),o(9,"span"),s(10,"View"),a()(),o(11,"button",20),M("click",function(){let n=y(r).$implicit,l=c();return w(l.onDeleteMember(n.id))}),o(12,"mat-icon"),s(13,"delete"),a(),o(14,"span"),s(15,"Remove"),a()()()()}if(e&2){let r=t.$implicit,i=ae(5);m(),p("matMenuTriggerFor",i),m(5),p("routerLink",V(2,$t,r.id))}}function $i(e,t){e&1&&_(0,"tr",21)}function ji(e,t){if(e&1&&_(0,"tr",22),e&2){let r=t.$implicit;p("routerLink",V(1,$t,r.id))}}var jt=(()=>{let t=class t{constructor(){this.delete=new B,this.members=[],this.displayedColumns=["name","position","email","entryDate","performance","actions"]}onDeleteMember(i){this.delete.emit(i)}onMoreClick(i){i.stopPropagation()}getPerformanceColor(i){return i>=70&&i<=100?"#6d9f33":i>=40&&i<70?"#f4a40f":"#ef6a6b"}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=C({type:t,selectors:[["app-members-table-view"]],inputs:{members:"members"},outputs:{delete:"delete"},decls:23,vars:3,consts:[["taskMoreMenu","matMenu"],[1,"members-table__wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["matColumnDef","email"],["matColumnDef","entryDate"],["matColumnDef","performance"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"members-table__name-avatar"],["size","30","bgColor","#64748B",3,"src","name"],[1,"members-table__performance",3,"ngStyle"],[3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",3,"routerLink"]],template:function(n,l){n&1&&(o(0,"div",1)(1,"table",2),_(2,"caption"),D(3,3),d(4,yi,2,0,"th",4)(5,wi,5,5,"td",5),F(),D(6,6),d(7,Si,2,0,"th",4)(8,Pi,2,1,"td",5),F(),D(9,7),d(10,Ti,2,0,"th",4)(11,ki,2,1,"td",5),F(),D(12,8),d(13,Ii,2,0,"th",4)(14,Oi,3,4,"td",5),F(),D(15,9),d(16,Ei,2,0,"th",4)(17,Di,3,4,"td",5),F(),D(18,10),d(19,Fi,1,0,"th",4)(20,Vi,16,4,"td",5),F(),d(21,$i,1,0,"tr",11)(22,ji,1,3,"tr",12),a()()),n&2&&(m(),p("dataSource",l.members),m(20),p("matHeaderRowDef",l.displayedColumns),m(),p("matRowDefColumns",l.displayedColumns))},dependencies:[me,I,ue,be,ge,mt,lt,_t,pt,st,ft,ct,dt,bt,ut,ce,z,se],styles:["[_nghost-%COMP%]     .mat-mdc-table{border:1px solid #e9e9e9;background:none}[_nghost-%COMP%]     .mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-header-cell{font-size:12px;text-transform:uppercase;color:#afafaf}[_nghost-%COMP%]     .mdc-data-table__cell, [_nghost-%COMP%]     .mdc-data-table__header-cell{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-row:hover .mat-mdc-cell{background:#f3f3f3}[_nghost-%COMP%]     .mat-mdc-table tbody, [_nghost-%COMP%]     .mat-mdc-table tfoot, [_nghost-%COMP%]     .mat-mdc-table thead, [_nghost-%COMP%]     .mat-mdc-cell, [_nghost-%COMP%]     .mat-mdc-footer-cell, [_nghost-%COMP%]     .mat-mdc-header-row, [_nghost-%COMP%]     .mat-mdc-row, [_nghost-%COMP%]     .mat-mdc-footer-row, [_nghost-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{background:none}.members-table__wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto}.members-table__name-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.members-table__name-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:none;width:26px;height:26px;border-radius:9999px;background:#afafaf}.members-table__name-avatar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600}.members-table__performance[_ngcontent-%COMP%]{font-weight:500}table[_ngcontent-%COMP%]{width:100%;border-radius:6px;background:#fff!important;padding:0 12px 12px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f8f8}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:160px;padding:14px}th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let e=t;return e})();function Li(e,t){if(e&1&&(o(0,"section",1),_(1,"app-member-details-info",2),o(2,"div",3),_(3,"app-member-tasks-section",2)(4,"app-member-performance-section",2),a()()),e&2){let r=c();m(),p("memberId",r.memberId),m(2),p("memberId",r.memberId),m(),p("memberId",r.memberId)}}var Bt=(()=>{let t=class t{constructor(i,n){this.route=i,this.location=n,this.memberId=null}ngOnInit(){this.memberId=this.getIdFromParams()}getIdFromParams(){let i=this.route.snapshot.paramMap.get("id");i||this.location.back();let n=Number(i);return isNaN(n)&&this.location.back(),n}};t.\u0275fac=function(n){return new(n||t)(b(pe),b(Fe))},t.\u0275cmp=C({type:t,selectors:[["app-member-details"]],decls:2,vars:1,consts:[["value","Member Details"],[1,"page","member__details-wrapper"],[3,"memberId"],[1,"member__details-sections"]],template:function(n,l){n&1&&(_(0,"app-page-header",0),d(1,Li,5,3,"section",1)),n&2&&(m(),f(1,l.memberId?1:-1))},dependencies:[Ye,Ot,kt,St],styles:["[_nghost-%COMP%]     .member__details-sections{display:flex;flex-direction:column;gap:20px;grid-column:span 3/span 3}@media screen and (max-width: 64em){[_nghost-%COMP%]     .member__details-sections{grid-column:span 4/span 4}}[_nghost-%COMP%]     .member__details-section{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:20px}@media screen and (max-width: 48em){[_nghost-%COMP%]     .member__details-section{gap:16px}}[_nghost-%COMP%]     .member__details-section-graph{grid-column:span 3/span 3;padding:24px;border:1px solid #e6eaee;border-radius:8px;background:#fff}@media screen and (max-width: 48em){[_nghost-%COMP%]     .member__details-section-graph{grid-column:span 5/span 5}}[_nghost-%COMP%]     .member__details-section-graph-title{font-size:16px;font-weight:500}[_nghost-%COMP%]     .member__details-section-graph-toolbar{display:flex;justify-content:space-between;gap:12px;margin-bottom:24px}[_nghost-%COMP%]     .member__details-section-graph-select{padding:6px;border:1px solid #e6eaee;border-radius:6px}[_nghost-%COMP%]     .member__details-section-statistics{grid-column:span 2/span 2;padding:20px;border:1px solid #e6eaee;border-radius:8px;background:#fff}@media screen and (max-width: 48em){[_nghost-%COMP%]     .member__details-section-statistics{grid-column:span 5/span 5}}[_nghost-%COMP%]     .member__details-section-statistics.performance{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:32px}[_nghost-%COMP%]     .member__details-performance-wrapper{position:relative}[_nghost-%COMP%]     .member__details-performance-label{font-size:16px;font-weight:600}[_nghost-%COMP%]     .member__details-performance-value{width:100%;position:absolute;text-align:center;top:42%;font-size:20px;font-weight:600}"],changeDetection:0});let e=t;return e})();function Ai(e,t){if(e&1){let r=P();o(0,"app-members-table-view",4),M("delete",function(n){y(r);let l=c(2);return w(l.onDeleteMember(n))}),a()}if(e&2){let r=c();p("members",r)}}function Ni(e,t){if(e&1){let r=P();o(0,"app-members-cards-view",4),M("delete",function(n){y(r);let l=c(2);return w(l.onDeleteMember(n))}),a()}if(e&2){let r=c();p("members",r)}}function zi(e,t){if(e&1){let r=P();o(0,"div",2),d(1,Ai,1,1)(2,Ni,1,1),a(),o(3,"app-paginator",3),M("page",function(n){y(r);let l=c();return w(l.onPage(n))}),a()}if(e&2){let r,i=c();m(),f(1,(r=i.filter.view)==="Table"?1:r==="Cards"?2:-1),m(2),p("pagination",i.pagination)}}var Lt=(()=>{let t=class t{constructor(i,n){this.teamsService=i,this.toastService=n,this.refetchTeamMembersSubject=new Z,this.refetchTeamMembers$=this.refetchTeamMembersSubject.asObservable(),this.filter={},this.pagination=et,this.teamMembers$=this.refetchTeamMembers$.pipe(ke([]),ee(()=>this.loadTeamMembers()))}ngOnInit(){this.refetchTeamMembers()}ngOnDestroy(){this.refetchTeamMembersSubject.next(),this.refetchTeamMembersSubject.complete()}refetchTeamMembers(){this.refetchTeamMembersSubject.next()}loadTeamMembers(){let i={size:this.pagination.size,page:this.pagination.page};return this.teamsService.searchTeamMembers(i,this.filter).pipe(Oe(n=>{this.pagination.page=n.number,this.pagination.size=n.size,this.pagination.totalElements=n.totalElements,this.pagination.totalPages=n.totalPages}),E(n=>n.content),W(n=>(this.toastService.open("Failed to get team members"),O(()=>n))))}onFilter(i){this.filter=i,this.refetchTeamMembers()}onPage(i){this.pagination.size=i.size,this.pagination.page=i.page,this.refetchTeamMembers()}onDeleteMember(i){this.teamsService.deleteTeamMember(i).pipe(W(n=>(this.toastService.open("Failed to delete team member"),O(()=>n))),Q(1)).subscribe(()=>{this.toastService.open("Successfully removed team member"),this.refetchTeamMembers()})}};t.\u0275fac=function(n){return new(n||t)(b(R),b(fe))},t.\u0275cmp=C({type:t,selectors:[["app-members-list"]],decls:5,vars:3,consts:[[1,"page","members"],[3,"filter"],[1,"members__content"],[3,"page","pagination"],[3,"delete","members"]],template:function(n,l){if(n&1&&(o(0,"section",0),_(1,"app-members-toolbar"),o(2,"app-members-filter",1),M("filter",function(v){return l.onFilter(v)}),a(),d(3,zi,4,2),g(4,"async"),a()),n&2){let u;m(3),f(3,(u=x(4,1,l.teamMembers$))?3:-1,u)}},dependencies:[tt,Dt,Et,Vt,jt,T],styles:[".members[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.members__content[_ngcontent-%COMP%]{flex:1;margin-top:22px}"],changeDetection:0});let e=t;return e})();var Ri=[{path:"",component:Lt,title:"Members | Kaiteki"},{path:":id",component:Bt,title:"Member Details | Kaiteki"}],At=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ne({type:t}),t.\u0275inj=ie({imports:[Me.forChild(Ri),Me]});let e=t;return e})();var mr=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ne({type:t}),t.\u0275inj=ie({imports:[Ve,gt,At]});let e=t;return e})();export{mr as MembersModule};
