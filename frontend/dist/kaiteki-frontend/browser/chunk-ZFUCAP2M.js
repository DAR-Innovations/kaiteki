import{a as Q}from"./chunk-SSSRUOQZ.js";import{a as W}from"./chunk-V6GD72BR.js";import{a as J}from"./chunk-VNLWI6PF.js";import{a as K}from"./chunk-Z72R2TYW.js";import{a as R}from"./chunk-G2MQEQ3S.js";import{Ja as B,o as V,p as A,pb as q,v as F}from"./chunk-EPUQ6IPG.js";import{Aa as x,F as a,Fb as I,Ib as H,Jb as L,K as p,Kb as c,Lb as r,Mb as g,Qb as T,Tb as D,Vb as M,Y as O,Yb as j,cb as E,cc as d,ec as w,fa as _,fb as l,gb as m,ld as $,o as s,pa as v,qa as b,qd as U,s as G,vc as N,wc as z,xb as y,za as S,zb as P}from"./chunk-TYBYM3PM.js";import"./chunk-REV7FFDQ.js";import{a as h,b as u}from"./chunk-MON7YFGF.js";var X=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=v({type:t,selectors:[["app-integrations-layout"]],decls:1,vars:0,template:function(n,f){n&1&&g(0,"router-outlet")},dependencies:[V],changeDetection:0});let e=t;return e})();var C={github:{id:1,name:"GitHub",description:"Code hosting platform for version control and collaboration",connected:!1,icon:"github",onConnect:()=>console.log("Connect GitHub"),onDisconnect:()=>console.log("Disconnect GitHub")},spotify:{id:2,name:"Spotify",description:"Digital music, podcast, and video service that gives you access to millions of songs and other content from creators all over the world",connected:!1,icon:"spotify",onConnect:()=>console.log("Connect Spotify"),onDisconnect:()=>console.log("Disconnect Spotify")},telegram:{id:3,name:"Telegram",description:"Cloud-based instant messaging app that works across several platforms accessed by people throughout the world.",connected:!1,icon:"telegram",onConnect:()=>console.log("Connect Telegram"),onDisconnect:()=>console.log("Disconnect Telegram")}};var ot=(e,t)=>t.id;function rt(e,t){e&1&&(c(0,"span",7),d(1,"Enabled"),r())}function ct(e,t){if(e&1){let o=T();c(0,"button",11),D("click",function(){S(o);let n=M().$implicit;return x(n.onConnect())}),d(1," Connect "),r()}}function st(e,t){if(e&1){let o=T();c(0,"button",12),D("click",function(){S(o);let n=M().$implicit;return x(n.onDisconnect())}),d(1," Disconnect "),r()}}function at(e,t){if(e&1&&(c(0,"div",3)(1,"div",4)(2,"div",5),g(3,"img",6),y(4,rt,2,0,"span",7),r(),y(5,ct,2,0,"button",8)(6,st,2,0),r(),c(7,"h4",9),d(8),r(),c(9,"p",10),d(10),r()()),e&2){let o=t.$implicit;l(3),j("src","assets/images/integrations/",o.icon,".svg",E),P("alt",o.name),l(),I(4,o.connected?4:-1),l(),I(5,o.connected?6:5),l(3),w(" ",o.name," "),l(2),w(" ",o.description," ")}}var Y=(()=>{let t=class t{constructor(i,n,f,tt,et,it){this.spotifyService=i,this.telegramService=n,this.integrationsService=f,this.toastService=tt,this.githubService=et,this.router=it,this.integrations$=this.integrationsService.integrations$.pipe(O(()=>this.loadIntegrations()))}loadIntegrations(){return this.integrationsService.getUserIntegrations().pipe(G(i=>[u(h({},C.github),{connected:i.github?.enabled??!1,onConnect:()=>this.onGitHubConnect(),onDisconnect:()=>this.onGitHubDisconnect()}),u(h({},C.spotify),{connected:i.spotify?.enabled??!1,onConnect:()=>this.onSpotifyConnect(),onDisconnect:()=>this.onSpotifyDisconnect()}),u(h({},C.telegram),{connected:i.telegram?.enabled??!1,onConnect:()=>this.onTelegramConnect(),onDisconnect:()=>this.onTelegramDisconnect()})]),a(i=>(this.toastService.error("Failed to get integrations"),s(()=>i))))}onSpotifyConnect(){this.spotifyService.getConnectIntegrationUrl().pipe(p(1)).subscribe(i=>{window.location.replace(i.loginUrl)})}onSpotifyDisconnect(){this.spotifyService.disconnectSpotifyIntegration().pipe(p(1),a(i=>(this.toastService.error("Failed to disconnect Spotify"),s(()=>i)))).subscribe(()=>{this.toastService.open("Spotify integration disconnected!"),this.integrationsService.refreshIntegrations()})}onTelegramConnect(){this.telegramService.connectIntegration().pipe(a(i=>(this.toastService.error("Failed to connect Telegram"),s(()=>i))),p(1)).subscribe(()=>{this.toastService.open("Telegram integration connected!"),this.integrationsService.refreshIntegrations(),this.router.navigate(["/hub/integrations/telegram"])})}onTelegramDisconnect(){this.telegramService.disconnectIntegration().pipe(a(i=>(this.toastService.error("Failed to disconnect Telegram"),s(()=>i))),p(1)).subscribe(()=>{this.toastService.open("Telegram integration disconnected!"),this.integrationsService.refreshIntegrations()})}onGitHubConnect(){this.githubService.connectIntegration().pipe(p(1),a(i=>(this.toastService.error("Failed to connect GitHub integration"),s(()=>i)))).subscribe(()=>{this.toastService.open("GitHub integration connected!"),this.integrationsService.refreshIntegrations(),this.router.navigate(["/hub/integrations/github"])})}onGitHubDisconnect(){this.githubService.disconnectIntegration().pipe(p(1),a(i=>(this.toastService.error("Failed to disconnect GitHub integration"),s(()=>i)))).subscribe(()=>{this.toastService.open("GitHub integration disconnected!"),this.integrationsService.refreshIntegrations()})}};t.\u0275fac=function(n){return new(n||t)(m(J),m(Q),m(K),m(R),m(W),m(A))},t.\u0275cmp=v({type:t,selectors:[["app-integrations-list"]],decls:6,vars:2,consts:[["value","Integrations"],[1,"page"],[1,"integrations"],[1,"integrations__item"],[1,"integrations__item-header"],[1,"integrations__item-header-left"],[1,"integrations__item-icon",3,"src","alt"],[1,"integrations__item-enabled-tag"],[1,"integrations__item-connect"],[1,"integrations__item-title"],[1,"integrations__item-description"],[1,"integrations__item-connect",3,"click"],[1,"integrations__item-disconnect",3,"click"]],template:function(n,f){n&1&&(g(0,"app-page-header",0),c(1,"section",1)(2,"div",2),H(3,at,11,7,"div",3,ot),N(5,"async"),r()()),n&2&&(l(3),L(z(5,0,f.integrations$)))},dependencies:[B,$],styles:[".integrations[_ngcontent-%COMP%]{display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-template-rows:none}.integrations__item[_ngcontent-%COMP%]{border:1px solid #e9e9e9;padding:12px 16px;border-radius:10px;background:#fff}.integrations__item-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.integrations__item-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.integrations__item-enabled-tag[_ngcontent-%COMP%]{font-size:10px;color:#216435;padding:1px 8px;border-radius:8px;background:#c8f8d4}.integrations__item-icon[_ngcontent-%COMP%]{width:28px;height:28px}.integrations__item-connect[_ngcontent-%COMP%]{font-size:12px;border-radius:6px;border:1px solid #068e44;padding:6px 12px;color:#068e44}.integrations__item-connect[_ngcontent-%COMP%]:hover{background:#068e44;color:#f4f5f5}.integrations__item-connect-active[_ngcontent-%COMP%]{font-size:12px;border-radius:6px;background:#068e44;color:#f4f5f5;padding:6px 12px}.integrations__item-disconnect[_ngcontent-%COMP%]{font-size:12px;border-radius:6px;padding:6px 12px;color:#c57c7c;border:1px solid #c57c7c}.integrations__item-disconnect[_ngcontent-%COMP%]:hover{background:#f6e5e5}.integrations__item-title[_ngcontent-%COMP%]{font-size:14px;margin-top:12px!important;font-weight:500}.integrations__item-description[_ngcontent-%COMP%]{margin-top:4px!important;font-size:12px;color:#919191}"],changeDetection:0});let e=t;return e})();var pt=[{path:"",component:X,children:[{path:"",component:Y},{path:"spotify",loadChildren:()=>import("./chunk-VM4LMELA.js").then(e=>e.SpotifyModule),title:"Spotify | Kaiteki"},{path:"telegram",loadChildren:()=>import("./chunk-X5OIGLLG.js").then(e=>e.TelegramModule),title:"Telegram | Kaiteki"},{path:"github",loadChildren:()=>import("./chunk-6RAQXLM3.js").then(e=>e.GithubModule),title:"GitHub | Kaiteki"}]}],Z=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=b({type:t}),t.\u0275inj=_({imports:[F.forChild(pt),F]});let e=t;return e})();var Pt=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=b({type:t}),t.\u0275inj=_({imports:[U,q,Z]});let e=t;return e})();export{Pt as IntegrationsModule};
