import{a as Je}from"./chunk-T5JYALQ2.js";import"./chunk-JWTWT544.js";import{c as U}from"./chunk-FNRMV76R.js";import{a as ue}from"./chunk-AJFLJPRD.js";import{$ as ve,B as _e,E as P,F as H,G as Q,H as G,I as q,Ka as Oe,La as Fe,Ma as ke,Q as be,R as he,T as ge,W as Ce,Wa as Ie,X as Me,Xa as $e,Y as xe,Ya as je,Z as Y,Za as Ne,ab as Re,bb as Le,ca as we,cb as ze,da as ye,db as Ae,eb as Be,fb as He,gb as Qe,hb as Ge,ib as qe,jb as Ue,n as de,na as Te,ob as W,p as fe,pb as We,q as B,sa as Se,ta as Pe,v as X,va as Ee,wa as De,ya as Ve}from"./chunk-IDIRVXY3.js";import{Aa as h,F as K,Fb as x,Hb as me,I as te,Ib as I,Jb as $,K as O,Ka as T,Kb as r,Lb as o,Mb as f,N as ie,Nb as v,Ob as w,Qb as C,Tb as _,Vb as c,X as ne,Y as re,Yb as j,_ as oe,aa as ae,bc as N,cc as m,ec as u,f as V,fa as F,fb as s,fc as R,gb as M,jd as z,ld as A,md as pe,nc as D,o as J,oc as se,pa as g,qa as k,qd as ce,s as ee,vc as S,wc as L,xb as d,xc as le,za as b,zb as p}from"./chunk-TYBYM3PM.js";import"./chunk-REV7FFDQ.js";import"./chunk-MON7YFGF.js";function ot(e,t){if(e&1&&(r(0,"mat-option",6),m(1),o()),e&2){let a=t.$implicit;p("matTooltip",a)("value",a),s(),u(" ",a," ")}}var Ye=(()=>{let t=class t{constructor(i,n){this.router=i,this.route=n,this.filter=new T,this.destroy$=new V,this.views=["Table","Cards"],this.form=new xe({searchValue:new Y(""),view:new Y})}ngOnInit(){this.patchInitialFormValues(),this.trackFormValueChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}patchInitialFormValues(){let i=this.getQueryParameters();this.form.patchValue(i),this.filter.emit(i)}trackFormValueChanges(){this.form.valueChanges.pipe(te(800),ie(),oe(this.destroy$)).subscribe(i=>{let n={searchValue:i.searchValue??void 0,view:i.view??void 0};this.saveQueryParameters(n),this.filter.emit(n)})}saveQueryParameters(i){this.router.navigate([],{queryParams:be(i),queryParamsHandling:"merge"})}getQueryParameters(){let i={searchValue:"",view:this.views[0]},n=this.route.snapshot.queryParams;return he(n,i)}};t.\u0275fac=function(n){return new(n||t)(M(fe),M(de))},t.\u0275cmp=g({type:t,selectors:[["app-members-filter"]],outputs:{filter:"filter"},decls:19,vars:1,consts:[[1,"filter"],[1,"filter__fields",3,"formGroup"],["appearance","outline"],["matPrefix",""],["matInput","","type","text","formControlName","searchValue"],["formControlName","view"],[3,"matTooltip","value"]],template:function(n,l){n&1&&(r(0,"section",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),m(5,"Filters"),o()(),r(6,"form",1)(7,"mat-form-field",2)(8,"mat-label"),m(9,"Search"),o(),r(10,"mat-icon",3),m(11,"search"),o(),f(12,"input",4),o(),r(13,"mat-form-field",2)(14,"mat-label"),m(15,"View"),o(),r(16,"mat-select",5),I(17,ot,2,3,"mat-option",6,me),o()()()()()()),n&2&&(s(6),p("formGroup",l.form),s(11),$(l.views))},dependencies:[P,Ne,Ie,$e,je,De,Ee,Se,Pe,Oe,_e,Ve,ve,ge,Ce,Me,we,ye],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter[_ngcontent-%COMP%]{margin-top:22px}.filter__fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;align-items:start}"],changeDetection:0});let e=t;return e})();function lt(e,t){if(e&1){let a=C();r(0,"div",0)(1,"div",1)(2,"h1",2),m(3),o()(),r(4,"div",3)(5,"app-button",4),_("click",function(n){b(a);let l=c();return h(l.onAddNewClick(n))}),r(6,"p"),m(7,"Invite"),o()()()()}e&2&&(s(3),u("",t.name," Members"))}var Ze=(()=>{let t=class t{constructor(i,n){this.dialog=i,this.teamsService=n,this.currentTeam$=this.teamsService.currentTeam$}onAddNewClick(i){i.preventDefault(),this.dialog.open(Je,{minWidth:"30%"}).afterClosed().pipe(O(1)).subscribe()}};t.\u0275fac=function(n){return new(n||t)(M(Te),M(U))},t.\u0275cmp=g({type:t,selectors:[["app-members-toolbar"]],decls:2,vars:3,consts:[[1,"dashboard__toolbar"],[1,"dashboard__toolbar-left"],[1,"dashboard__toolbar-title"],[1,"dashboard__toolbar-right"],["icon","add",1,"dashboard__toolbar-item",3,"click"]],template:function(n,l){if(n&1&&(d(0,lt,8,1,"div",0),S(1,"async")),n&2){let y;x(0,(y=L(1,1,l.currentTeam$))?0:-1,y)}},dependencies:[W,A],styles:[".dashboard__toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;overflow-x:auto;overflow-y:hidden}.dashboard__toolbar-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.dashboard__toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}@media (max-width: 40em){.dashboard__toolbar-left[_ngcontent-%COMP%]{display:none}}.dashboard__toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.dashboard__toolbar-item[_ngcontent-%COMP%]{text-overflow:ellipsis;text-wrap:nowrap}"],changeDetection:0});let e=t;return e})();var ft=(e,t)=>t.id,_t=(e,t)=>({background:e,color:t}),ut=e=>[e];function bt(e,t){if(e&1){let a=C();r(0,"div",2),f(1,"ngx-avatars",3),r(2,"h3",4),m(3),o(),r(4,"span",5),m(5),o(),r(6,"div",6),m(7),o(),r(8,"div",7)(9,"app-button",8),m(10," Action "),o(),r(11,"mat-menu",null,0)(13,"button",9)(14,"mat-icon"),m(15,"person_outline"),o(),r(16,"span"),m(17,"View"),o()(),r(18,"button",10),_("click",function(){b(a);let n=c().$implicit,l=c();return h(l.onDeleteMember(n.id))}),r(19,"mat-icon"),m(20,"delete"),o(),r(21,"span"),m(22,"Remove"),o()()()()()}if(e&2){let a=N(12),i=c().$implicit,n=c();s(),j("src","api/v1/files/",i.avatarId,""),p("name",i.fullName),s(2),R("",i.firstname," ",i.lastname,""),s(2),u(" ",i.position," "),s(),p("ngStyle",se(10,_t,n.getPerformanceColor(i.performance)[1],n.getPerformanceColor(i.performance)[0])),s(),u(" ",i.performance,"% "),s(2),p("matMenuTriggerFor",a),s(4),p("routerLink",D(13,ut,i.id))}}function ht(e,t){if(e&1&&d(0,bt,23,15,"div",2),e&2){let a=t.$implicit;x(0,a?0:-1)}}var et=(()=>{let t=class t{constructor(){this.delete=new T,this.members=[]}onDeleteMember(i){this.delete.emit(i)}trackByTeamMembers(i,n){return n.id}getPerformanceColor(i){return i<=100&&i>=70?["#6d9f33","#F0F5EA"]:i<70&&i>=40?["#f4a40f","#FDF5E7"]:["#ef6a6b","#FDF0F0"]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=g({type:t,selectors:[["app-members-cards-view"]],inputs:{members:"members"},outputs:{delete:"delete"},decls:3,vars:0,consts:[["actionMenu","matMenu"],[1,"members__cards"],[1,"members__cards__item"],["size","80","bgColor","#64748B",3,"src","name"],[1,"members__cards__item-title"],[1,"members__cards__item-desc"],[1,"members__cards__item-performance",3,"ngStyle"],[1,"members__cards__item-bottom"],["variant","outline",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(n,l){n&1&&(r(0,"div",1),I(1,ht,1,1,null,null,ft),o()),n&2&&(s(),$(l.members))},dependencies:[z,W,P,Q,H,G,B,q],styles:[".members__cards[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));grid-template-rows:none}.members__cards__item[_ngcontent-%COMP%]{position:relative;padding:16px;height:fit-content;border-radius:10px;background:#fff;border:1px solid #e9e9e9;overflow:hidden;word-wrap:break-word;display:flex;flex-direction:column;align-items:center}.members__cards__item-bottom[_ngcontent-%COMP%]{width:100%;margin-top:18px}.members__cards__item-title[_ngcontent-%COMP%]{font-weight:500;margin-top:14px}.members__cards__item-performance[_ngcontent-%COMP%]{width:fit-content;padding:2px 6px;position:absolute;right:16px;top:12px;border-radius:4px;font-size:12px}.members__cards__item-desc[_ngcontent-%COMP%]{font-size:12px;color:#575757}"],changeDetection:0});let e=t;return e})();var Ct=e=>({color:e}),Mt=e=>[e];function xt(e,t){e&1&&(r(0,"th",13),m(1," Name "),o())}function vt(e,t){if(e&1&&(r(0,"td",14)(1,"div",15),f(2,"ngx-avatars",16),r(3,"p"),m(4),o()()()),e&2){let a=t.$implicit;s(2),j("src","api/v1/files/",a.avatarId,""),p("name",a.fullName),s(2),R("",a.firstname," ",a.lastname,"")}}function wt(e,t){e&1&&(r(0,"th",13),m(1," Position "),o())}function yt(e,t){if(e&1&&(r(0,"td",14),m(1),o()),e&2){let a=t.$implicit;s(),u(" ",a.position," ")}}function Tt(e,t){e&1&&(r(0,"th",13),m(1," Email "),o())}function St(e,t){if(e&1&&(r(0,"td",14),m(1),o()),e&2){let a=t.$implicit;s(),u(" ",a.email," ")}}function Pt(e,t){e&1&&(r(0,"th",13),m(1," Since "),o())}function Et(e,t){if(e&1&&(r(0,"td",14),m(1),S(2,"date"),o()),e&2){let a=t.$implicit;s(),u(" ",le(2,1,a.joinedDate,"EEEE, MMMM d")," ")}}function Dt(e,t){e&1&&(r(0,"th",13),m(1," Performance "),o())}function Vt(e,t){if(e&1&&(r(0,"td",14)(1,"p",17),m(2),o()()),e&2){let a=t.$implicit,i=c();s(),p("ngStyle",D(2,Ct,i.getPerformanceColor(a.performance))),s(),u(" ",a.performance,"% ")}}function Ot(e,t){e&1&&f(0,"th",13)}function Ft(e,t){if(e&1){let a=C();r(0,"td",14)(1,"button",18),_("click",function(n){b(a);let l=c();return h(l.onMoreClick(n))}),r(2,"mat-icon"),m(3,"more_horizont"),o()(),r(4,"mat-menu",null,0)(6,"button",19)(7,"mat-icon"),m(8,"person_outline"),o(),r(9,"span"),m(10,"View"),o()(),r(11,"button",20),_("click",function(){let n=b(a).$implicit,l=c();return h(l.onDeleteMember(n.id))}),r(12,"mat-icon"),m(13,"delete"),o(),r(14,"span"),m(15,"Remove"),o()()()()}if(e&2){let a=t.$implicit,i=N(5);s(),p("matMenuTriggerFor",i),s(5),p("routerLink",D(2,Mt,a.id))}}function kt(e,t){e&1&&f(0,"tr",21)}function It(e,t){e&1&&f(0,"tr",22)}var tt=(()=>{let t=class t{constructor(){this.delete=new T,this.members=[],this.displayedColumns=["name","position","email","entryDate","performance","actions"]}onDeleteMember(i){this.delete.emit(i)}onMoreClick(i){i.stopPropagation()}getPerformanceColor(i){return i>=70&&i<=100?"#6d9f33":i>=40&&i<70?"#f4a40f":"#ef6a6b"}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=g({type:t,selectors:[["app-members-table-view"]],inputs:{members:"members"},outputs:{delete:"delete"},decls:23,vars:3,consts:[["taskMoreMenu","matMenu"],[1,"members-table__wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["matColumnDef","email"],["matColumnDef","entryDate"],["matColumnDef","performance"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"members-table__name-avatar"],["size","30","bgColor","#64748B",3,"src","name"],[1,"members-table__performance",3,"ngStyle"],[3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,l){n&1&&(r(0,"div",1)(1,"table",2),f(2,"caption"),v(3,3),d(4,xt,2,0,"th",4)(5,vt,5,5,"td",5),w(),v(6,6),d(7,wt,2,0,"th",4)(8,yt,2,1,"td",5),w(),v(9,7),d(10,Tt,2,0,"th",4)(11,St,2,1,"td",5),w(),v(12,8),d(13,Pt,2,0,"th",4)(14,Et,3,4,"td",5),w(),v(15,9),d(16,Dt,2,0,"th",4)(17,Vt,3,4,"td",5),w(),v(18,10),d(19,Ot,1,0,"th",4)(20,Ft,16,4,"td",5),w(),d(21,kt,1,0,"tr",11)(22,It,1,0,"tr",12),o()()),n&2&&(s(),p("dataSource",l.members),s(20),p("matHeaderRowDef",l.displayedColumns),s(),p("matRowDefColumns",l.displayedColumns))},dependencies:[z,P,Q,H,G,Re,ze,Qe,Ae,Le,Ge,Be,He,qe,Ue,B,q,pe],styles:["[_nghost-%COMP%]     .mat-mdc-table{border:1px solid #e9e9e9;background:none}[_nghost-%COMP%]     .mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-header-cell{font-size:12px;text-transform:uppercase;color:#afafaf}[_nghost-%COMP%]     .mdc-data-table__cell, [_nghost-%COMP%]     .mdc-data-table__header-cell{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-row:hover .mat-mdc-cell{background:#f3f3f3}[_nghost-%COMP%]     .mat-mdc-table tbody, [_nghost-%COMP%]     .mat-mdc-table tfoot, [_nghost-%COMP%]     .mat-mdc-table thead, [_nghost-%COMP%]     .mat-mdc-cell, [_nghost-%COMP%]     .mat-mdc-footer-cell, [_nghost-%COMP%]     .mat-mdc-header-row, [_nghost-%COMP%]     .mat-mdc-row, [_nghost-%COMP%]     .mat-mdc-footer-row, [_nghost-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{background:none}.members-table__wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto}.members-table__name-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.members-table__name-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:none;width:26px;height:26px;border-radius:9999px;background:#afafaf}.members-table__name-avatar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600}.members-table__performance[_ngcontent-%COMP%]{font-weight:500}table[_ngcontent-%COMP%]{width:100%;border-radius:6px;background:#fff!important;padding:0 12px 12px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f8f8}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:160px;padding:14px}th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let e=t;return e})();function jt(e,t){if(e&1){let a=C();r(0,"app-members-table-view",4),_("delete",function(n){b(a);let l=c(2);return h(l.onDeleteMember(n))}),o()}if(e&2){let a=c();p("members",a)}}function Nt(e,t){if(e&1){let a=C();r(0,"app-members-cards-view",4),_("delete",function(n){b(a);let l=c(2);return h(l.onDeleteMember(n))}),o()}if(e&2){let a=c();p("members",a)}}function Rt(e,t){if(e&1){let a=C();r(0,"div",2),d(1,jt,1,1)(2,Nt,1,1),o(),r(3,"app-paginator",3),_("page",function(n){b(a);let l=c();return h(l.onPage(n))}),o()}if(e&2){let a,i=c();s(),x(1,(a=i.filter.view)==="Table"?1:a==="Cards"?2:-1),s(2),p("pagination",i.pagination)}}var it=(()=>{let t=class t{constructor(i,n){this.teamsService=i,this.toastService=n,this.refetchTeamMembersSubject=new V,this.refetchTeamMembers$=this.refetchTeamMembersSubject.asObservable(),this.filter={},this.pagination=Fe,this.teamMembers$=this.refetchTeamMembers$.pipe(ne([]),re(()=>this.loadTeamMembers()))}ngOnInit(){this.refetchTeamMembers()}ngOnDestroy(){this.refetchTeamMembersSubject.next(),this.refetchTeamMembersSubject.complete()}refetchTeamMembers(){this.refetchTeamMembersSubject.next()}loadTeamMembers(){let i={size:this.pagination.size,page:this.pagination.page};return this.teamsService.searchTeamMembers(i,this.filter).pipe(ae(n=>{this.pagination.page=n.number,this.pagination.size=n.size,this.pagination.totalElements=n.totalElements,this.pagination.totalPages=n.totalPages}),ee(n=>n.content),K(n=>(this.toastService.open("Failed to get team members"),J(()=>n))))}onFilter(i){this.filter=i,this.refetchTeamMembers()}onPage(i){this.pagination.size=i.size,this.pagination.page=i.page,this.refetchTeamMembers()}onDeleteMember(i){this.teamsService.deleteTeamMember(i).pipe(K(n=>(this.toastService.open("Failed to delete team member"),J(()=>n))),O(1)).subscribe(()=>{this.toastService.open("Successfully removed team member"),this.refetchTeamMembers()})}};t.\u0275fac=function(n){return new(n||t)(M(U),M(ue))},t.\u0275cmp=g({type:t,selectors:[["app-members-list"]],decls:5,vars:3,consts:[[1,"page","members"],[3,"filter"],[1,"members__content"],[3,"page","pagination"],[3,"delete","members"]],template:function(n,l){if(n&1&&(r(0,"section",0),f(1,"app-members-toolbar"),r(2,"app-members-filter",1),_("filter",function(rt){return l.onFilter(rt)}),o(),d(3,Rt,4,2),S(4,"async"),o()),n&2){let y;s(3),x(3,(y=L(4,1,l.teamMembers$))?3:-1,y)}},dependencies:[ke,Ze,Ye,et,tt,A],styles:[".members[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.members__content[_ngcontent-%COMP%]{flex:1;margin-top:22px}"],changeDetection:0});let e=t;return e})();var Lt=[{path:"",component:it}],nt=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=k({type:t}),t.\u0275inj=F({imports:[X.forChild(Lt),X]});let e=t;return e})();var $i=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=k({type:t}),t.\u0275inj=F({imports:[ce,We,nt]});let e=t;return e})();export{$i as MembersModule};
