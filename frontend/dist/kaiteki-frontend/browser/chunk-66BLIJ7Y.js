import{a as E,b as Ze}from"./chunk-PVLA5D7Z.js";import{a as ii}from"./chunk-3BUG7PFE.js";import{a as he,b as ti,c as ei}from"./chunk-A7FRXXMC.js";import{a as Oi}from"./chunk-UYMINATM.js";import{c as W}from"./chunk-YT2TPVYA.js";import{a as J}from"./chunk-AT67HQB2.js";import{$a as se,B as dt,C as U,E as B,F as Wt,G as Kt,Ga as He,H as Qt,I as Yt,J as Be,Ja as xt,K as Ae,L as Xt,M as Jt,N as Zt,O as Se,Oa as te,P as Re,Pa as ee,Q as je,Qa as Et,Ra as Ge,S as K,Sa as We,Ta as Ke,U as O,Ua as Qe,V as Q,Va as ie,W as Z,Wa as ne,X as tt,Xa as oe,Y as b,Ya as ae,Za as re,_ as et,aa as Ue,ab as le,b as ze,ba as it,bb as me,ca as nt,cb as ce,db as pe,eb as de,fb as ue,gb as fe,hb as _e,ib as ge,ka as ut,la as Tt,ma as yt,n as Gt,na as ft,oa as _t,p as Le,pa as gt,pb as Ye,q as pt,qa as wt,qb as Xe,ra as ht,rb as Je,sa as qe,ta as Dt,ua as ot,v as be,va as Ct,xa as at}from"./chunk-TX7ZHAEW.js";import"./chunk-4N6BO7AP.js";import{Aa as v,Bb as Fe,Da as bt,F as I,Fb as h,Gb as Ve,Hb as Mt,I as Pe,Ib as y,Jb as w,K as F,Ka as kt,Kb as a,Lb as o,Mb as d,N as Rt,Nb as $,O as Ie,Ob as z,Oc as mt,Qb as D,Tb as x,Vb as _,X as Oe,Y as V,_ as jt,bc as q,cc as r,dc as A,ea as Ut,ec as g,f as st,fa as qt,fb as m,fc as Ne,gb as f,ja as Vt,jd as ct,k as lt,ld as G,mc as Nt,md as X,n as Ee,nc as R,o as M,pa as C,qa as Ht,qd as $e,sb as St,vc as S,wc as L,xb as u,xc as j,za as k,zb as c}from"./chunk-SMBTFBOT.js";import"./chunk-REV7FFDQ.js";import{a as Bt,b as At,f as Ii}from"./chunk-MON7YFGF.js";var ni=(()=>{let e=class e{constructor(i){this.httpClient=i,this.baseUrl="/api/v1/tasks"}getTaskById(i){return this.httpClient.get(`${this.baseUrl}/${i}`)}deleteTaskById(i){return this.httpClient.delete(`${this.baseUrl}/${i}`)}getStatusesWithTasks(i,n){let s=Se(n);return s=s.set("teamId",i),s=s.set("includeTasks",!0),this.httpClient.get(`${this.baseUrl}/statuses`,{params:s})}getStatusesWithoutTasks(i){return this.httpClient.get(`${this.baseUrl}/statuses`,{params:{teamId:i,includeTasks:!1}})}deleteStatus(i,n){return this.httpClient.delete(`${this.baseUrl}/statuses/${n}`,{params:{teamId:i}})}getCustomizeStatuses(i){return this.httpClient.get(`${this.baseUrl}/statuses/customize`,{params:{teamId:i}})}saveCustomizeStatuses(i,n){return this.httpClient.put(`${this.baseUrl}/statuses/customize`,n,{params:{teamId:i}})}createTask(i,n){return this.httpClient.post(`${this.baseUrl}`,n,{params:{teamId:i}})}updateTask(i,n){return this.httpClient.put(`${this.baseUrl}/${i}`,n)}getTaskNotes(i){return this.httpClient.get(`${this.baseUrl}/${i}/notes`)}createTaskNote(i,n,s){return this.httpClient.post(`${this.baseUrl}/${i}/notes`,s,{params:{teamId:n}})}deleteTaskNote(i){return this.httpClient.delete(`${this.baseUrl}/notes/${i}`)}exportTasks(i,n){let s=At(Bt({},n),{teamId:i});return this.httpClient.get(`${this.baseUrl}/export`,{params:Se(s),responseType:"blob"})}};e.\u0275fac=function(n){return new(n||e)(Vt(ze))},e.\u0275prov=Ut({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var N=(()=>{let e=class e{constructor(i,n){this.teamsService=i,this.tasksApiService=n,this.refetchTasksSubject=new st,this.refetchTasks$=this.refetchTasksSubject.asObservable()}deleteTaskById(i){return this.tasksApiService.deleteTaskById(i)}getStatusesWithTasks(i){return this.teamsService.currentTeam$.pipe(V(n=>n?this.tasksApiService.getStatusesWithTasks(n.id,i):M(()=>Error("No current team"))))}getStatusesWithoutTasks(){return this.teamsService.currentTeam$.pipe(V(i=>i?this.tasksApiService.getStatusesWithoutTasks(i.id):M(()=>Error("No current team"))))}getCustomizeStatuses(){return this.teamsService.currentTeam$.pipe(V(i=>i?this.tasksApiService.getCustomizeStatuses(i.id):M(()=>Error("No current team"))))}saveCustomizeStatuses(i){return this.teamsService.currentTeam$.pipe(V(n=>n?this.tasksApiService.saveCustomizeStatuses(n.id,i):M(()=>Error("No current team"))),I(n=>M(()=>n)))}createTask(i){return this.teamsService.currentTeam$.pipe(V(n=>n?this.tasksApiService.createTask(n.id,i):M(()=>Error("No current team"))),I(n=>M(()=>n)))}getTaskById(i){return this.tasksApiService.getTaskById(i)}updateTask(i,n){return this.tasksApiService.updateTask(i,n)}deleteStatus(i){return this.teamsService.currentTeam$.pipe(V(n=>n?this.tasksApiService.deleteStatus(n.id,i):M(()=>Error("No current team"))),I(n=>M(()=>n)))}getTaskNotes(i){return this.tasksApiService.getTaskNotes(i)}deleteTaskNote(i){return this.tasksApiService.deleteTaskNote(i)}createTaskNote(i,n){return this.teamsService.currentTeam$.pipe(V(s=>s?this.tasksApiService.createTaskNote(i,s.id,n):M(()=>Error("No current team"))),I(s=>M(()=>s)))}exportTasks(i){return this.teamsService.currentTeam$.pipe(V(n=>n?this.tasksApiService.exportTasks(n.id,i):M(()=>Error("No current team"))),I(n=>M(()=>n)))}refetchTasks(){this.refetchTasksSubject.next()}};e.\u0275fac=function(n){return new(n||e)(Vt(W),Vt(ni))},e.\u0275prov=Ut({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oi=(t,e)=>e.id;function Vi(t,e){if(t&1&&(a(0,"mat-option",11),r(1),o()),t&2){let l=e.$implicit;c("matTooltip",l.name)("value",l.id),m(),g(" ",l.name," ")}}function Ni(t,e){if(t&1&&(a(0,"mat-option",11),r(1),o()),t&2){let l=e.$implicit;c("matTooltip",l.fullName)("value",l.id),m(),g(" ",l.fullName," ")}}var ke=(()=>{let e=class e{constructor(i,n,s,p){this.dialogRef=i,this.teamsSevice=n,this.tasksService=s,this.data=p,this.form=this.createForm(),this.executors$=this.teamsSevice.getAllTeamMembers(),this.statuses$=this.tasksService.getStatusesWithoutTasks(),this.quillConfig={history:!0,toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link"],["clean"]]}},this.patchInitialValues()}onBackClick(){this.dialogRef.close()}onSubmit(){let i=this.form.getRawValue(),n={title:i.title,content:i.content,tag:i.tag,description:i.description,endDate:i.endDate,startDate:i.startDate,priority:i.priority,statusId:i.statusId,executorId:i.executorId};this.dialogRef.close(n)}patchInitialValues(){this.form.patchValue({statusId:this.data.statusId})}createForm(){return new tt({title:new b("",[O.required]),description:new b("",[O.required]),tag:new b("",[O.required]),content:new b("",[]),statusId:new b(null,[O.required]),priority:new b(E.MEDIUM,[O.required]),executorId:new b(null,[]),startDate:new b(new Date),endDate:new b(null,[])})}};e.\u0275fac=function(n){return new(n||e)(f(ut),f(W),f(N),f(Tt))},e.\u0275cmp=C({type:e,selectors:[["app-create-task-dialog"]],decls:65,vars:12,consts:[["startDeadlinePicker",""],["endDeadlinePicker",""],["mat-dialog-title","",1,"ctask__title"],["mat-dialog-content","",1,"ctask"],[1,"ctask__form",3,"formGroup"],["appearance","outline"],["formControlName","title","matInput","","placeholder","Enter a title"],["cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5","formControlName","description","matInput","","placeholder","Write out small description"],["formControlName","content","theme","snow","placeholder","Main body (eg. steps, specifications and etc.)",1,"quill__editor",3,"modules"],[1,"row"],["formControlName","statusId"],[3,"matTooltip","value"],["formControlName","tag","matInput","","placeholder","Specify tag for task (eg. Development, Testing and etc.)"],["formControlName","priority"],["value","HIGH"],["value","MEDIUM"],["value","LOW"],["formControlName","executorId"],["matTooltip","Unassgined",3,"value"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","endDate",3,"matDatepicker"],["align","end"],["mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"click","disabled"]],template:function(n,s){if(n&1){let p=D();a(0,"h4",2),r(1,` Create new task
`),o(),a(2,"section",3)(3,"form",4)(4,"mat-form-field",5)(5,"mat-label"),r(6,"Title"),o(),d(7,"input",6),o(),a(8,"mat-form-field",5)(9,"mat-label"),r(10,"Description"),o(),d(11,"textarea",7),o(),d(12,"quill-editor",8),a(13,"div",9)(14,"mat-form-field",5)(15,"mat-label"),r(16,"Status"),o(),a(17,"mat-select",10),y(18,Vi,2,3,"mat-option",11,oi),S(20,"async"),o()(),a(21,"mat-form-field",5)(22,"mat-label"),r(23,"Tag"),o(),d(24,"input",12),o()(),a(25,"div",9)(26,"mat-form-field",5)(27,"mat-label"),r(28,"Priority"),o(),a(29,"mat-select",13)(30,"mat-option",14),r(31," High "),o(),a(32,"mat-option",15),r(33," Medium "),o(),a(34,"mat-option",16),r(35," Low "),o()()(),a(36,"mat-form-field",5)(37,"mat-label"),r(38,"Executor"),o(),a(39,"mat-select",17)(40,"mat-option",18),r(41," Unassgined "),o(),y(42,Ni,2,3,"mat-option",11,oi),S(44,"async"),o()()(),a(45,"div",9)(46,"mat-form-field",5)(47,"mat-label"),r(48,"Deadline Start"),o(),d(49,"input",19)(50,"mat-datepicker-toggle",20)(51,"mat-datepicker",null,0),o(),a(53,"mat-form-field",5)(54,"mat-label"),r(55,"Deadline End"),o(),d(56,"input",21)(57,"mat-datepicker-toggle",20)(58,"mat-datepicker",null,1),o()()()(),a(60,"mat-dialog-actions",22)(61,"button",23),x("click",function(){return k(p),v(s.onBackClick())}),r(62," Back "),o(),a(63,"button",24),x("click",function(){return k(p),v(s.onSubmit())}),r(64," Create "),o()()}if(n&2){let p=q(52),T=q(59);m(3),c("formGroup",s.form),m(9),c("modules",s.quillConfig),m(6),w(L(20,8,s.statuses$)),m(22),c("value",null),m(2),w(L(44,10,s.executors$)),m(7),c("matDatepicker",p),m(),c("for",p),m(6),c("matDatepicker",T),m(),c("for",T),m(6),c("disabled",s.form.invalid)}},dependencies:[U,Ct,ot,ht,Dt,wt,xt,dt,te,ee,Et,at,ft,gt,_t,et,K,Q,Z,it,nt,he,G],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ql-toolbar.ql-snow{border-radius:6px 6px 0 0;background:#fff;padding:16px;border:1px solid #8e8e94}[_nghost-%COMP%]     .ql-editor{padding:16px;min-height:300px}[_nghost-%COMP%]     .ql-editor p{color:#242424}[_nghost-%COMP%]     .ql-editor.ql-blank:before{font-style:normal}[_nghost-%COMP%]     .ql-container.ql-snow{background:#fff;border-radius:0 0 6px 6px;border:1px solid #8e8e94}.ctask__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.ctask__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:22px}.ctask__form-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.row[_ngcontent-%COMP%]{display:flex;gap:22px}.quill__editor[_ngcontent-%COMP%]{width:100%;margin-bottom:1.6rem}"],changeDetection:0});let t=e;return t})();var zi=["status",""],Li=(t,e)=>e.hexCode,li=t=>({background:t});function Bi(t,e){t&1&&d(0,"div",11)}function Ai(t,e){if(t&1&&(a(0,"div")(1,"button",12)(2,"mat-icon"),r(3,"more_horiz"),o()()()),t&2){_();let l=q(15);m(),c("matMenuTriggerFor",l)}}function Ri(t,e){if(t&1){let l=D();a(0,"button",13),x("click",function(n){let s=k(l).$implicit,p=_();return v(p.onSelectColor(n,s.hexCode))}),r(1),o()}if(t&2){let l=e.$implicit;c("ngStyle",R(2,li,l.hexCode)),m(),g(" #",l.hexCode," ")}}var mi=(()=>{let e=class e{constructor(){this.unsubscribe$=new st,this.draggable=!1,this.showMoreButton=!1,this.statusChange=new kt,this.statusDelete=new kt,this.statusNameFormControl=new b("",[O.required]),this.colors=[{label:"Gray",hexCode:"#5B738B"},{label:"Red",hexCode:"#EE3939"},{label:"Orange",hexCode:"#E76500"},{label:"Green",hexCode:"#36A41D"},{label:"Teal",hexCode:"#049F9A"},{label:"Blue",hexCode:"#1B90FF"},{label:"Purple",hexCode:"#7858FF"},{label:"Pink",hexCode:"#F31DED"},{label:"Raspberry",hexCode:"#FA4F96"}]}ngOnInit(){this.statusNameFormControl.patchValue(this.status.name),this.statusNameFormControl.valueChanges.pipe(Rt(),jt(this.unsubscribe$)).subscribe(i=>{i&&(this.status.name=i,this.statusChange.emit(this.status))})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onSelectColor(i,n){i.preventDefault(),this.status.color=n,this.statusChange.emit(this.status)}onDeleteClick(i){i.preventDefault(),this.statusDelete.emit(this.status)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C({type:e,selectors:[["app-customize-status-item","status",""]],inputs:{status:"status",draggable:"draggable",showMoreButton:"showMoreButton"},outputs:{statusChange:"statusChange",statusDelete:"statusDelete"},attrs:zi,decls:21,vars:9,consts:[["colorPicker","matMenu"],["editMenu","matMenu"],["cdkDrag","",1,"sc__box",3,"cdkDragDisabled"],["cdkDragHandle","",1,"sc__drag-handler"],["class","sc__placeholder",4,"cdkDragPlaceholder"],[1,"sc__box-content"],[1,"sc__box-header"],[1,"sc__status-color",3,"ngStyle","matMenuTriggerFor"],["type","text",3,"formControl"],["mat-menu-item","",3,"ngStyle"],["mat-menu-item","",3,"click"],[1,"sc__placeholder"],[1,"sc__box-edit-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click","ngStyle"]],template:function(n,s){if(n&1){let p=D();a(0,"div",2)(1,"div",3)(2,"mat-icon"),r(3,"drag_indicator"),o()(),u(4,Bi,1,0,"div",4),a(5,"div",5)(6,"div",6),d(7,"span",7)(8,"input",8),o(),u(9,Ai,4,1,"div"),o()(),a(10,"mat-menu",null,0),y(12,Ri,2,4,"button",9,Li),o(),a(14,"mat-menu",null,1)(16,"button",10),x("click",function(H){return k(p),v(s.onDeleteClick(H))}),a(17,"mat-icon"),r(18,"delete"),o(),a(19,"p"),r(20,"Delete"),o()()()}if(n&2){let p=q(11);c("cdkDragDisabled",!s.draggable),m(),Fe("hidden",!s.draggable),m(6),c("ngStyle",R(7,li,s.status.color))("matMenuTriggerFor",p),m(),c("formControl",s.statusNameFormControl),m(),h(9,s.showMoreButton?9:-1),m(3),w(s.colors)}},dependencies:[ct,B,Kt,Wt,Qt,K,Q,Ue,Xt,Ae,Zt],styles:[".sc__box[_ngcontent-%COMP%]{width:100%;padding:12px 10px;display:flex;align-items:center;gap:8px;border-radius:4px;border:1px solid #ccc;color:#242424}.sc__box-content[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.sc__box-edit-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sc__box-edit-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#a3a3a3;font-size:20px;width:20px;height:20px}.sc__box-header[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:8px}.sc__box-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.sc__status-color[_ngcontent-%COMP%]{min-width:14px;min-height:14px;border-radius:2px;background:#d0d6ee;cursor:pointer}.sc__placeholder[_ngcontent-%COMP%]{background:#e7e7e7;border:dotted 3px #c5c5c5;min-height:50px;transition:transform .25s cubic-bezier(0,0,.2,1);border-radius:4px}.sc__drag-handler[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:move}.sc__drag-handler[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px;color:#ccc}.hidden[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0});let t=e;return t})();function Ui(t,e){if(t&1&&d(0,"app-customize-status-item",4),t&2){let l=_(2);c("status",l.openStatus)("draggable",!1)}}function qi(t,e){if(t&1){let l=D();a(0,"app-customize-status-item",12),x("statusDelete",function(n){k(l);let s=_(3);return v(s.onDeleteStatus(n))})("statusChange",function(n){k(l);let s=_(3);return v(s.onChangeStatus(n))}),o()}if(t&2){let l=e.$implicit;c("status",l)("draggable",!0)("showMoreButton",!0)}}function Hi(t,e){if(t&1){let l=D();a(0,"div",10),x("cdkDropListDropped",function(n){k(l);let s=_(2);return v(s.drop(n))}),y(1,qi,1,3,"app-customize-status-item",11,Mt),o()}if(t&2){let l=_(2);m(),w(l.statuses)}}function Gi(t,e){}function Wi(t,e){if(t&1&&d(0,"app-customize-status-item",4),t&2){let l=_(2);c("status",l.doneStatus)("draggable",!1)}}function Ki(t,e){if(t&1){let l=D();a(0,"section",1)(1,"div",3)(2,"h5"),r(3,"Open Status"),o(),u(4,Ui,1,2,"app-customize-status-item",4),o(),a(5,"div",5)(6,"h5"),r(7,"Active statuses"),o(),u(8,Hi,3,0,"div",6)(9,Gi,0,0),o(),a(10,"div",7)(11,"button",8),x("click",function(){k(l);let n=_();return v(n.onAddStatusClick())}),r(12," + Add status "),o()(),a(13,"div",9)(14,"h5"),r(15,"Done Status"),o(),u(16,Wi,1,2,"app-customize-status-item",4),o()()}if(t&2){let l=_();m(4),h(4,l.openStatus?4:-1),m(4),h(8,l.statuses.length>0?8:9),m(8),h(16,l.doneStatus?16:-1)}}function Qi(t,e){if(t&1){let l=D();a(0,"mat-dialog-actions",2)(1,"button",8),x("click",function(){k(l);let n=_();return v(n.onBackClick())}),r(2," Back "),o(),a(3,"button",13),x("click",function(){k(l);let n=_();return v(n.onSubmit())}),r(4," Save "),o()()}}var ci=(()=>{let e=class e{constructor(i,n,s,p){this.dialogRef=i,this.cd=n,this.tasksService=s,this.data=p,this.openStatus=null,this.doneStatus=null,this.statuses=[]}ngOnInit(){this.tasksService.getCustomizeStatuses().pipe(F(1)).subscribe(i=>{this.openStatus=i.openStatus,this.doneStatus=i.doneStatus,this.statuses=i.regularStatuses,this.cd.markForCheck()})}onBackClick(){this.dialogRef.close()}onSubmit(){let i=this.statuses.map((s,p)=>(s.order=p+2,s)),n=At(Bt({},this.doneStatus),{order:i.length+2});this.dialogRef.close([this.openStatus,...i,n])}drop(i){Yt(this.statuses,i.previousIndex,i.currentIndex)}onDeleteStatus(i){let n=null;i.id?n=this.statuses.findIndex(s=>s.id===i.id):n=this.statuses.findIndex(s=>s.name===i.name&&s.color===i.color),n!==null&&(i.id&&this.tasksService.deleteStatus(i.id).pipe(F(1)).subscribe(),this.statuses.splice(n,1))}onChangeStatus(i){let n=this.findStatus(i);n&&(n.color=i.color,n.name=i.name)}findStatus(i){return this.statuses.find(n=>i.id&&n.id===i.id||n.name===i.name&&n.color===i.color)}onAddStatusClick(){this.statuses.push({name:"New Status",color:"#5B738B",type:Ze.REGULAR})}get invalid(){return!this.openStatus||!this.doneStatus}};e.\u0275fac=function(n){return new(n||e)(f(ut),f(mt),f(N),f(Tt))},e.\u0275cmp=C({type:e,selectors:[["app-customize-dialog"]],decls:4,vars:2,consts:[["mat-dialog-title","",1,"sc__title"],["mat-dialog-content","",1,"sc"],["align","end"],[1,"sc__open"],[3,"status","draggable"],[1,"sc__statuses"],["cdkDropList","",1,"sc__list"],[1,"sc__add-status"],["mat-stroked-button","",3,"click"],[1,"sc__closed"],["cdkDropList","",1,"sc__list",3,"cdkDropListDropped"],[3,"status","draggable","showMoreButton"],[3,"statusDelete","statusChange","status","draggable","showMoreButton"],["type","submit","mat-flat-button","","color","primary",3,"click"]],template:function(n,s){n&1&&(a(0,"h4",0),r(1,` Customize statuses
`),o(),u(2,Ki,17,3,"section",1)(3,Qi,5,0,"mat-dialog-actions",2)),n&2&&(m(2),h(2,s.invalid?-1:2),m(),h(3,s.invalid?-1:3))},dependencies:[U,ft,gt,_t,Jt,mi],styles:["[_nghost-%COMP%]     mat-dialog-actions{padding:24px}.sc__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.sc__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-height:60px;overflow-y:auto}.sc__drag-handler[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:move}.sc__drag-handler[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px;color:#ccc}.sc__box[_ngcontent-%COMP%]{padding:12px 10px;display:flex;align-items:center;gap:8px;border-radius:4px;border:1px solid #ccc;color:#242424}.sc__box-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.sc__toolbar[_ngcontent-%COMP%]{margin-top:22px;display:flex;align-items:center;gap:8px}.sc__placeholder[_ngcontent-%COMP%]{background:#e7e7e7;border:dotted 3px #c5c5c5;min-height:50px;transition:transform .25s cubic-bezier(0,0,.2,1);border-radius:4px}.sc__status-color[_ngcontent-%COMP%]{min-width:14px;min-height:14px;border-radius:2px;background:#d0d6ee;cursor:pointer}.sc__closed[_ngcontent-%COMP%], .sc__statuses[_ngcontent-%COMP%]{margin-top:1rem}.sc__add-status[_ngcontent-%COMP%]{margin-top:.5rem}h5[_ngcontent-%COMP%]{margin-bottom:6px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0});let t=e;return t})();var pi=(t,e)=>e.id;function Yi(t,e){if(t&1&&(a(0,"mat-option",11),r(1),o()),t&2){let l=e.$implicit;c("matTooltip",l.name)("value",l.id),m(),g(" ",l.name," ")}}function Xi(t,e){if(t&1&&(a(0,"mat-option",11),r(1),o()),t&2){let l=e.$implicit;c("matTooltip",l.fullName)("value",l.id),m(),g(" ",l.fullName," ")}}var di=(()=>{let e=class e{constructor(i,n,s,p){this.dialogRef=i,this.teamsService=n,this.tasksService=s,this.data=p,this.form=this.createForm(),this.executors$=this.teamsService.getAllTeamMembers(),this.statuses$=this.tasksService.getStatusesWithoutTasks(),this.quillConfig={history:!0,toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link"],["clean"]]}},this.patchExistingValues()}onBackClick(){this.dialogRef.close()}onSubmit(){let i=this.form.getRawValue(),n={title:i.title,content:i.content,tag:i.tag,description:i.description,endDate:i.endDate,startDate:i.startDate,priority:i.priority,statusId:i.statusId,executorId:i.executorId};this.dialogRef.close(n)}patchExistingValues(){let i=this.data.task;this.form.patchValue({title:i.title,description:i.description,tag:i.tag,content:i.content,statusId:i.status.id,priority:i.priority,executorId:i.executorMember?.id,startDate:i.startDate,endDate:i.endDate})}createForm(){return new tt({title:new b("",[O.required]),description:new b("",[O.required]),tag:new b("",[O.required]),content:new b("",[]),statusId:new b(null,[O.required]),priority:new b(E.MEDIUM,[O.required]),executorId:new b(null,[]),startDate:new b(new Date),endDate:new b(null,[])})}};e.\u0275fac=function(n){return new(n||e)(f(ut),f(W),f(N),f(Tt))},e.\u0275cmp=C({type:e,selectors:[["app-update-task-dialog"]],decls:65,vars:13,consts:[["startDeadlinePicker",""],["endDeadlinePicker",""],["mat-dialog-title","",1,"utask__title"],["mat-dialog-content","",1,"utask"],[1,"utask__form",3,"formGroup"],["appearance","outline"],["formControlName","title","matInput","","placeholder","Enter a title"],["cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5","formControlName","description","matInput","","placeholder","Write out small description"],["formControlName","content","theme","snow","placeholder","Main body (eg. steps, specifications and etc.)",1,"quill__editor",3,"modules"],[1,"row"],["formControlName","statusId"],[3,"matTooltip","value"],["formControlName","tag","matInput","","placeholder","Specify tag for task (eg. Development, Testing and etc.)"],["formControlName","priority"],["value","HIGH"],["value","MEDIUM"],["value","LOW"],["formControlName","executorId"],["matTooltip","Unassgined",3,"value"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","endDate",3,"matDatepicker"],["align","end"],["mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"click","disabled"]],template:function(n,s){if(n&1){let p=D();a(0,"h4",2),r(1),o(),a(2,"section",3)(3,"form",4)(4,"mat-form-field",5)(5,"mat-label"),r(6,"Title"),o(),d(7,"input",6),o(),a(8,"mat-form-field",5)(9,"mat-label"),r(10,"Description"),o(),d(11,"textarea",7),o(),d(12,"quill-editor",8),a(13,"div",9)(14,"mat-form-field",5)(15,"mat-label"),r(16,"Status"),o(),a(17,"mat-select",10),y(18,Yi,2,3,"mat-option",11,pi),S(20,"async"),o()(),a(21,"mat-form-field",5)(22,"mat-label"),r(23,"Tag"),o(),d(24,"input",12),o()(),a(25,"div",9)(26,"mat-form-field",5)(27,"mat-label"),r(28,"Priority"),o(),a(29,"mat-select",13)(30,"mat-option",14),r(31," High "),o(),a(32,"mat-option",15),r(33," Medium "),o(),a(34,"mat-option",16),r(35," Low "),o()()(),a(36,"mat-form-field",5)(37,"mat-label"),r(38,"Executor"),o(),a(39,"mat-select",17)(40,"mat-option",18),r(41," Unassgined "),o(),y(42,Xi,2,3,"mat-option",11,pi),S(44,"async"),o()()(),a(45,"div",9)(46,"mat-form-field",5)(47,"mat-label"),r(48,"Deadline Start"),o(),d(49,"input",19)(50,"mat-datepicker-toggle",20)(51,"mat-datepicker",null,0),o(),a(53,"mat-form-field",5)(54,"mat-label"),r(55,"Deadline End"),o(),d(56,"input",21)(57,"mat-datepicker-toggle",20)(58,"mat-datepicker",null,1),o()()()(),a(60,"mat-dialog-actions",22)(61,"button",23),x("click",function(){return k(p),v(s.onBackClick())}),r(62," Back "),o(),a(63,"button",24),x("click",function(){return k(p),v(s.onSubmit())}),r(64," Create "),o()()}if(n&2){let p=q(52),T=q(59);m(),g(" Update Task #",s.data.task.id,`
`),m(2),c("formGroup",s.form),m(9),c("modules",s.quillConfig),m(6),w(L(20,9,s.statuses$)),m(22),c("value",null),m(2),w(L(44,11,s.executors$)),m(7),c("matDatepicker",p),m(),c("for",p),m(6),c("matDatepicker",T),m(),c("for",T),m(6),c("disabled",s.form.invalid)}},dependencies:[U,Ct,ot,ht,Dt,wt,xt,dt,te,ee,Et,at,ft,gt,_t,et,K,Q,Z,it,nt,he,G],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ql-toolbar.ql-snow{border-radius:6px 6px 0 0;background:#fff;padding:16px;border:1px solid #8e8e94}[_nghost-%COMP%]     .ql-editor{padding:16px;min-height:300px}[_nghost-%COMP%]     .ql-editor p{color:#242424}[_nghost-%COMP%]     .ql-editor.ql-blank:before{font-style:normal}[_nghost-%COMP%]     .ql-container.ql-snow{background:#fff;border-radius:0 0 6px 6px;border:1px solid #8e8e94}.utask__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.utask__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:22px}.utask__form-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.row[_ngcontent-%COMP%]{display:flex;gap:22px}.quill__editor[_ngcontent-%COMP%]{width:100%;margin-bottom:1.6rem}"],changeDetection:0});let t=e;return t})();function ui(t){switch(t){case E.HIGH:return"High";case E.MEDIUM:return"Medium";case E.LOW:return"Low"}}var Ji=["task",""];function Zi(t,e){if(t&1&&(a(0,"p",5),r(1),S(2,"date"),o()),t&2){let l=_();m(),g(" ",j(2,1,l.task.endDate,"MMM d, y,")," ")}}function tn(t,e){t&1&&(a(0,"p",5),r(1,"Unset"),o())}var fi=(()=>{let e=class e{get getPriority(){return ui(this.task.priority)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C({type:e,selectors:[["app-task-details-sidebar","task",""]],inputs:{task:"task"},attrs:Ji,decls:42,vars:11,consts:[[1,"sidebar"],[1,"sidebar__title"],[1,"sidebar__details"],[1,"sidebar__details-item"],[1,"sidebar__details-item-label"],[1,"sidebar__details-item-value"],["mat-stroked-button","",1,"sidebar__attached"]],template:function(n,s){if(n&1&&(a(0,"aside",0)(1,"h5",1),r(2,"Details"),o(),a(3,"div",2)(4,"div",3)(5,"p",4),r(6,"Task Number:"),o(),a(7,"p",5),r(8),o()(),a(9,"div",3)(10,"p",4),r(11,"Status:"),o(),a(12,"p",5),r(13),o()(),a(14,"div",3)(15,"p",4),r(16,"Tag:"),o(),a(17,"p",5),r(18),o()(),a(19,"div",3)(20,"p",4),r(21,"Priority:"),o(),a(22,"p",5),r(23),o()(),a(24,"div",3)(25,"p",4),r(26,"Executor:"),o(),a(27,"p",5),r(28),o()(),a(29,"div",3)(30,"p",4),r(31,"Star date:"),o(),a(32,"p",5),r(33),S(34,"date"),o()(),a(35,"div",3)(36,"p",4),r(37,"End date:"),o(),u(38,Zi,3,4,"p",5)(39,tn,2,0,"p",5),o()(),a(40,"button",6),r(41," Attached files "),o()()),n&2){let p;m(8),g("Task #",s.task.id,""),m(5),A(s.task.status.name),m(5),A(s.task.tag),m(5),A(s.getPriority),m(5),g(" ",(p=s.task.executorMember==null?null:s.task.executorMember.fullName)!==null&&p!==void 0?p:"Unassigned"," "),m(5),g(" ",j(34,8,s.task.startDate,"MMM d, y,")," "),m(5),h(38,s.task.endDate?38:-1),m(),h(39,s.task.endDate?-1:39)}},dependencies:[U,X],styles:[".sidebar[_ngcontent-%COMP%]{position:sticky;top:0;left:0;right:0;min-width:300px;background:#fff;border-radius:8px;padding:22px}.sidebar__title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.sidebar__details[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}.sidebar__details-item-label[_ngcontent-%COMP%]{font-size:12px;color:#8d8d8d}.sidebar__attached[_ngcontent-%COMP%]{margin-top:1rem;width:100%}"],changeDetection:0});let t=e;return t})();var nn=["task",""],on=t=>[t],Ot=(()=>{let e=class e{constructor(i,n,s){this.dialog=i,this.tasksService=n,this.toastService=s}onEditClick(i){i.stopPropagation(),this.dialog.open(di,{minWidth:"60%",data:{task:this.task}}).afterClosed().pipe(V(s=>s?this.tasksService.updateTask(this.task.id,s):lt),I(s=>(this.toastService.error("Failed to update task"),M(()=>s))),F(1)).subscribe(()=>{this.toastService.open("Successfully updated task"),this.tasksService.refetchTasks()})}onDeleteClick(i){i.stopPropagation(),this.tasksService.deleteTaskById(this.task.id).pipe(I(n=>(this.toastService.error("Failed to delete task"),M(()=>n))),F(1)).subscribe(()=>{this.toastService.open("Successfully deleted a task"),this.tasksService.refetchTasks()})}onMoreButtonClick(i){i.stopPropagation()}};e.\u0275fac=function(n){return new(n||e)(f(yt),f(N),f(J))},e.\u0275cmp=C({type:e,selectors:[["app-task-more-menu","task",""]],inputs:{task:"task"},attrs:nn,decls:20,vars:4,consts:[["viewsMenu","matMenu"],[1,"task-more-button",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(n,s){if(n&1){let p=D();a(0,"button",1),x("click",function(H){return k(p),v(s.onMoreButtonClick(H))}),a(1,"mat-icon"),r(2,"more_vert"),o()(),a(3,"mat-menu",null,0)(5,"button",2)(6,"mat-icon"),r(7,"remove_red_eye"),o(),a(8,"span"),r(9,"View"),o()(),a(10,"button",3),x("click",function(H){return k(p),v(s.onEditClick(H))}),a(11,"mat-icon"),r(12,"edit"),o(),a(13,"span"),r(14,"Edit"),o()(),a(15,"button",3),x("click",function(H){return k(p),v(s.onDeleteClick(H))}),a(16,"mat-icon"),r(17,"delete"),o(),a(18,"span"),r(19,"Delete"),o()()()}if(n&2){let p=q(4);c("matMenuTriggerFor",p),m(5),c("routerLink",R(2,on,s.task.id))}},dependencies:[pt,B,Kt,Wt,Qt],styles:[".task-more-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px}"],changeDetection:0});let t=e;return t})();var an=["note",""];function rn(t,e){if(t&1){let l=D();a(0,"div",6)(1,"mat-icon",7),x("click",function(){k(l);let n=_();return v(n.deleteNote(n.note.id))}),r(2," delete "),o()()}}var _i=(()=>{let e=class e{constructor(i){this.teamsService=i,this.delete=new kt,this.isEditable=!1}ngOnInit(){this.checkIfEditable()}deleteNote(i){this.delete.emit(i)}checkIfEditable(){this.teamsService.currentTeamMember$.pipe(F(1)).subscribe(i=>{i&&(this.isEditable=i.id===this.note.teamMemberId)})}};e.\u0275fac=function(n){return new(n||e)(f(W))},e.\u0275cmp=C({type:e,selectors:[["app-task-note-item","note",""]],inputs:{note:"note"},outputs:{delete:"delete"},attrs:an,decls:11,vars:7,consts:[[1,"task__notes-item"],[1,"task__notes-item-main"],[1,"task__notes-item-header"],[1,"task__notes-item-header-title"],[1,"task__notes-item-header-date"],[1,"task__notes-item-body"],[1,"task__notes-item-actions"],["matTooltip","Delete",3,"click"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),r(4),o(),a(5,"p",4),r(6),S(7,"date"),o()(),a(8,"div",5),r(9),o()(),u(10,rn,3,0,"div",6),o()),n&2&&(m(4),A(s.note.authorFullName),m(2),g(" ",j(7,4,s.note.createdDate,"MMM d, y")," "),m(3),g(" ",s.note.content," "),m(),h(10,s.isEditable?10:-1))},dependencies:[B,at,X],styles:[".task__notes-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-radius:8px;gap:60px}.task__notes-item-main[_ngcontent-%COMP%]{flex:1}.task__notes-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.task__notes-item-header-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.task__notes-item-header-date[_ngcontent-%COMP%]{font-size:12px;color:#979797}.task__notes-item-body[_ngcontent-%COMP%]{margin-top:6px;font-size:14px}.task__notes-item-actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#49515a;cursor:pointer;font-size:20px;width:20px;height:20px}"],changeDetection:0});let t=e;return t})();var ln=["task",""],mn=(t,e)=>e.id;function cn(t,e){if(t&1){let l=D();a(0,"app-task-note-item",8),x("delete",function(n){k(l);let s=_(2);return v(s.deleteNote(n))}),o()}if(t&2){let l=e.$implicit;c("note",l)}}function pn(t,e){t&1&&(a(0,"div",6),y(1,cn,1,1,"app-task-note-item",7,mn),o()),t&2&&(m(),w(e))}var gi=(()=>{let e=class e{constructor(i,n,s){this.tasksService=i,this.toastrService=n,this.cd=s,this.taskNotes$=Ee([]),this.isEditable=!1,this.form=new tt({content:new b("",[O.required])})}ngOnInit(){this.taskNotes$=this.tasksService.getTaskNotes(this.task.id)}createNote(){let i=this.form.getRawValue();if(this.form.invalid||!i.content){this.toastrService.error("Form is invalid");return}let n={content:i.content};this.tasksService.createTaskNote(this.task.id,n).pipe(I(s=>(this.toastrService.error("Failed to create task note"),M(()=>s))),F(1)).subscribe(()=>{this.taskNotes$=this.tasksService.getTaskNotes(this.task.id),this.form.patchValue({content:""}),this.cd.markForCheck()})}deleteNote(i){this.tasksService.deleteTaskNote(i).pipe(I(n=>(this.toastrService.error("Failed to delete task note"),M(()=>n))),F(1)).subscribe(()=>{this.taskNotes$=this.tasksService.getTaskNotes(this.task.id),this.cd.markForCheck()})}};e.\u0275fac=function(n){return new(n||e)(f(N),f(J),f(mt))},e.\u0275cmp=C({type:e,selectors:[["app-task-notes","task",""]],inputs:{task:"task"},attrs:ln,decls:13,vars:5,consts:[[1,"task__notes"],[1,"task__notes-title"],[1,"task__notes-form",3,"formGroup"],["appearance","outline"],["formControlName","content","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","placeholder","Leave a note"],["mat-stroked-button","","type","submit",1,"task__notes-send",3,"click","disabled"],[1,"task__notes-list"],[3,"note"],[3,"delete","note"]],template:function(n,s){if(n&1&&(a(0,"div",0)(1,"h4",1),r(2,"Notes"),o(),a(3,"form",2)(4,"mat-form-field",3),d(5,"textarea",4),o(),a(6,"button",5),x("click",function(){return s.createNote()}),a(7,"mat-icon"),r(8,"send"),o(),a(9,"span"),r(10,"Send"),o()()(),u(11,pn,3,0,"div",6),S(12,"async"),o()),n&2){let p;m(3),c("formGroup",s.form),m(3),c("disabled",s.form.invalid),m(5),h(11,(p=L(12,3,s.taskNotes$))?11:-1,p)}},dependencies:[B,U,Ct,ot,wt,et,K,Q,Z,it,nt,_i,G],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.task__notes[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:22px}.task__notes-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.task__notes-form[_ngcontent-%COMP%]{margin-top:1rem}.task__notes-send[_ngcontent-%COMP%]{margin-top:-12px;float:right}.task__notes-list[_ngcontent-%COMP%]{margin-top:3rem;display:flex;flex-direction:column;gap:2rem}.task__notes-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-radius:8px}.task__notes-item-main[_ngcontent-%COMP%]{flex:1}.task__notes-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.task__notes-item-header-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.task__notes-item-header-date[_ngcontent-%COMP%]{font-size:12px;color:#979797}.task__notes-item-body[_ngcontent-%COMP%]{margin-top:6px;font-size:14px}.task__notes-item-actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#49515a;cursor:pointer;font-size:20px;width:20px;height:20px}"],changeDetection:0});let t=e;return t})();var fn=(t,e)=>e.id;function _n(t,e){if(t&1&&(a(0,"mat-option",7),r(1),o()),t&2){let l=e.$implicit;c("matTooltip",l)("value",l),m(),g(" ",l," ")}}function gn(t,e){t&1&&(a(0,"mat-option",10),r(1," My Tasks "),o()),t&2&&c("value",e.id.toString())}function hn(t,e){if(t&1&&(a(0,"mat-option",7),r(1),o()),t&2){let l=e.$implicit;c("matTooltip",l.fullName)("value",l.id.toString()),m(),g(" ",l.fullName," ")}}function Cn(t,e){t&1&&y(0,hn,2,3,"mat-option",7,fn),t&2&&w(e)}var Ci=(()=>{let e=class e{constructor(i,n,s,p){this.router=i,this.route=n,this.teamsService=s,this.cd=p,this.expanded=!1,this.filter=new kt,this.destroy$=new st,this.executors$=this.teamsService.getAllTeamMembers(),this.currentTeamMember$=this.teamsService.currentTeamMember$,this.views=["List","Kanban","Table"],this.form=new tt({executorId:new b,view:new b,searchValue:new b})}ngOnInit(){this.patchInitialFormValues(),this.trackFormValueChanges()}ngOnDestroy(){this.destroy$.complete()}patchInitialFormValues(){let i=this.getQueryParameters();this.form.patchValue({executorId:i.executorId,view:i.view,searchValue:i.searchValue}),this.filter.emit(i),this.cd.detectChanges()}trackFormValueChanges(){this.form.valueChanges.pipe(Pe(800),Rt(),jt(this.destroy$)).subscribe(i=>{let n={searchValue:i.searchValue??void 0,view:i.view??void 0,executorId:i.executorId??void 0};this.saveQueryParameters(n),this.filter.emit(n)})}saveQueryParameters(i){this.router.navigate([],{queryParams:Re(i),queryParamsHandling:"merge"})}getQueryParameters(){let i={executorId:void 0,searchValue:"",view:this.views[1]},n=this.route.snapshot.queryParams;return je(n,i)}};e.\u0275fac=function(n){return new(n||e)(f(Le),f(Gt),f(W),f(mt))},e.\u0275cmp=C({type:e,selectors:[["app-tasks-filter"]],inputs:{expanded:"expanded"},outputs:{filter:"filter"},decls:30,vars:9,consts:[[1,"filter"],[3,"expanded"],[1,"filter__fields",3,"formGroup"],["appearance","outline"],["matPrefix",""],["matInput","","type","text","formControlName","searchValue"],["formControlName","view"],[3,"matTooltip","value"],["formControlName","executorId"],["matTooltip","All Unassigned",3,"value"],["matTooltip","My Tasks",3,"value"]],template:function(n,s){if(n&1&&(a(0,"section",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),r(5,"Filters"),o()(),a(6,"form",2)(7,"mat-form-field",3)(8,"mat-label"),r(9,"Search"),o(),a(10,"mat-icon",4),r(11,"search"),o(),d(12,"input",5),o(),a(13,"mat-form-field",3)(14,"mat-label"),r(15,"View"),o(),a(16,"mat-select",6),y(17,_n,2,3,"mat-option",7,Mt),o()(),a(19,"mat-form-field",3)(20,"mat-label"),r(21,"Executors"),o(),a(22,"mat-select",8)(23,"mat-option",9),r(24," All "),o(),u(25,gn,2,1,"mat-option",10),S(26,"async"),d(27,"mat-divider"),u(28,Cn,2,0),S(29,"async"),o()()()()()()),n&2){let p,T;m(2),c("expanded",s.expanded),m(4),c("formGroup",s.form),m(11),w(s.views),m(6),c("value",null),m(2),h(25,(p=L(26,5,s.currentTeamMember$))?25:-1,p),m(3),h(28,(T=L(29,7,s.executors$))?28:-1,T)}},dependencies:[B,ae,ie,ne,oe,Ct,ot,ht,qe,xt,dt,re,at,et,K,Q,Z,it,nt,G],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter[_ngcontent-%COMP%]{margin-top:22px}.filter__fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;align-items:start}"],changeDetection:0});let t=e;return t})();var xi=Ii(Oi());var kn=(t,e)=>e.id;function vn(t,e){if(t&1&&(a(0,"mat-option",10),r(1),o()),t&2){let l=e.$implicit;c("matTooltip",l)("value",l),m(),g(" ",l," ")}}function bn(t,e){t&1&&(a(0,"mat-option",13),r(1," My Tasks "),o()),t&2&&c("value",e.id.toString())}function Sn(t,e){if(t&1&&(a(0,"mat-option",10),r(1),o()),t&2){let l=e.$implicit;c("matTooltip",l.fullName)("value",l.id.toString()),m(),g(" ",l.fullName," ")}}function Mn(t,e){t&1&&y(0,Sn,2,3,"mat-option",10,kn),t&2&&w(e)}var ki=(()=>{let e=class e{constructor(i,n){this.dialogRef=i,this.teamsService=n,this.executors$=this.teamsService.getAllTeamMembers(),this.currentTeamMember$=this.teamsService.currentTeamMember$,this.views=["Table"],this.form=this.createForm()}onBackClick(){this.dialogRef.close()}onSubmit(){let i=this.form.getRawValue(),n={format:"EXCEL",startDate:i.startDate?i.startDate.toISOString():void 0,endDate:i.endDate?i.endDate.toISOString():void 0,executorId:i.executorId??void 0};this.dialogRef.close(n)}createForm(){let i=(0,xi.default)(),n=i.subtract(1,"month");return new tt({executorId:new b(null,[O.required]),view:new b(this.views[0],[O.required]),startDate:new b(n.toDate(),[O.required]),endDate:new b(i.toDate(),[O.required])})}};e.\u0275fac=function(n){return new(n||e)(f(ut),f(W))},e.\u0275cmp=C({type:e,selectors:[["app-tasks-export-dialog"]],decls:35,vars:10,consts:[["picker",""],["mat-dialog-title","",1,"t-export__title"],["mat-dialog-content","",1,"t-export"],[1,"t-export__filters",3,"formGroup"],["appearance","outline"],[3,"rangePicker"],["matStartDate","","formControlName","startDate","placeholder","Start date"],["matEndDate","","formControlName","endDate","placeholder","End date"],["matIconSuffix","",3,"for"],["formControlName","view"],[3,"matTooltip","value"],["formControlName","executorId"],["matTooltip","All Unassigned",3,"value"],["matTooltip","My Tasks",3,"value"],["align","end"],["mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"click"]],template:function(n,s){if(n&1){let p=D();a(0,"h4",1),r(1,` Export tasks
`),o(),a(2,"section",2)(3,"form",3)(4,"mat-form-field",4)(5,"mat-label"),r(6,"Period"),o(),a(7,"mat-date-range-input",5),d(8,"input",6)(9,"input",7),o(),d(10,"mat-datepicker-toggle",8)(11,"mat-date-range-picker",null,0),o(),a(13,"mat-form-field",4)(14,"mat-label"),r(15,"View"),o(),a(16,"mat-select",9),y(17,vn,2,3,"mat-option",10,Mt),o()(),a(19,"mat-form-field",4)(20,"mat-label"),r(21,"Executors"),o(),a(22,"mat-select",11)(23,"mat-option",12),r(24," All "),o(),u(25,bn,2,1,"mat-option",13),S(26,"async"),d(27,"mat-divider"),u(28,Mn,2,0),S(29,"async"),o()()()(),a(30,"mat-dialog-actions",14)(31,"button",15),x("click",function(){return k(p),v(s.onBackClick())}),r(32," Back "),o(),a(33,"button",16),x("click",function(){return k(p),v(s.onSubmit())}),r(34," Submit "),o()()}if(n&2){let p,T,H=q(12);m(3),c("formGroup",s.form),m(4),c("rangePicker",H),m(3),c("for",H),m(7),w(s.views),m(6),c("value",null),m(2),h(25,(p=L(26,6,s.currentTeamMember$))?25:-1,p),m(3),h(28,(T=L(29,8,s.executors$))?28:-1,T)}},dependencies:[U,ot,ht,Dt,xt,dt,re,Et,Ke,Ge,We,Qe,at,ft,gt,_t,et,K,Q,Z,it,nt,G],styles:[".t-export__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.t-export__filters[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));align-items:start}"],changeDetection:0});let t=e;return t})();var vi=(()=>{let e=class e{constructor(i,n,s,p){this.dialog=i,this.tasksService=n,this.toastService=s,this.filesService=p}onAddNewClick(i){i.stopPropagation(),this.dialog.open(ke,{minWidth:"70%",data:{}}).afterClosed().pipe(V(s=>s?this.tasksService.createTask(s):lt),I(s=>(this.toastService.open("Failed to create a task"),M(()=>s))),F(1)).subscribe(()=>{this.toastService.open("Successfully created task"),this.tasksService.refetchTasks()})}onCustomizeClick(){this.dialog.open(ci,{minWidth:"30%"}).afterClosed().pipe(V(n=>n?this.tasksService.saveCustomizeStatuses(n):lt),I(n=>(this.toastService.open("Failed to save statuses"),M(()=>n))),F(1)).subscribe(()=>{this.toastService.open("Successfully saved statuses"),this.tasksService.refetchTasks()})}onExportClick(){this.dialog.open(ki,{minWidth:"30%"}).afterClosed().pipe(V(n=>n?this.tasksService.exportTasks(n):lt),I(n=>(this.toastService.error("Failed to export the tasks"),M(()=>n))),F(1)).subscribe(n=>{this.filesService.downloadBlob(n),this.toastService.open("Successfully exported the tasks"),this.tasksService.refetchTasks()})}};e.\u0275fac=function(n){return new(n||e)(f(yt),f(N),f(J),f(ii))},e.\u0275cmp=C({type:e,selectors:[["app-tasks-toolbar"]],decls:14,vars:0,consts:[[1,"tasks__toolbar"],[1,"tasks__toolbar-left"],[1,"tasks__toolbar-title"],[1,"tasks__toolbar-right"],["variant","outline","icon","settings",1,"tasks__toolbar-item",3,"click"],["variant","outline","icon","download",1,"tasks__toolbar-item",3,"click"],["icon","add",1,"tasks__toolbar-item",3,"click"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Tasks"),o()(),a(4,"div",3)(5,"app-button",4),x("click",function(){return s.onCustomizeClick()}),a(6,"p"),r(7,"Customize"),o()(),a(8,"app-button",5),x("click",function(){return s.onExportClick()}),a(9,"p"),r(10,"Export"),o()(),a(11,"app-button",6),x("click",function(T){return s.onAddNewClick(T)}),a(12,"p"),r(13,"Add"),o()()()())},dependencies:[Xe],styles:["h1[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.tasks__toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;justify-content:space-between;overflow-x:auto;overflow-y:hidden}.tasks__toolbar-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.tasks__toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}@media (max-width: 40em){.tasks__toolbar-left[_ngcontent-%COMP%]{display:none}}.tasks__toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.tasks__toolbar-item[_ngcontent-%COMP%]{text-overflow:ellipsis;text-wrap:nowrap}"],changeDetection:0});let t=e;return t})();var yn=t=>({background:t}),wn=()=>({background:"#cedff8"});function Dn(t,e){t&1&&d(0,"div",16)}function En(t,e){if(t&1&&(a(0,"span"),r(1),S(2,"date"),o()),t&2){let l=_(2);m(),g(" - ",j(2,1,l.task.endDate,"MMMM d")," ")}}function Pn(t,e){if(t&1&&(a(0,"div",0),u(1,Dn,1,0,"div",1),a(2,"div",2)(3,"h5",3),r(4),o(),d(5,"app-task-more-menu",4),o(),a(6,"div",5)(7,"p"),r(8),o()(),a(9,"div",6)(10,"div",7)(11,"p",8),r(12),o()(),a(13,"div",7)(14,"p",8),r(15),o()()(),a(16,"div",9)(17,"mat-icon",10),r(18,"access_time"),o(),a(19,"span"),r(20),S(21,"date"),o(),u(22,En,3,4,"span"),o(),a(23,"div",11)(24,"div",12)(25,"mat-icon",13),r(26,"person_outline"),o(),a(27,"p"),r(28),o()(),a(29,"div",14)(30,"mat-icon",15),r(31,"comment_outline"),o(),a(32,"p"),r(33),o()()()()),t&2){let l,i=_();c("cdkDragData",i.task),m(4),A(i.task.title),m(),c("task",i.task),m(3),g(" ",i.task.description," "),m(2),c("ngStyle",R(15,yn,i.taskPriorityColor)),m(2),A(i.taskPriority),m(),c("ngStyle",Nt(17,wn)),m(2),A(i.task.tag),m(5),g(" ",j(21,12,i.task.startDate,"MMMM d")," "),m(2),h(22,i.task.endDate?22:-1),m(6),A((l=i.task.executorMember==null?null:i.task.executorMember.fullName)!==null&&l!==void 0?l:"Unassigned"),m(5),A(i.task.notesAmount)}}var bi=(()=>{let e=class e{constructor(){this.task=null}get taskPriority(){switch(this.task?.priority){case E.HIGH:return"High";case E.MEDIUM:return"Medium";case E.LOW:return"Low";default:return""}}get taskPriorityColor(){switch(this.task?.priority){case E.HIGH:return"#FFA500";case E.MEDIUM:return"#8ce98c";case E.LOW:return"#08FFFF";default:return""}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C({type:e,selectors:[["app-kanban-item"]],inputs:{task:"task"},decls:1,vars:1,consts:[["cdkDrag","",1,"task",3,"cdkDragData"],["class","task__placeholder",4,"cdkDragPlaceholder"],[1,"task__header"],[1,"task__header-title"],[3,"task"],[1,"task__description"],[1,"task__tags"],[1,"task__tags-item",3,"ngStyle"],[1,"task__tags-body"],[1,"task__dates"],[1,"task__dates-icon"],[1,"task__footer"],[1,"task__footer-executor"],[1,"task__footer-executor-icon"],[1,"task__footer-comments"],[1,"task__footer-comments-icon"],[1,"task__placeholder"]],template:function(n,s){n&1&&u(0,Pn,34,18,"div",0),n&2&&h(0,s.task?0:-1)},dependencies:[ct,B,Xt,Zt,Ot,X],styles:[".task[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;padding:12px 0;border-radius:6px;background:#fff;border:1px solid #e9e9e9}.task__placeholder[_ngcontent-%COMP%]{background:#fafafa;border:dotted 3px #e4e3e3;border-radius:6px;min-height:200px;width:100%;transition:transform .25s cubic-bezier(0,0,.2,1)}.task__header[_ngcontent-%COMP%]{padding:0 16px;display:flex;justify-content:space-between;align-items:center;gap:8px}.task__header-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.task__description[_ngcontent-%COMP%]{padding:0 16px;margin-top:8px}.task__description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;font-size:12px;color:#575757}.task__tags[_ngcontent-%COMP%]{padding:0 16px;margin-top:12px;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.task__tags-item[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px;background:#d5e5f7;border-radius:4px;text-overflow:clip;overflow:hidden}.task__dates[_ngcontent-%COMP%]{padding:0 16px;display:flex;align-items:center;gap:8px;margin-top:12px}.task__dates-icon[_ngcontent-%COMP%]{font-weight:500;width:16px;height:16px;font-size:16px}.task__dates[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.task__footer[_ngcontent-%COMP%]{padding:12px 16px 0;margin-top:12px;border-top:1px solid #e9e9e9;display:flex;align-items:center;justify-content:space-between}.task__footer-executor[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.task__footer-executor-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px}.task__footer-executor[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.task__footer-comments[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.task__footer-comments-icon[_ngcontent-%COMP%]{width:14px;height:14px;font-size:14px}.task__footer-comments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.cdk-drag-preview[_ngcontent-%COMP%]{padding:12px 0;background:#fff;border:1px solid #e9e9e9;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0});let t=e;return t})();var On=["column",""],Fn=(t,e)=>e.id,Vn=t=>({"border-bottom":t});function Nn(t,e){if(t&1&&d(0,"app-kanban-item",6),t&2){let l=e.$implicit;c("task",l)}}function $n(t,e){if(t&1){let l=D();a(0,"div",0)(1,"div",1)(2,"h4",2),r(3),o(),a(4,"div",3)(5,"button",4),x("click",function(){k(l);let n=_();return v(n.onAddButtonClick())}),a(6,"mat-icon"),r(7,"add"),o(),a(8,"p"),r(9,"Add"),o()()()(),a(10,"div",5),x("cdkDropListDropped",function(n){k(l);let s=_();return v(s.onDrop(n))}),y(11,Nn,1,1,"app-kanban-item",6,Fn),o()()}if(t&2){let l=_();m(),c("ngStyle",R(6,Vn,l.getColumnBorderBottomStyle)),m(2),Ne("",l.column.name," (",l.getColumnTasksCount,")"),m(7),c("id",l.getColumnStringId)("cdkDropListConnectedTo",l.connectedColumns)("cdkDropListData",l.column.tasks),m(),w(l.column.tasks)}}var Si=(()=>{let e=class e{constructor(i,n,s){this.tasksService=i,this.toastrService=n,this.dialog=s,this.connectedColumns=[]}onDrop(i){if(i.previousContainer===i.container)Yt(i.container.data,i.previousIndex,i.currentIndex);else{let n=i.item.data.id,s=i.container.id,p=Number(n),T=Number(s);if(isNaN(T)||isNaN(p)){this.toastrService.open("The current status or task id is not a number");return}Be(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex),this.tasksService.updateTask(p,{statusId:T}).pipe(I(H=>(this.toastrService.error("Failed to change status of task. Reload the page"),M(()=>H))),F(1)).subscribe()}}onAddButtonClick(){this.dialog.open(ke,{minWidth:"70%",data:{statusId:this.column.id}}).afterClosed().pipe(V(n=>n?this.tasksService.createTask(n):lt),I(n=>(this.toastrService.open("Failed to create a task"),M(()=>n))),F(1)).subscribe(()=>{this.toastrService.open("Successfully created task"),this.tasksService.refetchTasks()})}get getColumnTasksCount(){return this.column.tasks.length}get getColumnBorderBottomStyle(){return`2px solid ${this.column.color}`}get getColumnStringId(){return`${this.column.id}`}};e.\u0275fac=function(n){return new(n||e)(f(N),f(J),f(yt))},e.\u0275cmp=C({type:e,selectors:[["app-kanban-column","column",""]],inputs:{column:"column",connectedColumns:"connectedColumns"},attrs:On,decls:1,vars:1,consts:[[1,"column"],[1,"column__header",3,"ngStyle"],[1,"column__header-title"],[1,"column__header-toolbar"],[3,"click"],["cdkDropList","",1,"column__container",3,"cdkDropListDropped","id","cdkDropListConnectedTo","cdkDropListData"],[3,"task"]],template:function(n,s){n&1&&u(0,$n,13,8,"div",0),n&2&&h(0,s.column?0:-1)},dependencies:[ct,B,Jt,bi],styles:[".column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;width:320px;height:100%;border-radius:6px}.column__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;gap:12px;overflow-y:auto}.column__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:.8rem 1rem;background:#fff;border-bottom:2px solid #263fb9;border:1px solid #e9e9e9;margin-bottom:12px;border-radius:6px 6px 0 0;transition:all .5s ease}.column__header[_ngcontent-%COMP%]:hover   .column__header-toolbar[_ngcontent-%COMP%]{visibility:visible;transition:all .5s ease}.column__header-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.column__header-toolbar[_ngcontent-%COMP%]{visibility:hidden;display:flex;align-items:center;gap:12px}@media (max-width: 40em){.column__header-toolbar[_ngcontent-%COMP%]{visibility:visible}}.column__header-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;background:#f0f0f0c0;padding:4px 6px;border-radius:4px}.column__header-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.column__header-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0});let t=e;return t})();var Ft=(()=>{let e=class e{constructor(){this._connectedColumns=[],this._columns=[]}set columns(i){this._connectedColumns=i.map(n=>n.id.toLocaleString()),this._columns=i}get columns(){return this._columns}get connectedColumns(){return this._connectedColumns}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C({type:e,selectors:[["app-tasks-base-view"]],inputs:{columns:"columns"},decls:0,vars:0,template:function(n,s){},encapsulation:2,changeDetection:0});let t=e;return t})();var Ln=(t,e)=>e.id;function Bn(t,e){if(t&1&&d(0,"app-kanban-column",2),t&2){let l=e.$implicit,i=_();c("column",l)("connectedColumns",i.connectedColumns)}}var Mi=(()=>{let e=class e extends Ft{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=bt(e)))(s||e)}})(),e.\u0275cmp=C({type:e,selectors:[["app-kanban-board-view"]],features:[St],decls:4,vars:0,consts:[[1,"board"],[1,"columns"],[3,"column","connectedColumns"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"div",1),y(2,Bn,1,2,"app-kanban-column",2,Ln),o()()),n&2&&(m(2),w(s.columns))},dependencies:[Si],styles:[".board[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow-x:auto;padding-bottom:10px}.columns[_ngcontent-%COMP%]{display:flex;gap:1.4rem;flex-grow:1}"],changeDetection:0});let t=e;return t})();var jn=t=>({"background-color":t}),Un=t=>[t];function qn(t,e){t&1&&(a(0,"th",16),r(1," # "),o())}function Hn(t,e){if(t&1&&(a(0,"td",17),r(1),o()),t&2){let l=e.$implicit;m(),g(" ",l.id," ")}}function Gn(t,e){t&1&&(a(0,"th",16),r(1," Name "),o())}function Wn(t,e){if(t&1&&(a(0,"td",17),r(1),o()),t&2){let l=e.$implicit;m(),g(" ",l.title," ")}}function Kn(t,e){t&1&&(a(0,"th",16),r(1," Executor "),o())}function Qn(t,e){if(t&1&&(a(0,"td",17),r(1),o()),t&2){let l,i=e.$implicit;m(),g(" ",(l=i.executorMember==null?null:i.executorMember.fullName)!==null&&l!==void 0?l:"Unassigned"," ")}}function Yn(t,e){t&1&&(a(0,"th",16),r(1," Start Date "),o())}function Xn(t,e){if(t&1&&(a(0,"td",17),r(1),S(2,"date"),o()),t&2){let l=e.$implicit;m(),g(" ",j(2,1,l.startDate,"EEEE, MMMM d")," ")}}function Jn(t,e){t&1&&(a(0,"th",16),r(1," Due Date "),o())}function Zn(t,e){if(t&1&&(r(0),S(1,"date")),t&2){let l=_().$implicit;g(" ",j(1,1,l.endDate,"EEEE, MMMM d")," ")}}function to(t,e){t&1&&r(0," Unset ")}function eo(t,e){if(t&1&&(a(0,"td",17),u(1,Zn,2,4)(2,to,1,0),o()),t&2){let l=e.$implicit;m(),h(1,l.endDate?1:2)}}function io(t,e){t&1&&(a(0,"th",16),r(1," Priority "),o())}function no(t,e){if(t&1&&(a(0,"td",17),r(1),o()),t&2){let l=e.$implicit,i=_(2);m(),g(" ",i.taskPriority(l)," ")}}function oo(t,e){t&1&&d(0,"th",16)}function ao(t,e){if(t&1&&(a(0,"td",17),d(1,"app-task-more-menu",18),o()),t&2){let l=e.$implicit;m(),c("task",l)}}function ro(t,e){t&1&&d(0,"tr",19)}function so(t,e){if(t&1&&d(0,"tr",20),t&2){let l=e.$implicit;c("routerLink",R(1,Un,l.id))}}function lo(t,e){if(t&1){let l=D();a(0,"mat-expansion-panel",1),x("opened",function(){k(l);let n=_();return v(n.panelOpenState=!0)})("closed",function(){k(l);let n=_();return v(n.panelOpenState=!1)}),a(1,"mat-expansion-panel-header")(2,"mat-panel-title"),d(3,"span",2),r(4),o()(),a(5,"div",3)(6,"table",4),d(7,"caption"),$(8,5),u(9,qn,2,0,"th",6)(10,Hn,2,1,"td",7),z(),$(11,8),u(12,Gn,2,0,"th",6)(13,Wn,2,1,"td",7),z(),$(14,9),u(15,Kn,2,0,"th",6)(16,Qn,2,1,"td",7),z(),$(17,10),u(18,Yn,2,0,"th",6)(19,Xn,3,4,"td",7),z(),$(20,11),u(21,Jn,2,0,"th",6)(22,eo,3,1,"td",7),z(),$(23,12),u(24,io,2,0,"th",6)(25,no,2,1,"td",7),z(),$(26,13),u(27,oo,1,0,"th",6)(28,ao,2,1,"td",7),z(),u(29,ro,1,0,"tr",14)(30,so,1,3,"tr",15),o()()()}if(t&2){let l=_();m(3),c("ngStyle",R(5,jn,l.column.color)),m(),g(" ",l.column.name," "),m(2),c("dataSource",l.column.tasks),m(23),c("matHeaderRowDef",l.displayedColumns),m(),c("matRowDefColumns",l.displayedColumns)}}var Ti=(()=>{let e=class e{constructor(){this.column=null,this.panelOpenState=!0,this.displayedColumns=["id","title","executor","startDate","endDate","priority","actions"]}onTaskMoreClick(i){i.stopPropagation()}taskPriority(i){switch(i.priority){case E.HIGH:return"High";case E.MEDIUM:return"Medium";case E.LOW:return"Low";default:return""}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=C({type:e,selectors:[["app-list-panel"]],inputs:{column:"column"},decls:1,vars:1,consts:[["expanded",""],["expanded","",3,"opened","closed"],[1,"panel__color",3,"ngStyle"],[1,"table_wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","executor"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","priority"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"task"],["mat-header-row",""],["mat-row","",3,"routerLink"]],template:function(n,s){n&1&&u(0,lo,31,7,"mat-expansion-panel",0),n&2&&h(0,s.column?0:-1)},dependencies:[ct,pt,ie,ne,oe,se,me,ue,ce,le,fe,pe,de,_e,ge,Ot,X],styles:[".table_wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;color:#afafaf}.mdc-data-table__cell[_ngcontent-%COMP%], .mdc-data-table__header-cell[_ngcontent-%COMP%]{border-bottom:none}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{background:#e6f0fc}.panel__color[_ngcontent-%COMP%]{width:5px;height:100%;background:#ccc;margin-right:12px}"],changeDetection:0});let t=e;return t})();var co=(t,e)=>e.id;function po(t,e){if(t&1&&d(0,"app-list-panel",1),t&2){let l=_().$implicit;c("column",l)}}function uo(t,e){if(t&1&&u(0,po,1,1,"app-list-panel",1),t&2){let l=e.$implicit;h(0,l.tasks.length>0?0:-1)}}var yi=(()=>{let e=class e extends Ft{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=bt(e)))(s||e)}})(),e.\u0275cmp=C({type:e,selectors:[["app-list-view"]],features:[St],decls:3,vars:0,consts:[["multi","true",1,"list"],[3,"column"]],template:function(n,s){n&1&&(a(0,"mat-accordion",0),y(1,uo,1,1,null,null,co),o()),n&2&&(m(),w(s.columns))},dependencies:[ae,Ti],styles:[".list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}"],changeDetection:0});let t=e;return t})();var _o=t=>[t];function go(t,e){t&1&&(a(0,"th",14),r(1," # "),o())}function ho(t,e){if(t&1&&(a(0,"td",15),r(1),o()),t&2){let l=e.$implicit;m(),g(" ",l.id," ")}}function Co(t,e){t&1&&(a(0,"th",14),r(1," Name "),o())}function xo(t,e){if(t&1&&(a(0,"td",15),r(1),o()),t&2){let l=e.$implicit;m(),g(" ",l.title," ")}}function ko(t,e){t&1&&(a(0,"th",14),r(1," Executor "),o())}function vo(t,e){if(t&1&&(a(0,"td",15),r(1),o()),t&2){let l,i=e.$implicit;m(),g(" ",(l=i.executorMember==null?null:i.executorMember.fullName)!==null&&l!==void 0?l:"Unassigned"," ")}}function bo(t,e){t&1&&(a(0,"th",14),r(1," Start Date "),o())}function So(t,e){if(t&1&&(a(0,"td",15),r(1),S(2,"date"),o()),t&2){let l=e.$implicit;m(),g(" ",j(2,1,l.startDate,"EEEE, MMMM d")," ")}}function Mo(t,e){t&1&&(a(0,"th",14),r(1," Due Date "),o())}function To(t,e){if(t&1&&(r(0),S(1,"date")),t&2){let l=_().$implicit;g(" ",j(1,1,l.endDate,"EEEE, MMMM d")," ")}}function yo(t,e){t&1&&r(0," Unset ")}function wo(t,e){if(t&1&&(a(0,"td",15),u(1,To,2,4)(2,yo,1,0),o()),t&2){let l=e.$implicit;m(),h(1,l.endDate?1:2)}}function Do(t,e){t&1&&(a(0,"th",14),r(1," Priority "),o())}function Eo(t,e){if(t&1&&(a(0,"td",15),r(1),o()),t&2){let l=e.$implicit,i=_();m(),g(" ",i.taskPriority(l)," ")}}function Po(t,e){t&1&&(a(0,"th",14),r(1," Status "),o())}function Io(t,e){if(t&1&&(a(0,"td",15),r(1),o()),t&2){let l=e.$implicit;m(),g(" ",l.status.name," ")}}function Oo(t,e){t&1&&d(0,"th",14)}function Fo(t,e){if(t&1&&(a(0,"td",15),d(1,"app-task-more-menu",16),o()),t&2){let l=e.$implicit;m(),c("task",l)}}function Vo(t,e){t&1&&d(0,"tr",17)}function No(t,e){if(t&1&&d(0,"tr",18),t&2){let l=e.$implicit;c("routerLink",R(1,_o,l.id))}}var wi=(()=>{let e=class e extends Ft{constructor(){super(...arguments),this.tasks=[],this.displayedColumns=["id","title","executor","startDate","endDate","priority","status","actions"]}set columns(i){for(let n of i)this.tasks=[...this.tasks,...n.tasks]}onTaskMoreClick(i){i.stopPropagation()}taskPriority(i){switch(i.priority){case E.HIGH:return"High";case E.MEDIUM:return"Medium";case E.LOW:return"Low";default:return""}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=bt(e)))(s||e)}})(),e.\u0275cmp=C({type:e,selectors:[["app-table-view"]],inputs:{columns:"columns"},features:[St],decls:29,vars:3,consts:[[1,"table_wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","executor"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","priority"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"task"],["mat-header-row",""],["mat-row","",3,"routerLink"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"table",1),d(2,"caption"),$(3,2),u(4,go,2,0,"th",3)(5,ho,2,1,"td",4),z(),$(6,5),u(7,Co,2,0,"th",3)(8,xo,2,1,"td",4),z(),$(9,6),u(10,ko,2,0,"th",3)(11,vo,2,1,"td",4),z(),$(12,7),u(13,bo,2,0,"th",3)(14,So,3,4,"td",4),z(),$(15,8),u(16,Mo,2,0,"th",3)(17,wo,3,1,"td",4),z(),$(18,9),u(19,Do,2,0,"th",3)(20,Eo,2,1,"td",4),z(),$(21,10),u(22,Po,2,0,"th",3)(23,Io,2,1,"td",4),z(),$(24,11),u(25,Oo,1,0,"th",3)(26,Fo,2,1,"td",4),z(),u(27,Vo,1,0,"tr",12)(28,No,1,3,"tr",13),o()()),n&2&&(m(),c("dataSource",s.tasks),m(26),c("matHeaderRowDef",s.displayedColumns),m(),c("matRowDefColumns",s.displayedColumns))},dependencies:[pt,se,me,ue,ce,le,fe,pe,de,_e,ge,Ot,X],styles:["[_nghost-%COMP%]     .mat-mdc-table{border:1px solid #e9e9e9;background:none}[_nghost-%COMP%]     .mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-header-cell{font-size:12px;text-transform:uppercase;color:#afafaf}[_nghost-%COMP%]     .mdc-data-table__cell, [_nghost-%COMP%]     .mdc-data-table__header-cell{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-row:hover .mat-mdc-cell{background:#e6f0fc}[_nghost-%COMP%]     .mat-mdc-table tbody, [_nghost-%COMP%]     .mat-mdc-table tfoot, [_nghost-%COMP%]     .mat-mdc-table thead, [_nghost-%COMP%]     .mat-mdc-cell, [_nghost-%COMP%]     .mat-mdc-footer-cell, [_nghost-%COMP%]     .mat-mdc-header-row, [_nghost-%COMP%]     .mat-mdc-row, [_nghost-%COMP%]     .mat-mdc-footer-row, [_nghost-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{background:none}.table_wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}table[_ngcontent-%COMP%]{width:100%;border-radius:6px;background:#fff!important;padding:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%}"],changeDetection:0});let t=e;return t})();function zo(t,e){if(t&1&&(a(0,"section",0)(1,"div",2)(2,"div",3)(3,"main",4)(4,"div",5)(5,"h2",6),r(6),o(),a(7,"p",7),r(8),o()(),a(9,"div",8),d(10,"quill-view",9),o()(),d(11,"app-task-notes",10),o(),d(12,"app-task-details-sidebar",10),o()()),t&2){let l=_();m(6),A(l.task.title),m(2),A(l.task.description),m(2),c("content",l.task.content),m(),c("task",l.task),m(),c("task",l.task)}}function Lo(t,e){t&1&&(a(0,"section",1)(1,"mat-icon"),r(2,"error_outline"),o(),a(3,"h1"),r(4," Something went wrong while loading the task. "),d(5,"br"),r(6," Please, Try again tater! "),o()())}var Di=(()=>{let e=class e{constructor(i,n,s,p){this.route=i,this.tasksService=n,this.toastService=s,this.cd=p,this.isError=!1,this.task=null,this.getTaskByUrl()}getTaskByUrl(){let i=this.route.snapshot.paramMap.get("taskId"),n=Number(i);if(isNaN(n)){this.toastService.error("The task id is invalid");return}this.tasksService.getTaskById(n).pipe(I(s=>(this.toastService.error("Failed to load task"),this.isError=!0,M(()=>s))),Ie(()=>{this.cd.markForCheck()}),F(1)).subscribe(s=>{this.task=s})}};e.\u0275fac=function(n){return new(n||e)(f(Gt),f(N),f(J),f(mt))},e.\u0275cmp=C({type:e,selectors:[["app-task-view-page"]],decls:2,vars:2,consts:[[1,"page"],[1,"vtask__error"],[1,"vtask__wrapper"],[1,"vtask__left"],[1,"vtask__content"],[1,"vtask__header"],[1,"vtask__header-title"],[1,"vtask__header-subtitle"],[1,"vtask__description"],["format","html","theme","snow",3,"content"],[3,"task"]],template:function(n,s){n&1&&u(0,zo,13,5,"section",0)(1,Lo,7,0,"section",1),n&2&&(h(0,s.task&&!s.isError?0:-1),m(),h(1,s.isError?1:-1))},dependencies:[B,ti,fi,gi],styles:["[_nghost-%COMP%]     .ql-editor{padding:0}mat-form-field[_ngcontent-%COMP%]{width:100%}.vtask__wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:22px}@media (max-width: 64em){.vtask__wrapper[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.vtask__left[_ngcontent-%COMP%]{width:100%;flex:1;display:flex;flex-direction:column;gap:22px}@media (max-width: 64em){.vtask__left[_ngcontent-%COMP%]{order:2}}.vtask__content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:22px}.vtask__header-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.vtask__header-subtitle[_ngcontent-%COMP%]{margin-top:8px!important;font-size:14px;color:#727272}.vtask__description[_ngcontent-%COMP%]{margin-top:22px;padding:16px 24px;background:#fbfcfd;border-radius:6px;border:1px solid #e0e0e0}.vtask__error[_ngcontent-%COMP%]{height:calc(100vh - 300px);width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.vtask__error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:70px;width:70px;height:70px;color:#888}.vtask__error[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:22px!important;font-size:16px;text-align:center;font-weight:500;color:#888}@media (max-width: 64em){app-task-details-sidebar[_ngcontent-%COMP%]{width:100%;order:1}}textarea[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let t=e;return t})();var Bo=()=>({height:"50px","border-radius":"8px"}),Ao=()=>({height:"210px","border-radius":"8px"});function Ro(t,e){if(t&1&&d(0,"app-kanban-board-view",5),t&2){let l=_(2);c("columns",l.data)}}function jo(t,e){if(t&1&&d(0,"app-list-view",5),t&2){let l=_(2);c("columns",l.data)}}function Uo(t,e){if(t&1&&d(0,"app-table-view",5),t&2){let l=_(2);c("columns",l.data)}}function qo(t,e){if(t&1&&u(0,Ro,1,1)(1,jo,1,1)(2,Uo,1,1),t&2){let l,i=_(2);h(0,(l=i.filter.view)==="Kanban"?0:l==="List"?1:l==="Table"?2:-1)}}function Ho(t,e){t&1&&(a(0,"div",6),d(1,"ngx-skeleton-loader",7)(2,"ngx-skeleton-loader",7),o()),t&2&&(m(),c("theme",Nt(2,Bo)),m(),c("theme",Nt(3,Ao)))}function Go(t,e){if(t&1&&(a(0,"div",3),y(1,Ho,3,4,"div",6,Ve),o()),t&2){let l=_(2);m(),w(l.skeletonArray)}}function Wo(t,e){t&1&&(a(0,"div",4)(1,"h1",8),r(2,"404"),o(),a(3,"div",9)(4,"h2",10),r(5," Oops.. "),d(6,"br"),r(7," We couldn't find a tasks list you are looking for. "),o(),a(8,"button",11)(9,"a",12),r(10,"Return Back"),o()()()())}function Ko(t,e){if(t&1&&u(0,qo,3,1)(1,Go,3,0,"div",3)(2,Wo,11,0,"div",4),t&2){let l=e;h(0,l.data?0:-1),m(),h(1,l.loading?1:-1),m(),h(2,l.error?2:-1)}}var Ei=(()=>{let e=class e{constructor(i){this.tasksService=i,this.skeletonArray=new Array(10).fill(0),this.destroy$=new st,this.filter={},this.columns$=this.tasksService.refetchTasks$.pipe(Oe([]),V(()=>this.loadStatusesWithTasks()))}ngOnInit(){this.tasksService.refetchTasks()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadStatusesWithTasks(){return this.tasksService.getStatusesWithTasks(this.filter)}onFilter(i){this.filter=i,this.tasksService.refetchTasks()}};e.\u0275fac=function(n){return new(n||e)(f(N))},e.\u0275cmp=C({type:e,selectors:[["app-tasks-list-page"]],decls:7,vars:5,consts:[[1,"page"],[3,"filter"],[1,"tasks__content"],[1,"tasks__loading-page"],[1,"tasks__error","page"],[3,"columns"],[1,"tasks__loading-column"],["count","1","appearance","line",3,"theme"],[1,"tasks__error-title"],[1,"tasks__error-content"],[1,"tasks__error-subtitle"],["mat-flat-button","","color","primary","routerLink","/hub/overview"],["routerLink","/hub/overview"]],template:function(n,s){if(n&1&&(a(0,"section",0),d(1,"app-tasks-toolbar"),a(2,"app-tasks-filter",1),x("filter",function(T){return s.onFilter(T)}),o(),a(3,"div",2),u(4,Ko,3,3),S(5,"withLoading"),S(6,"async"),o()()),n&2){let p;m(4),h(4,(p=L(6,3,L(5,1,s.columns$)))?4:-1,p)}},dependencies:[pt,U,He,Mi,vi,yi,wi,Ci,G,Ye],styles:[".tasks__content[_ngcontent-%COMP%]{margin-top:22px}.tasks__loading-page[_ngcontent-%COMP%]{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));grid-template-rows:none}.tasks__error[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;height:100%;margin-top:10%}.tasks__error-content[_ngcontent-%COMP%]{z-index:10;display:flex;flex-direction:column;align-items:center}.tasks__error-title[_ngcontent-%COMP%]{color:#d8d7d7;font-size:280px;font-weight:600;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5;opacity:.25}@media screen and (max-width: 48em){.tasks__error-title[_ngcontent-%COMP%]{font-size:180px}}.tasks__error-subtitle[_ngcontent-%COMP%]{color:#000;font-size:26px;margin-bottom:26px;text-align:center;line-height:1.4}@media screen and (max-width: 48em){.tasks__error-subtitle[_ngcontent-%COMP%]{font-size:20px}}"],changeDetection:0});let t=e;return t})();var Qo=[{path:"",component:Ei},{path:":taskId",component:Di}],Pi=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ht({type:e}),e.\u0275inj=qt({imports:[be.forChild(Qo),be]});let t=e;return t})();var rs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ht({type:e}),e.\u0275inj=qt({imports:[$e,Pi,Je,ei.forRoot()]});let t=e;return t})();export{rs as TasksModule};
