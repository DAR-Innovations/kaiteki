import{a as I,b as ii}from"./chunk-PVLA5D7Z.js";import{a as ai}from"./chunk-AWFML3AY.js";import{a as xe,b as ni,c as oi}from"./chunk-OLRCIMFL.js";import{a as Ni}from"./chunk-UYMINATM.js";import{c as K}from"./chunk-T7QTB5KA.js";import{a as q}from"./chunk-G2MQEQ3S.js";import{$ as nt,B as dt,C as U,E as A,F as Kt,G as Qt,H as Yt,Ha as Ke,I as je,J as Xt,K as Re,Ka as xt,L as Ue,M as Jt,N as Zt,Na as ee,O as te,P as Me,Pa as ie,Q as qe,Qa as ne,R as He,Ra as Dt,Sa as Qe,T as Q,Ta as Ye,Ua as Xe,V,Va as Je,W as Y,Wa as oe,X as et,Xa as ae,Y as it,Ya as re,Z as S,Za as se,_a as le,ab as me,b as Ae,ba as Ge,bb as ce,ca as ot,cb as pe,da as at,db as de,eb as ue,fb as _e,gb as fe,hb as ge,ib as he,jb as Ce,la as ut,ma as Mt,n as Wt,na as Tt,nb as Ze,oa as _t,ob as ti,p as Be,pa as ft,pb as ei,q as tt,qa as gt,ra as yt,sa as ht,ta as We,ua as wt,v as Se,va as rt,wa as Ct,ya as st}from"./chunk-EPUQ6IPG.js";import{Aa as v,Bb as Ve,Da as Gt,F as E,Fb as g,Gb as Ne,Hb as St,I as Ie,Ib as w,Jb as D,K as P,Ka as kt,Kb as a,Lb as o,Mb as d,N as jt,Nb as $,O as Oe,Ob as z,Oc as ct,Qb as y,Tb as C,Vb as f,X as Fe,Y as N,Yb as $e,_ as Rt,bc as H,cc as l,dc as j,ea as Ut,ec as h,f as lt,fa as qt,fb as m,fc as ze,gb as _,ja as Nt,jd as pt,k as mt,ld as W,mc as $t,md as Z,n as Pe,nc as B,o as b,pa as x,qa as Ht,qd as Le,sb as bt,vc as M,wc as L,xb as u,xc as R,za as k,zb as c}from"./chunk-TYBYM3PM.js";import"./chunk-REV7FFDQ.js";import{a as At,b as Bt,f as Vi}from"./chunk-MON7YFGF.js";var ri=(()=>{let e=class e{constructor(i){this.httpClient=i,this.baseUrl="/api/v1/tasks"}getTaskById(i){return this.httpClient.get(`${this.baseUrl}/${i}`)}deleteTaskById(i){return this.httpClient.delete(`${this.baseUrl}/${i}`)}getStatusesWithTasks(i,n){let s=Me(n);return s=s.set("teamId",i),s=s.set("includeTasks",!0),this.httpClient.get(`${this.baseUrl}/statuses`,{params:s})}getStatusesWithoutTasks(i){return this.httpClient.get(`${this.baseUrl}/statuses`,{params:{teamId:i,includeTasks:!1}})}deleteStatus(i,n){return this.httpClient.delete(`${this.baseUrl}/statuses/${n}`,{params:{teamId:i}})}getCustomizeStatuses(i){return this.httpClient.get(`${this.baseUrl}/statuses/customize`,{params:{teamId:i}})}saveCustomizeStatuses(i,n){return this.httpClient.put(`${this.baseUrl}/statuses/customize`,n,{params:{teamId:i}})}createTask(i,n){return this.httpClient.post(`${this.baseUrl}`,n,{params:{teamId:i}})}updateTask(i,n){return this.httpClient.put(`${this.baseUrl}/${i}`,n)}toggleCompleteTask(i){return this.httpClient.put(`${this.baseUrl}/${i}/complete`,{})}getTaskNotes(i){return this.httpClient.get(`${this.baseUrl}/${i}/notes`)}createTaskNote(i,n,s){return this.httpClient.post(`${this.baseUrl}/${i}/notes`,s,{params:{teamId:n}})}deleteTaskNote(i){return this.httpClient.delete(`${this.baseUrl}/notes/${i}`)}exportTasks(i,n){let s=Bt(At({},n),{teamId:i});return this.httpClient.get(`${this.baseUrl}/export`,{params:Me(s),responseType:"blob"})}};e.\u0275fac=function(n){return new(n||e)(Nt(Ae))},e.\u0275prov=Ut({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var F=(()=>{let e=class e{constructor(i,n){this.teamsService=i,this.tasksApiService=n,this.refetchTasksSubject=new lt,this.refetchTasks$=this.refetchTasksSubject.asObservable()}deleteTaskById(i){return this.tasksApiService.deleteTaskById(i)}getStatusesWithTasks(i){return this.teamsService.currentTeam$.pipe(N(n=>n?this.tasksApiService.getStatusesWithTasks(n.id,i):b(()=>Error("No current team"))))}getStatusesWithoutTasks(){return this.teamsService.currentTeam$.pipe(N(i=>i?this.tasksApiService.getStatusesWithoutTasks(i.id):b(()=>Error("No current team"))))}getCustomizeStatuses(){return this.teamsService.currentTeam$.pipe(N(i=>i?this.tasksApiService.getCustomizeStatuses(i.id):b(()=>Error("No current team"))))}saveCustomizeStatuses(i){return this.teamsService.currentTeam$.pipe(N(n=>n?this.tasksApiService.saveCustomizeStatuses(n.id,i):b(()=>Error("No current team"))),E(n=>b(()=>n)))}createTask(i){return this.teamsService.currentTeam$.pipe(N(n=>n?this.tasksApiService.createTask(n.id,i):b(()=>Error("No current team"))),E(n=>b(()=>n)))}getTaskById(i){return this.tasksApiService.getTaskById(i)}updateTask(i,n){return this.tasksApiService.updateTask(i,n)}toggleCompleteTask(i){return this.tasksApiService.toggleCompleteTask(i)}deleteStatus(i){return this.teamsService.currentTeam$.pipe(N(n=>n?this.tasksApiService.deleteStatus(n.id,i):b(()=>Error("No current team"))),E(n=>b(()=>n)))}getTaskNotes(i){return this.tasksApiService.getTaskNotes(i)}deleteTaskNote(i){return this.tasksApiService.deleteTaskNote(i)}createTaskNote(i,n){return this.teamsService.currentTeam$.pipe(N(s=>s?this.tasksApiService.createTaskNote(i,s.id,n):b(()=>Error("No current team"))),E(s=>b(()=>s)))}exportTasks(i){return this.teamsService.currentTeam$.pipe(N(n=>n?this.tasksApiService.exportTasks(n.id,i):b(()=>Error("No current team"))),E(n=>b(()=>n)))}refetchTasks(){this.refetchTasksSubject.next()}};e.\u0275fac=function(n){return new(n||e)(Nt(K),Nt(ri))},e.\u0275prov=Ut({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var si=(t,e)=>e.id;function zi(t,e){if(t&1&&(a(0,"mat-option",11),l(1),o()),t&2){let r=e.$implicit;c("matTooltip",r.name)("value",r.id),m(),h(" ",r.name," ")}}function Li(t,e){if(t&1&&(a(0,"mat-option",11),l(1),o()),t&2){let r=e.$implicit;c("matTooltip",r.fullName)("value",r.id),m(),h(" ",r.fullName," ")}}var be=(()=>{let e=class e{constructor(i,n,s,p){this.dialogRef=i,this.teamsSevice=n,this.tasksService=s,this.data=p,this.form=this.createForm(),this.executors$=this.teamsSevice.getAllTeamMembers(),this.statuses$=this.tasksService.getStatusesWithoutTasks(),this.quillConfig={history:!0,toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link"],["clean"]]}},this.patchInitialValues()}onBackClick(){this.dialogRef.close()}onSubmit(){let i=this.form.getRawValue(),n={title:i.title,content:i.content,tag:i.tag,description:i.description,endDate:i.endDate,startDate:i.startDate,priority:i.priority,statusId:i.statusId,executorId:i.executorId};this.dialogRef.close(n)}patchInitialValues(){this.form.patchValue({statusId:this.data.statusId})}createForm(){return new it({title:new S("",[V.required]),description:new S("",[V.required]),tag:new S("",[V.required]),content:new S("",[]),statusId:new S(null,[V.required]),priority:new S(I.MEDIUM,[V.required]),executorId:new S(null,[]),startDate:new S(new Date),endDate:new S(null,[])})}};e.\u0275fac=function(n){return new(n||e)(_(ut),_(K),_(F),_(Mt))},e.\u0275cmp=x({type:e,selectors:[["app-create-task-dialog"]],decls:65,vars:12,consts:[["startDeadlinePicker",""],["endDeadlinePicker",""],["mat-dialog-title","",1,"ctask__title"],["mat-dialog-content","",1,"ctask"],[1,"ctask__form",3,"formGroup"],["appearance","outline"],["formControlName","title","matInput","","placeholder","Enter a title"],["cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5","formControlName","description","matInput","","placeholder","Write out small description"],["formControlName","content","theme","snow","placeholder","Main body (eg. steps, specifications and etc.)",1,"quill__editor",3,"modules"],[1,"row"],["formControlName","statusId"],[3,"matTooltip","value"],["formControlName","tag","matInput","","placeholder","Specify tag for task (eg. Development, Testing and etc.)"],["formControlName","priority"],["value","HIGH"],["value","MEDIUM"],["value","LOW"],["formControlName","executorId"],["matTooltip","Unassgined",3,"value"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","endDate",3,"matDatepicker"],["align","end"],["mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"click","disabled"]],template:function(n,s){if(n&1){let p=y();a(0,"h4",2),l(1,` Create new task
`),o(),a(2,"section",3)(3,"form",4)(4,"mat-form-field",5)(5,"mat-label"),l(6,"Title"),o(),d(7,"input",6),o(),a(8,"mat-form-field",5)(9,"mat-label"),l(10,"Description"),o(),d(11,"textarea",7),o(),d(12,"quill-editor",8),a(13,"div",9)(14,"mat-form-field",5)(15,"mat-label"),l(16,"Status"),o(),a(17,"mat-select",10),w(18,zi,2,3,"mat-option",11,si),M(20,"async"),o()(),a(21,"mat-form-field",5)(22,"mat-label"),l(23,"Tag"),o(),d(24,"input",12),o()(),a(25,"div",9)(26,"mat-form-field",5)(27,"mat-label"),l(28,"Priority"),o(),a(29,"mat-select",13)(30,"mat-option",14),l(31," High "),o(),a(32,"mat-option",15),l(33," Medium "),o(),a(34,"mat-option",16),l(35," Low "),o()()(),a(36,"mat-form-field",5)(37,"mat-label"),l(38,"Executor"),o(),a(39,"mat-select",17)(40,"mat-option",18),l(41," Unassgined "),o(),w(42,Li,2,3,"mat-option",11,si),M(44,"async"),o()()(),a(45,"div",9)(46,"mat-form-field",5)(47,"mat-label"),l(48,"Deadline Start"),o(),d(49,"input",19)(50,"mat-datepicker-toggle",20)(51,"mat-datepicker",null,0),o(),a(53,"mat-form-field",5)(54,"mat-label"),l(55,"Deadline End"),o(),d(56,"input",21)(57,"mat-datepicker-toggle",20)(58,"mat-datepicker",null,1),o()()()(),a(60,"mat-dialog-actions",22)(61,"button",23),C("click",function(){return k(p),v(s.onBackClick())}),l(62," Back "),o(),a(63,"button",24),C("click",function(){return k(p),v(s.onSubmit())}),l(64," Create "),o()()}if(n&2){let p=H(52),T=H(59);m(3),c("formGroup",s.form),m(9),c("modules",s.quillConfig),m(6),D(L(20,8,s.statuses$)),m(22),c("value",null),m(2),D(L(44,10,s.executors$)),m(7),c("matDatepicker",p),m(),c("for",p),m(6),c("matDatepicker",T),m(),c("for",T),m(6),c("disabled",s.form.invalid)}},dependencies:[U,Ct,rt,ht,wt,yt,xt,dt,ie,ne,Dt,st,_t,gt,ft,nt,Q,Y,et,ot,at,xe,W],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ql-toolbar.ql-snow{border-radius:6px 6px 0 0;background:#fff;padding:16px;border:1px solid #8e8e94}[_nghost-%COMP%]     .ql-editor{padding:16px;min-height:300px}[_nghost-%COMP%]     .ql-editor p{color:#242424}[_nghost-%COMP%]     .ql-editor.ql-blank:before{font-style:normal}[_nghost-%COMP%]     .ql-container.ql-snow{background:#fff;border-radius:0 0 6px 6px;border:1px solid #8e8e94}.ctask__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.ctask__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:22px}.ctask__form-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.row[_ngcontent-%COMP%]{display:flex;gap:22px}.quill__editor[_ngcontent-%COMP%]{width:100%;margin-bottom:1.6rem}"],changeDetection:0});let t=e;return t})();var Bi=["status",""],ji=(t,e)=>e.hexCode,pi=t=>({background:t});function Ri(t,e){t&1&&d(0,"div",11)}function Ui(t,e){if(t&1&&(a(0,"div")(1,"button",12)(2,"mat-icon"),l(3,"more_horiz"),o()()()),t&2){f();let r=H(15);m(),c("matMenuTriggerFor",r)}}function qi(t,e){if(t&1){let r=y();a(0,"button",13),C("click",function(n){let s=k(r).$implicit,p=f();return v(p.onSelectColor(n,s.hexCode))}),l(1),o()}if(t&2){let r=e.$implicit;c("ngStyle",B(2,pi,r.hexCode)),m(),h(" ",r.hexCode," ")}}var di=(()=>{let e=class e{constructor(){this.unsubscribe$=new lt,this.draggable=!1,this.showMoreButton=!1,this.statusChange=new kt,this.statusDelete=new kt,this.statusNameFormControl=new S("",[V.required]),this.colors=[{label:"Gray",hexCode:"#5B738B"},{label:"Red",hexCode:"#EE3939"},{label:"Orange",hexCode:"#E76500"},{label:"Green",hexCode:"#36A41D"},{label:"Teal",hexCode:"#049F9A"},{label:"Blue",hexCode:"#1B90FF"},{label:"Purple",hexCode:"#7858FF"},{label:"Pink",hexCode:"#F31DED"},{label:"Raspberry",hexCode:"#FA4F96"}]}ngOnInit(){this.statusNameFormControl.patchValue(this.status.name),this.statusNameFormControl.valueChanges.pipe(jt(),Rt(this.unsubscribe$)).subscribe(i=>{i&&(this.status.name=i,this.statusChange.emit(this.status))})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onSelectColor(i,n){i.preventDefault(),this.status.color=n,this.statusChange.emit(this.status)}onDeleteClick(i){i.preventDefault(),this.statusDelete.emit(this.status)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=x({type:e,selectors:[["app-customize-status-item","status",""]],inputs:{status:"status",draggable:"draggable",showMoreButton:"showMoreButton"},outputs:{statusChange:"statusChange",statusDelete:"statusDelete"},attrs:Bi,decls:21,vars:9,consts:[["colorPicker","matMenu"],["editMenu","matMenu"],["cdkDrag","",1,"sc__box",3,"cdkDragDisabled"],["cdkDragHandle","",1,"sc__drag-handler"],["class","sc__placeholder",4,"cdkDragPlaceholder"],[1,"sc__box-content"],[1,"sc__box-header"],[1,"sc__status-color",3,"ngStyle","matMenuTriggerFor"],["type","text",3,"formControl"],["mat-menu-item","",3,"ngStyle"],["mat-menu-item","",3,"click"],[1,"sc__placeholder"],[1,"sc__box-edit-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click","ngStyle"]],template:function(n,s){if(n&1){let p=y();a(0,"div",2)(1,"div",3)(2,"mat-icon"),l(3,"drag_indicator"),o()(),u(4,Ri,1,0,"div",4),a(5,"div",5)(6,"div",6),d(7,"span",7)(8,"input",8),o(),u(9,Ui,4,1,"div"),o()(),a(10,"mat-menu",null,0),w(12,qi,2,4,"button",9,ji),o(),a(14,"mat-menu",null,1)(16,"button",10),C("click",function(G){return k(p),v(s.onDeleteClick(G))}),a(17,"mat-icon"),l(18,"delete"),o(),a(19,"p"),l(20,"Delete"),o()()()}if(n&2){let p=H(11);c("cdkDragDisabled",!s.draggable),m(),Ve("hidden",!s.draggable),m(6),c("ngStyle",B(7,pi,s.status.color))("matMenuTriggerFor",p),m(),c("formControl",s.statusNameFormControl),m(),g(9,s.showMoreButton?9:-1),m(3),D(s.colors)}},dependencies:[pt,A,Qt,Kt,Yt,Q,Y,Ge,Jt,Ue,te],styles:[".sc__box[_ngcontent-%COMP%]{width:100%;padding:12px 10px;display:flex;align-items:center;gap:8px;border-radius:4px;border:1px solid #ccc;color:#242424}.sc__box-content[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.sc__box-edit-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sc__box-edit-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#a3a3a3;font-size:20px;width:20px;height:20px}.sc__box-header[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:8px}.sc__box-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.sc__status-color[_ngcontent-%COMP%]{min-width:14px;min-height:14px;border-radius:2px;background:#d0d6ee;cursor:pointer}.sc__placeholder[_ngcontent-%COMP%]{background:#e7e7e7;border:dotted 3px #c5c5c5;min-height:50px;transition:transform .25s cubic-bezier(0,0,.2,1);border-radius:4px}.sc__drag-handler[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:move}.sc__drag-handler[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px;color:#ccc}.hidden[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0});let t=e;return t})();function Gi(t,e){if(t&1&&d(0,"app-customize-status-item",4),t&2){let r=f(2);c("status",r.openStatus)("draggable",!1)}}function Wi(t,e){if(t&1){let r=y();a(0,"app-customize-status-item",12),C("statusDelete",function(n){k(r);let s=f(3);return v(s.onDeleteStatus(n))})("statusChange",function(n){k(r);let s=f(3);return v(s.onChangeStatus(n))}),o()}if(t&2){let r=e.$implicit;c("status",r)("draggable",!0)("showMoreButton",!0)}}function Ki(t,e){if(t&1){let r=y();a(0,"div",10),C("cdkDropListDropped",function(n){k(r);let s=f(2);return v(s.drop(n))}),w(1,Wi,1,3,"app-customize-status-item",11,St),o()}if(t&2){let r=f(2);m(),D(r.statuses)}}function Qi(t,e){}function Yi(t,e){if(t&1&&d(0,"app-customize-status-item",4),t&2){let r=f(2);c("status",r.doneStatus)("draggable",!1)}}function Xi(t,e){if(t&1){let r=y();a(0,"section",1)(1,"div",3)(2,"h5"),l(3,"Open Status"),o(),u(4,Gi,1,2,"app-customize-status-item",4),o(),a(5,"div",5)(6,"h5"),l(7,"Active statuses"),o(),u(8,Ki,3,0,"div",6)(9,Qi,0,0),o(),a(10,"div",7)(11,"button",8),C("click",function(){k(r);let n=f();return v(n.onAddStatusClick())}),l(12," + Add status "),o()(),a(13,"div",9)(14,"h5"),l(15,"Done Status"),o(),u(16,Yi,1,2,"app-customize-status-item",4),o()()}if(t&2){let r=f();m(4),g(4,r.openStatus?4:-1),m(4),g(8,r.statuses.length>0?8:9),m(8),g(16,r.doneStatus?16:-1)}}function Ji(t,e){if(t&1){let r=y();a(0,"mat-dialog-actions",2)(1,"button",8),C("click",function(){k(r);let n=f();return v(n.onBackClick())}),l(2," Back "),o(),a(3,"button",13),C("click",function(){k(r);let n=f();return v(n.onSubmit())}),l(4," Save "),o()()}}var ui=(()=>{let e=class e{constructor(i,n,s,p){this.dialogRef=i,this.cd=n,this.tasksService=s,this.data=p,this.openStatus=null,this.doneStatus=null,this.statuses=[]}ngOnInit(){this.tasksService.getCustomizeStatuses().pipe(P(1)).subscribe(i=>{this.openStatus=i.openStatus,this.doneStatus=i.doneStatus,this.statuses=i.regularStatuses,this.cd.markForCheck()})}onBackClick(){this.dialogRef.close()}onSubmit(){let i=this.statuses.map((s,p)=>(s.order=p+2,s)),n=Bt(At({},this.doneStatus),{order:i.length+2});this.dialogRef.close([this.openStatus,...i,n])}drop(i){Xt(this.statuses,i.previousIndex,i.currentIndex)}onDeleteStatus(i){let n=null;i.id?n=this.statuses.findIndex(s=>s.id===i.id):n=this.statuses.findIndex(s=>s.name===i.name&&s.color===i.color),n!==null&&(i.id&&this.tasksService.deleteStatus(i.id).pipe(P(1)).subscribe(),this.statuses.splice(n,1))}onChangeStatus(i){let n=this.findStatus(i);n&&(n.color=i.color,n.name=i.name)}findStatus(i){return this.statuses.find(n=>i.id&&n.id===i.id||n.name===i.name&&n.color===i.color)}onAddStatusClick(){this.statuses.push({name:"New Status",color:"#5B738B",type:ii.REGULAR})}get invalid(){return!this.openStatus||!this.doneStatus}};e.\u0275fac=function(n){return new(n||e)(_(ut),_(ct),_(F),_(Mt))},e.\u0275cmp=x({type:e,selectors:[["app-customize-dialog"]],decls:4,vars:2,consts:[["mat-dialog-title","",1,"sc__title"],["mat-dialog-content","",1,"sc"],["align","end"],[1,"sc__open"],[3,"status","draggable"],[1,"sc__statuses"],["cdkDropList","",1,"sc__list"],[1,"sc__add-status"],["mat-stroked-button","",3,"click"],[1,"sc__closed"],["cdkDropList","",1,"sc__list",3,"cdkDropListDropped"],[3,"status","draggable","showMoreButton"],[3,"statusDelete","statusChange","status","draggable","showMoreButton"],["type","submit","mat-flat-button","","color","primary",3,"click"]],template:function(n,s){n&1&&(a(0,"h4",0),l(1,` Customize statuses
`),o(),u(2,Xi,17,3,"section",1)(3,Ji,5,0,"mat-dialog-actions",2)),n&2&&(m(2),g(2,s.invalid?-1:2),m(),g(3,s.invalid?-1:3))},dependencies:[U,_t,gt,ft,Zt,di],styles:["[_nghost-%COMP%]     mat-dialog-actions{padding:24px}.sc__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.sc__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-height:60px;overflow-y:auto}.sc__drag-handler[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;cursor:move}.sc__drag-handler[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px;color:#ccc}.sc__box[_ngcontent-%COMP%]{padding:12px 10px;display:flex;align-items:center;gap:8px;border-radius:4px;border:1px solid #ccc;color:#242424}.sc__box-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.sc__toolbar[_ngcontent-%COMP%]{margin-top:22px;display:flex;align-items:center;gap:8px}.sc__placeholder[_ngcontent-%COMP%]{background:#e7e7e7;border:dotted 3px #c5c5c5;min-height:50px;transition:transform .25s cubic-bezier(0,0,.2,1);border-radius:4px}.sc__status-color[_ngcontent-%COMP%]{min-width:14px;min-height:14px;border-radius:2px;background:#d0d6ee;cursor:pointer}.sc__closed[_ngcontent-%COMP%], .sc__statuses[_ngcontent-%COMP%]{margin-top:1rem}.sc__add-status[_ngcontent-%COMP%]{margin-top:.5rem}h5[_ngcontent-%COMP%]{margin-bottom:6px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0});let t=e;return t})();var _i=Vi(Ni());var tn=(t,e)=>e.id;function en(t,e){if(t&1&&(a(0,"mat-option",10),l(1),o()),t&2){let r=e.$implicit;c("matTooltip",r)("value",r),m(),h(" ",r," ")}}function nn(t,e){t&1&&(a(0,"mat-option",13),l(1," My Tasks "),o()),t&2&&c("value",e.id.toString())}function on(t,e){if(t&1&&(a(0,"mat-option",10),l(1),o()),t&2){let r=e.$implicit;c("matTooltip",r.fullName)("value",r.id.toString()),m(),h(" ",r.fullName," ")}}function an(t,e){t&1&&w(0,on,2,3,"mat-option",10,tn),t&2&&D(e)}var fi=(()=>{let e=class e{constructor(i,n){this.dialogRef=i,this.teamsService=n,this.executors$=this.teamsService.getAllTeamMembers(),this.currentTeamMember$=this.teamsService.currentTeamMember$,this.views=["Table"],this.form=this.createForm()}onBackClick(){this.dialogRef.close()}onSubmit(){let i=this.form.getRawValue(),n={format:"EXCEL",startDate:i.startDate?i.startDate.toISOString():void 0,endDate:i.endDate?i.endDate.toISOString():void 0,executorId:i.executorId??void 0};this.dialogRef.close(n)}createForm(){let i=(0,_i.default)(),n=i.subtract(1,"month");return new it({executorId:new S(null,[V.required]),view:new S(this.views[0],[V.required]),startDate:new S(n.toDate(),[V.required]),endDate:new S(i.toDate(),[V.required])})}};e.\u0275fac=function(n){return new(n||e)(_(ut),_(K))},e.\u0275cmp=x({type:e,selectors:[["app-tasks-export-dialog"]],decls:35,vars:10,consts:[["picker",""],["mat-dialog-title","",1,"t-export__title"],["mat-dialog-content","",1,"t-export"],[1,"t-export__filters",3,"formGroup"],["appearance","outline"],[3,"rangePicker"],["matStartDate","","formControlName","startDate","placeholder","Start date"],["matEndDate","","formControlName","endDate","placeholder","End date"],["matIconSuffix","",3,"for"],["formControlName","view"],[3,"matTooltip","value"],["formControlName","executorId"],["matTooltip","All Unassigned",3,"value"],["matTooltip","My Tasks",3,"value"],["align","end"],["mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"click"]],template:function(n,s){if(n&1){let p=y();a(0,"h4",1),l(1,` Export tasks
`),o(),a(2,"section",2)(3,"form",3)(4,"mat-form-field",4)(5,"mat-label"),l(6,"Period"),o(),a(7,"mat-date-range-input",5),d(8,"input",6)(9,"input",7),o(),d(10,"mat-datepicker-toggle",8)(11,"mat-date-range-picker",null,0),o(),a(13,"mat-form-field",4)(14,"mat-label"),l(15,"View"),o(),a(16,"mat-select",9),w(17,en,2,3,"mat-option",10,St),o()(),a(19,"mat-form-field",4)(20,"mat-label"),l(21,"Executors"),o(),a(22,"mat-select",11)(23,"mat-option",12),l(24," All "),o(),u(25,nn,2,1,"mat-option",13),M(26,"async"),d(27,"mat-divider"),u(28,an,2,0),M(29,"async"),o()()()(),a(30,"mat-dialog-actions",14)(31,"button",15),C("click",function(){return k(p),v(s.onBackClick())}),l(32," Back "),o(),a(33,"button",16),C("click",function(){return k(p),v(s.onSubmit())}),l(34," Export "),o()()}if(n&2){let p,T,G=H(12);m(3),c("formGroup",s.form),m(4),c("rangePicker",G),m(3),c("for",G),m(7),D(s.views),m(6),c("value",null),m(2),g(25,(p=L(26,6,s.currentTeamMember$))?25:-1,p),m(3),g(28,(T=L(29,8,s.executors$))?28:-1,T)}},dependencies:[U,rt,ht,wt,xt,dt,le,Dt,Xe,Qe,Ye,Je,st,_t,gt,ft,nt,Q,Y,et,ot,at,W],styles:[".t-export__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.t-export__filters[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));align-items:start}"],changeDetection:0});let t=e;return t})();var gi=(t,e)=>e.id;function rn(t,e){if(t&1&&(a(0,"mat-option",11),l(1),o()),t&2){let r=e.$implicit;c("matTooltip",r.name)("value",r.id),m(),h(" ",r.name," ")}}function sn(t,e){if(t&1&&(a(0,"mat-option",11),l(1),o()),t&2){let r=e.$implicit;c("matTooltip",r.fullName)("value",r.id),m(),h(" ",r.fullName," ")}}var hi=(()=>{let e=class e{constructor(i,n,s,p){this.dialogRef=i,this.teamsService=n,this.tasksService=s,this.data=p,this.form=this.createForm(),this.executors$=this.teamsService.getAllTeamMembers(),this.statuses$=this.tasksService.getStatusesWithoutTasks(),this.quillConfig={history:!0,toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link"],["clean"]]}},this.patchExistingValues()}onBackClick(){this.dialogRef.close()}onSubmit(){let i=this.form.getRawValue(),n={title:i.title,content:i.content,tag:i.tag,description:i.description,endDate:i.endDate,startDate:i.startDate,priority:i.priority,statusId:i.statusId,executorId:i.executorId};this.dialogRef.close(n)}patchExistingValues(){let i=this.data.task;this.form.patchValue({title:i.title,description:i.description,tag:i.tag,content:i.content,statusId:i.status.id,priority:i.priority,executorId:i.executorMember?.id,startDate:i.startDate,endDate:i.endDate})}createForm(){return new it({title:new S("",[V.required]),description:new S("",[V.required]),tag:new S("",[V.required]),content:new S("",[]),statusId:new S(null,[V.required]),priority:new S(I.MEDIUM,[V.required]),executorId:new S(null,[]),startDate:new S(new Date),endDate:new S(null,[])})}};e.\u0275fac=function(n){return new(n||e)(_(ut),_(K),_(F),_(Mt))},e.\u0275cmp=x({type:e,selectors:[["app-update-task-dialog"]],decls:65,vars:13,consts:[["startDeadlinePicker",""],["endDeadlinePicker",""],["mat-dialog-title","",1,"utask__title"],["mat-dialog-content","",1,"utask"],[1,"utask__form",3,"formGroup"],["appearance","outline"],["formControlName","title","matInput","","placeholder","Enter a title"],["cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5","formControlName","description","matInput","","placeholder","Write out small description"],["formControlName","content","theme","snow","placeholder","Main body (eg. steps, specifications and etc.)",1,"quill__editor",3,"modules"],[1,"row"],["formControlName","statusId"],[3,"matTooltip","value"],["formControlName","tag","matInput","","placeholder","Specify tag for task (eg. Development, Testing and etc.)"],["formControlName","priority"],["value","HIGH"],["value","MEDIUM"],["value","LOW"],["formControlName","executorId"],["matTooltip","Unassgined",3,"value"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","endDate",3,"matDatepicker"],["align","end"],["mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"click","disabled"]],template:function(n,s){if(n&1){let p=y();a(0,"h4",2),l(1),o(),a(2,"section",3)(3,"form",4)(4,"mat-form-field",5)(5,"mat-label"),l(6,"Title"),o(),d(7,"input",6),o(),a(8,"mat-form-field",5)(9,"mat-label"),l(10,"Description"),o(),d(11,"textarea",7),o(),d(12,"quill-editor",8),a(13,"div",9)(14,"mat-form-field",5)(15,"mat-label"),l(16,"Status"),o(),a(17,"mat-select",10),w(18,rn,2,3,"mat-option",11,gi),M(20,"async"),o()(),a(21,"mat-form-field",5)(22,"mat-label"),l(23,"Tag"),o(),d(24,"input",12),o()(),a(25,"div",9)(26,"mat-form-field",5)(27,"mat-label"),l(28,"Priority"),o(),a(29,"mat-select",13)(30,"mat-option",14),l(31," High "),o(),a(32,"mat-option",15),l(33," Medium "),o(),a(34,"mat-option",16),l(35," Low "),o()()(),a(36,"mat-form-field",5)(37,"mat-label"),l(38,"Executor"),o(),a(39,"mat-select",17)(40,"mat-option",18),l(41," Unassgined "),o(),w(42,sn,2,3,"mat-option",11,gi),M(44,"async"),o()()(),a(45,"div",9)(46,"mat-form-field",5)(47,"mat-label"),l(48,"Deadline Start"),o(),d(49,"input",19)(50,"mat-datepicker-toggle",20)(51,"mat-datepicker",null,0),o(),a(53,"mat-form-field",5)(54,"mat-label"),l(55,"Deadline End"),o(),d(56,"input",21)(57,"mat-datepicker-toggle",20)(58,"mat-datepicker",null,1),o()()()(),a(60,"mat-dialog-actions",22)(61,"button",23),C("click",function(){return k(p),v(s.onBackClick())}),l(62," Back "),o(),a(63,"button",24),C("click",function(){return k(p),v(s.onSubmit())}),l(64," Update "),o()()}if(n&2){let p=H(52),T=H(59);m(),h(" Update Task #",s.data.task.id,`
`),m(2),c("formGroup",s.form),m(9),c("modules",s.quillConfig),m(6),D(L(20,9,s.statuses$)),m(22),c("value",null),m(2),D(L(44,11,s.executors$)),m(7),c("matDatepicker",p),m(),c("for",p),m(6),c("matDatepicker",T),m(),c("for",T),m(6),c("disabled",s.form.invalid)}},dependencies:[U,Ct,rt,ht,wt,yt,xt,dt,ie,ne,Dt,st,_t,gt,ft,nt,Q,Y,et,ot,at,xe,W],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ql-toolbar.ql-snow{border-radius:6px 6px 0 0;background:#fff;padding:16px;border:1px solid #8e8e94}[_nghost-%COMP%]     .ql-editor{padding:16px;min-height:300px}[_nghost-%COMP%]     .ql-editor p{color:#242424}[_nghost-%COMP%]     .ql-editor.ql-blank:before{font-style:normal}[_nghost-%COMP%]     .ql-container.ql-snow{background:#fff;border-radius:0 0 6px 6px;border:1px solid #8e8e94}.utask__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.utask__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:22px}.utask__form-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.row[_ngcontent-%COMP%]{display:flex;gap:22px}.quill__editor[_ngcontent-%COMP%]{width:100%;margin-bottom:1.6rem}"],changeDetection:0});let t=e;return t})();function Ci(t){switch(t){case I.HIGH:return"High";case I.MEDIUM:return"Medium";case I.LOW:return"Low"}}var ln=["task",""];function mn(t,e){if(t&1&&(a(0,"p",5),l(1),M(2,"date"),o()),t&2){let r=f();m(),h(" ",R(2,1,r.task.endDate,"MMM d, y,")," ")}}function cn(t,e){t&1&&(a(0,"p",5),l(1,"Unset"),o())}var xi=(()=>{let e=class e{get getPriority(){return Ci(this.task.priority)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=x({type:e,selectors:[["app-task-details-sidebar","task",""]],inputs:{task:"task"},attrs:ln,decls:42,vars:11,consts:[[1,"sidebar"],[1,"sidebar__title"],[1,"sidebar__details"],[1,"sidebar__details-item"],[1,"sidebar__details-item-label"],[1,"sidebar__details-item-value"],["mat-stroked-button","",1,"sidebar__attached"]],template:function(n,s){if(n&1&&(a(0,"aside",0)(1,"h5",1),l(2,"Details"),o(),a(3,"div",2)(4,"div",3)(5,"p",4),l(6,"Task Number:"),o(),a(7,"p",5),l(8),o()(),a(9,"div",3)(10,"p",4),l(11,"Status:"),o(),a(12,"p",5),l(13),o()(),a(14,"div",3)(15,"p",4),l(16,"Tag:"),o(),a(17,"p",5),l(18),o()(),a(19,"div",3)(20,"p",4),l(21,"Priority:"),o(),a(22,"p",5),l(23),o()(),a(24,"div",3)(25,"p",4),l(26,"Executor:"),o(),a(27,"p",5),l(28),o()(),a(29,"div",3)(30,"p",4),l(31,"Star date:"),o(),a(32,"p",5),l(33),M(34,"date"),o()(),a(35,"div",3)(36,"p",4),l(37,"End date:"),o(),u(38,mn,3,4,"p",5)(39,cn,2,0,"p",5),o()(),a(40,"button",6),l(41," Attached files "),o()()),n&2){let p;m(8),h("Task #",s.task.id,""),m(5),j(s.task.status.name),m(5),j(s.task.tag),m(5),j(s.getPriority),m(5),h(" ",(p=s.task.executorMember==null?null:s.task.executorMember.fullName)!==null&&p!==void 0?p:"Unassigned"," "),m(5),h(" ",R(34,8,s.task.startDate,"MMM d, y,")," "),m(5),g(38,s.task.endDate?38:-1),m(),g(39,s.task.endDate?-1:39)}},dependencies:[U,Z],styles:[".sidebar[_ngcontent-%COMP%]{position:sticky;top:0;left:0;right:0;min-width:300px;background:#fff;border-radius:8px;padding:22px}.sidebar__title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.sidebar__details[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}.sidebar__details-item-label[_ngcontent-%COMP%]{font-size:12px;color:#8d8d8d}.sidebar__attached[_ngcontent-%COMP%]{margin-top:1rem;width:100%}"],changeDetection:0});let t=e;return t})();var dn=["task",""],un=t=>[t],Ft=(()=>{let e=class e{constructor(i,n,s){this.dialog=i,this.tasksService=n,this.toastService=s}onEditClick(i){i.stopPropagation(),this.dialog.open(hi,{minWidth:"60%",data:{task:this.task}}).afterClosed().pipe(N(s=>s?this.tasksService.updateTask(this.task.id,s):mt),E(s=>(this.toastService.error("Failed to update task"),b(()=>s))),P(1)).subscribe(()=>{this.toastService.open("Successfully updated task"),this.tasksService.refetchTasks()})}onDeleteClick(i){i.stopPropagation(),this.tasksService.deleteTaskById(this.task.id).pipe(E(n=>(this.toastService.error("Failed to delete task"),b(()=>n))),P(1)).subscribe(()=>{this.toastService.open("Successfully deleted a task"),this.tasksService.refetchTasks()})}onMoreButtonClick(i){i.stopPropagation()}};e.\u0275fac=function(n){return new(n||e)(_(Tt),_(F),_(q))},e.\u0275cmp=x({type:e,selectors:[["app-task-more-menu","task",""]],inputs:{task:"task"},attrs:dn,decls:20,vars:4,consts:[["viewsMenu","matMenu"],[1,"task-more-button",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(n,s){if(n&1){let p=y();a(0,"button",1),C("click",function(G){return k(p),v(s.onMoreButtonClick(G))}),a(1,"mat-icon"),l(2,"more_vert"),o()(),a(3,"mat-menu",null,0)(5,"button",2)(6,"mat-icon"),l(7,"remove_red_eye"),o(),a(8,"span"),l(9,"View"),o()(),a(10,"button",3),C("click",function(G){return k(p),v(s.onEditClick(G))}),a(11,"mat-icon"),l(12,"edit"),o(),a(13,"span"),l(14,"Edit"),o()(),a(15,"button",3),C("click",function(G){return k(p),v(s.onDeleteClick(G))}),a(16,"mat-icon"),l(17,"delete"),o(),a(18,"span"),l(19,"Delete"),o()()()}if(n&2){let p=H(4);c("matMenuTriggerFor",p),m(5),c("routerLink",B(2,un,s.task.id))}},dependencies:[tt,A,Qt,Kt,Yt],styles:[".task-more-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px}"],changeDetection:0});let t=e;return t})();var _n=["note",""];function fn(t,e){if(t&1){let r=y();a(0,"div",6)(1,"mat-icon",7),C("click",function(){k(r);let n=f();return v(n.deleteNote(n.note.id))}),l(2," delete "),o()()}}var ki=(()=>{let e=class e{constructor(i){this.teamsService=i,this.delete=new kt,this.isEditable=!1}ngOnInit(){this.checkIfEditable()}deleteNote(i){this.delete.emit(i)}checkIfEditable(){this.teamsService.currentTeamMember$.pipe(P(1)).subscribe(i=>{i&&(this.isEditable=i.id===this.note.teamMemberId)})}};e.\u0275fac=function(n){return new(n||e)(_(K))},e.\u0275cmp=x({type:e,selectors:[["app-task-note-item","note",""]],inputs:{note:"note"},outputs:{delete:"delete"},attrs:_n,decls:11,vars:7,consts:[[1,"task__notes-item"],[1,"task__notes-item-main"],[1,"task__notes-item-header"],[1,"task__notes-item-header-title"],[1,"task__notes-item-header-date"],[1,"task__notes-item-body"],[1,"task__notes-item-actions"],["matTooltip","Delete",3,"click"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),l(4),o(),a(5,"p",4),l(6),M(7,"date"),o()(),a(8,"div",5),l(9),o()(),u(10,fn,3,0,"div",6),o()),n&2&&(m(4),j(s.note.authorFullName),m(2),h(" ",R(7,4,s.note.createdDate,"MMM d, y")," "),m(3),h(" ",s.note.content," "),m(),g(10,s.isEditable?10:-1))},dependencies:[A,st,Z],styles:[".task__notes-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-radius:8px;gap:60px}.task__notes-item-main[_ngcontent-%COMP%]{flex:1}.task__notes-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.task__notes-item-header-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.task__notes-item-header-date[_ngcontent-%COMP%]{font-size:12px;color:#979797}.task__notes-item-body[_ngcontent-%COMP%]{margin-top:6px;font-size:14px}.task__notes-item-actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#49515a;cursor:pointer;font-size:20px;width:20px;height:20px}"],changeDetection:0});let t=e;return t})();var hn=["task",""],Cn=(t,e)=>e.id;function xn(t,e){if(t&1){let r=y();a(0,"app-task-note-item",8),C("delete",function(n){k(r);let s=f(2);return v(s.deleteNote(n))}),o()}if(t&2){let r=e.$implicit;c("note",r)}}function kn(t,e){t&1&&(a(0,"div",6),w(1,xn,1,1,"app-task-note-item",7,Cn),o()),t&2&&(m(),D(e))}var vi=(()=>{let e=class e{constructor(i,n,s){this.tasksService=i,this.toastrService=n,this.cd=s,this.taskNotes$=Pe([]),this.isEditable=!1,this.form=new it({content:new S("",[V.required])})}ngOnInit(){this.taskNotes$=this.tasksService.getTaskNotes(this.task.id)}createNote(){let i=this.form.getRawValue();if(this.form.invalid||!i.content){this.toastrService.error("Form is invalid");return}let n={content:i.content};this.tasksService.createTaskNote(this.task.id,n).pipe(E(s=>(this.toastrService.error("Failed to create task note"),b(()=>s))),P(1)).subscribe(()=>{this.taskNotes$=this.tasksService.getTaskNotes(this.task.id),this.form.patchValue({content:""}),this.cd.markForCheck()})}deleteNote(i){this.tasksService.deleteTaskNote(i).pipe(E(n=>(this.toastrService.error("Failed to delete task note"),b(()=>n))),P(1)).subscribe(()=>{this.taskNotes$=this.tasksService.getTaskNotes(this.task.id),this.cd.markForCheck()})}};e.\u0275fac=function(n){return new(n||e)(_(F),_(q),_(ct))},e.\u0275cmp=x({type:e,selectors:[["app-task-notes","task",""]],inputs:{task:"task"},attrs:hn,decls:13,vars:5,consts:[[1,"task__notes"],[1,"task__notes-title"],[1,"task__notes-form",3,"formGroup"],["appearance","outline"],["formControlName","content","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","placeholder","Leave a note"],["mat-stroked-button","","type","submit",1,"task__notes-send",3,"click","disabled"],[1,"task__notes-list"],[3,"note"],[3,"delete","note"]],template:function(n,s){if(n&1&&(a(0,"div",0)(1,"h4",1),l(2,"Notes"),o(),a(3,"form",2)(4,"mat-form-field",3),d(5,"textarea",4),o(),a(6,"button",5),C("click",function(){return s.createNote()}),a(7,"mat-icon"),l(8,"send"),o(),a(9,"span"),l(10,"Send"),o()()(),u(11,kn,3,0,"div",6),M(12,"async"),o()),n&2){let p;m(3),c("formGroup",s.form),m(3),c("disabled",s.form.invalid),m(5),g(11,(p=L(12,3,s.taskNotes$))?11:-1,p)}},dependencies:[A,U,Ct,rt,yt,nt,Q,Y,et,ot,at,ki,W],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.task__notes[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:22px}.task__notes-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.task__notes-form[_ngcontent-%COMP%]{margin-top:1rem}.task__notes-send[_ngcontent-%COMP%]{margin-top:-12px;float:right}.task__notes-list[_ngcontent-%COMP%]{margin-top:3rem;display:flex;flex-direction:column;gap:2rem}.task__notes-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-radius:8px}.task__notes-item-main[_ngcontent-%COMP%]{flex:1}.task__notes-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.task__notes-item-header-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.task__notes-item-header-date[_ngcontent-%COMP%]{font-size:12px;color:#979797}.task__notes-item-body[_ngcontent-%COMP%]{margin-top:6px;font-size:14px}.task__notes-item-actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#49515a;cursor:pointer;font-size:20px;width:20px;height:20px}"],changeDetection:0});let t=e;return t})();var bn=(t,e)=>e.id;function Sn(t,e){if(t&1&&(a(0,"mat-option",7),l(1),o()),t&2){let r=e.$implicit;c("matTooltip",r)("value",r),m(),h(" ",r," ")}}function Mn(t,e){t&1&&(a(0,"mat-option",10),l(1," My Tasks "),o()),t&2&&c("value",e.id.toString())}function Tn(t,e){if(t&1&&(a(0,"mat-option",7),l(1),o()),t&2){let r=e.$implicit;c("matTooltip",r.fullName)("value",r.id.toString()),m(),h(" ",r.fullName," ")}}function yn(t,e){t&1&&w(0,Tn,2,3,"mat-option",7,bn),t&2&&D(e)}var Si=(()=>{let e=class e{constructor(i,n,s,p){this.router=i,this.route=n,this.teamsService=s,this.cd=p,this.expanded=!1,this.filter=new kt,this.destroy$=new lt,this.executors$=this.teamsService.getAllTeamMembers(),this.currentTeamMember$=this.teamsService.currentTeamMember$,this.views=["List","Kanban","Table"],this.form=new it({executorId:new S,view:new S,searchValue:new S})}ngOnInit(){this.patchInitialFormValues(),this.trackFormValueChanges()}ngOnDestroy(){this.destroy$.complete()}patchInitialFormValues(){let i=this.getQueryParameters();this.form.patchValue({executorId:i.executorId,view:i.view,searchValue:i.searchValue}),this.filter.emit(i),this.cd.detectChanges()}trackFormValueChanges(){this.form.valueChanges.pipe(Ie(800),jt(),Rt(this.destroy$)).subscribe(i=>{let n={searchValue:i.searchValue??void 0,view:i.view??void 0,executorId:i.executorId??void 0};this.saveQueryParameters(n),this.filter.emit(n)})}saveQueryParameters(i){this.router.navigate([],{queryParams:qe(i),queryParamsHandling:"merge"})}getQueryParameters(){let i={executorId:void 0,searchValue:"",view:this.views[1]},n=this.route.snapshot.queryParams;return He(n,i)}};e.\u0275fac=function(n){return new(n||e)(_(Be),_(Wt),_(K),_(ct))},e.\u0275cmp=x({type:e,selectors:[["app-tasks-filter"]],inputs:{expanded:"expanded"},outputs:{filter:"filter"},decls:30,vars:9,consts:[[1,"filter"],[3,"expanded"],[1,"filter__fields",3,"formGroup"],["appearance","outline"],["matPrefix",""],["matInput","","type","text","formControlName","searchValue"],["formControlName","view"],[3,"matTooltip","value"],["formControlName","executorId"],["matTooltip","All Unassigned",3,"value"],["matTooltip","My Tasks",3,"value"]],template:function(n,s){if(n&1&&(a(0,"section",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),l(5,"Filters"),o()(),a(6,"form",2)(7,"mat-form-field",3)(8,"mat-label"),l(9,"Search"),o(),a(10,"mat-icon",4),l(11,"search"),o(),d(12,"input",5),o(),a(13,"mat-form-field",3)(14,"mat-label"),l(15,"View"),o(),a(16,"mat-select",6),w(17,Sn,2,3,"mat-option",7,St),o()(),a(19,"mat-form-field",3)(20,"mat-label"),l(21,"Executors"),o(),a(22,"mat-select",8)(23,"mat-option",9),l(24," All "),o(),u(25,Mn,2,1,"mat-option",10),M(26,"async"),d(27,"mat-divider"),u(28,yn,2,0),M(29,"async"),o()()()()()()),n&2){let p,T;m(2),c("expanded",s.expanded),m(4),c("formGroup",s.form),m(11),D(s.views),m(6),c("value",null),m(2),g(25,(p=L(26,5,s.currentTeamMember$))?25:-1,p),m(3),g(28,(T=L(29,7,s.executors$))?28:-1,T)}},dependencies:[A,se,oe,ae,re,Ct,rt,ht,We,xt,dt,le,st,nt,Q,Y,et,ot,at,W],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter[_ngcontent-%COMP%]{margin-top:22px}.filter__fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;align-items:start}"],changeDetection:0});let t=e;return t})();var Mi=(()=>{let e=class e{constructor(i,n,s,p){this.dialog=i,this.tasksService=n,this.toastService=s,this.filesService=p}onAddNewClick(i){i.stopPropagation(),this.dialog.open(be,{minWidth:"70%",data:{}}).afterClosed().pipe(N(s=>s?this.tasksService.createTask(s):mt),E(s=>(this.toastService.open("Failed to create a task"),b(()=>s))),P(1)).subscribe(()=>{this.toastService.open("Successfully created task"),this.tasksService.refetchTasks()})}onCustomizeClick(){this.dialog.open(ui,{minWidth:"30%"}).afterClosed().pipe(N(n=>n?this.tasksService.saveCustomizeStatuses(n):mt),E(n=>(this.toastService.open("Failed to save statuses"),b(()=>n))),P(1)).subscribe(()=>{this.toastService.open("Successfully saved statuses"),this.tasksService.refetchTasks()})}onExportClick(){this.dialog.open(fi,{minWidth:"30%"}).afterClosed().pipe(N(n=>n?this.tasksService.exportTasks(n):mt),E(n=>(this.toastService.error("Failed to export the tasks"),b(()=>n))),P(1)).subscribe(n=>{this.filesService.downloadBlob(n),this.toastService.open("Successfully exported the tasks"),this.tasksService.refetchTasks()})}};e.\u0275fac=function(n){return new(n||e)(_(Tt),_(F),_(q),_(ai))},e.\u0275cmp=x({type:e,selectors:[["app-tasks-toolbar"]],decls:14,vars:0,consts:[[1,"tasks__toolbar"],[1,"tasks__toolbar-left"],[1,"tasks__toolbar-title"],[1,"tasks__toolbar-right"],["variant","outline","icon","settings",1,"tasks__toolbar-item",3,"click"],["variant","outline","icon","download",1,"tasks__toolbar-item",3,"click"],["icon","add",1,"tasks__toolbar-item",3,"click"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"Tasks"),o()(),a(4,"div",3)(5,"app-button",4),C("click",function(){return s.onCustomizeClick()}),a(6,"p"),l(7,"Customize"),o()(),a(8,"app-button",5),C("click",function(){return s.onExportClick()}),a(9,"p"),l(10,"Export"),o()(),a(11,"app-button",6),C("click",function(T){return s.onAddNewClick(T)}),a(12,"p"),l(13,"Add"),o()()()())},dependencies:[ti],styles:["h1[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.tasks__toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;justify-content:space-between;overflow-x:auto;overflow-y:hidden}.tasks__toolbar-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.tasks__toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}@media (max-width: 40em){.tasks__toolbar-left[_ngcontent-%COMP%]{display:none}}.tasks__toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.tasks__toolbar-item[_ngcontent-%COMP%]{text-overflow:ellipsis;text-wrap:nowrap}"],changeDetection:0});let t=e;return t})();var En=t=>[t],Pn=t=>({background:t}),In=()=>({background:"#cedff8"});function On(t,e){t&1&&d(0,"div",15)}function Fn(t,e){if(t&1&&(a(0,"span"),l(1),M(2,"date"),o()),t&2){let r=f(2);m(),h(" - ",R(2,1,r.task.endDate,"MMMM d")," ")}}function Vn(t,e){if(t&1&&(a(0,"div",12),d(1,"ngx-avatars",16),a(2,"p",17),l(3),o()()),t&2){let r=f(2);m(),$e("src","api/v1/files/",r.task.executorMember,""),c("name",r.task.executorMember.fullName),m(2),j(r.task.executorMember.fullName)}}function Nn(t,e){t&1&&(a(0,"div",18)(1,"mat-icon",19),l(2,"person_outline"),o(),a(3,"p",17),l(4,"Unassigned"),o()())}function $n(t,e){if(t&1&&(a(0,"div",0),u(1,On,1,0,"div",1),a(2,"div",2)(3,"h5",3),l(4),o(),d(5,"app-task-more-menu",4),o(),a(6,"div",5)(7,"p"),l(8),o()(),a(9,"div",6)(10,"div",7)(11,"p",8),l(12),o()(),a(13,"div",7)(14,"p",8),l(15),o()()(),a(16,"div",9)(17,"mat-icon",10),l(18,"access_time"),o(),a(19,"span"),l(20),M(21,"date"),o(),u(22,Fn,3,4,"span"),o(),a(23,"div",11)(24,"div"),u(25,Vn,4,4,"div",12)(26,Nn,5,0),o(),a(27,"div",13)(28,"mat-icon",14),l(29,"comment_outline"),o(),a(30,"p"),l(31),o()()()()),t&2){let r=f();c("cdkDragData",r.task),m(3),c("routerLink",B(16,En,r.task.id)),m(),h(" ",r.task.title," "),m(),c("task",r.task),m(3),h(" ",r.task.description," "),m(2),c("ngStyle",B(18,Pn,r.taskPriorityColor)),m(2),j(r.taskPriority),m(),c("ngStyle",$t(20,In)),m(2),j(r.task.tag),m(5),h(" ",R(21,13,r.task.startDate,"MMMM d")," "),m(2),g(22,r.task.endDate?22:-1),m(3),g(25,r.task.executorMember?25:26),m(6),j(r.task.notesAmount)}}var Ti=(()=>{let e=class e{constructor(){this.task=null}get taskPriority(){switch(this.task?.priority){case I.HIGH:return"High";case I.MEDIUM:return"Medium";case I.LOW:return"Low";default:return""}}get taskPriorityColor(){switch(this.task?.priority){case I.HIGH:return"#FFA500";case I.MEDIUM:return"#8ce98c";case I.LOW:return"#08FFFF";default:return""}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=x({type:e,selectors:[["app-kanban-item"]],inputs:{task:"task"},decls:1,vars:1,consts:[["cdkDrag","",1,"task",3,"cdkDragData"],["class","task__placeholder",4,"cdkDragPlaceholder"],[1,"task__header"],[1,"task__header-title",3,"routerLink"],[3,"task"],[1,"task__description"],[1,"task__tags"],[1,"task__tags-item",3,"ngStyle"],[1,"task__tags-body"],[1,"task__dates"],[1,"task__dates-icon"],[1,"task__footer"],[1,"task__footer-executor-card"],[1,"task__footer-comments"],[1,"task__footer-comments-icon"],[1,"task__placeholder"],["size","22","bgColor","#64748B",3,"src","name"],[1,"task__footer-executor-label"],[1,"task__footer-executor"],[1,"task__footer-executor-icon"]],template:function(n,s){n&1&&u(0,$n,32,21,"div",0),n&2&&g(0,s.task?0:-1)},dependencies:[pt,tt,A,Jt,te,je,Ft,Z],styles:[".task[_ngcontent-%COMP%]{width:100%;overflow-x:hidden;padding:12px 0;border-radius:6px;background:#fff;border:1px solid #e9e9e9}.task__placeholder[_ngcontent-%COMP%]{background:#fafafa;border:dotted 3px #e4e3e3;border-radius:6px;min-height:200px;width:100%;transition:transform .25s cubic-bezier(0,0,.2,1)}.task__header[_ngcontent-%COMP%]{padding:0 16px;display:flex;justify-content:space-between;align-items:center;gap:8px}.task__header-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;cursor:pointer}.task__description[_ngcontent-%COMP%]{padding:0 16px;margin-top:8px}.task__description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;font-size:12px;color:#575757}.task__tags[_ngcontent-%COMP%]{padding:0 16px;margin-top:12px;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.task__tags-item[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px;background:#d5e5f7;border-radius:4px;text-overflow:clip;overflow:hidden}.task__dates[_ngcontent-%COMP%]{padding:0 16px;display:flex;align-items:center;gap:8px;margin-top:12px}.task__dates-icon[_ngcontent-%COMP%]{font-weight:500;width:16px;height:16px;font-size:16px}.task__dates[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.task__footer[_ngcontent-%COMP%]{padding:12px 16px 0;margin-top:12px;border-top:1px solid #e9e9e9;display:flex;align-items:center;justify-content:space-between}.task__footer-executor[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.task__footer-executor-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.task__footer-executor-icon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px}.task__footer-executor-label[_ngcontent-%COMP%]{font-size:12px}.task__footer-comments[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.task__footer-comments-icon[_ngcontent-%COMP%]{width:14px;height:14px;font-size:14px}.task__footer-comments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.cdk-drag-preview[_ngcontent-%COMP%]{padding:12px 0;background:#fff;border:1px solid #e9e9e9;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0});let t=e;return t})();var Ln=["column",""],An=(t,e)=>e.id,Bn=t=>({"border-bottom":t});function jn(t,e){if(t&1&&d(0,"app-kanban-item",6),t&2){let r=e.$implicit;c("task",r)}}function Rn(t,e){if(t&1){let r=y();a(0,"div",0)(1,"div",1)(2,"h4",2),l(3),o(),a(4,"div",3)(5,"button",4),C("click",function(){k(r);let n=f();return v(n.onAddButtonClick())}),a(6,"mat-icon"),l(7,"add"),o(),a(8,"p"),l(9,"Add"),o()()()(),a(10,"div",5),C("cdkDropListDropped",function(n){k(r);let s=f();return v(s.onDrop(n))}),w(11,jn,1,1,"app-kanban-item",6,An),o()()}if(t&2){let r=f();m(),c("ngStyle",B(6,Bn,r.getColumnBorderBottomStyle)),m(2),ze("",r.column.name," (",r.getColumnTasksCount,")"),m(7),c("id",r.getColumnStringId)("cdkDropListConnectedTo",r.connectedColumns)("cdkDropListData",r.column.tasks),m(),D(r.column.tasks)}}var yi=(()=>{let e=class e{constructor(i,n,s){this.tasksService=i,this.toastrService=n,this.dialog=s,this.connectedColumns=[]}onDrop(i){if(i.previousContainer===i.container)Xt(i.container.data,i.previousIndex,i.currentIndex);else{let n=i.item.data,s=i.container.id,p=Number(n.id),T=Number(s);if(isNaN(T)||isNaN(p)){this.toastrService.open("The current status or task id is not a number");return}Re(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex),this.tasksService.updateTask(p,{statusId:T,executorId:n.executorMember?.id}).pipe(E(G=>(this.toastrService.error("Failed to change status of task. Reload the page"),b(()=>G))),P(1)).subscribe()}}onAddButtonClick(){this.dialog.open(be,{minWidth:"70%",data:{statusId:this.column.id}}).afterClosed().pipe(N(n=>n?this.tasksService.createTask(n):mt),E(n=>(this.toastrService.open("Failed to create a task"),b(()=>n))),P(1)).subscribe(()=>{this.toastrService.open("Successfully created task"),this.tasksService.refetchTasks()})}get getColumnTasksCount(){return this.column.tasks.length}get getColumnBorderBottomStyle(){return`2px solid ${this.column.color}`}get getColumnStringId(){return`${this.column.id}`}};e.\u0275fac=function(n){return new(n||e)(_(F),_(q),_(Tt))},e.\u0275cmp=x({type:e,selectors:[["app-kanban-column","column",""]],inputs:{column:"column",connectedColumns:"connectedColumns"},attrs:Ln,decls:1,vars:1,consts:[[1,"column"],[1,"column__header",3,"ngStyle"],[1,"column__header-title"],[1,"column__header-toolbar"],[3,"click"],["cdkDropList","",1,"column__container",3,"cdkDropListDropped","id","cdkDropListConnectedTo","cdkDropListData"],[3,"task"]],template:function(n,s){n&1&&u(0,Rn,13,8,"div",0),n&2&&g(0,s.column?0:-1)},dependencies:[pt,A,Zt,Ti],styles:[".column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;width:320px;height:100%;border-radius:6px}.column__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;gap:12px;overflow-y:auto}.column__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:.8rem 1rem;background:#fff;border-bottom:2px solid #263fb9;border:1px solid #e9e9e9;margin-bottom:12px;border-radius:6px 6px 0 0;transition:all .5s ease}.column__header[_ngcontent-%COMP%]:hover   .column__header-toolbar[_ngcontent-%COMP%]{visibility:visible;transition:all .5s ease}.column__header-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.column__header-toolbar[_ngcontent-%COMP%]{visibility:hidden;display:flex;align-items:center;gap:12px}@media (max-width: 40em){.column__header-toolbar[_ngcontent-%COMP%]{visibility:visible}}.column__header-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;background:#f0f0f0c0;padding:4px 6px;border-radius:4px}.column__header-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.column__header-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0});let t=e;return t})();var Vt=(()=>{let e=class e{constructor(){this._connectedColumns=[],this._columns=[]}set columns(i){this._connectedColumns=i.map(n=>n.id.toLocaleString()),this._columns=i}get columns(){return this._columns}get connectedColumns(){return this._connectedColumns}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=x({type:e,selectors:[["app-tasks-base-view"]],inputs:{columns:"columns"},decls:0,vars:0,template:function(n,s){},encapsulation:2,changeDetection:0});let t=e;return t})();var qn=(t,e)=>e.id;function Hn(t,e){if(t&1&&d(0,"app-kanban-column",2),t&2){let r=e.$implicit,i=f();c("column",r)("connectedColumns",i.connectedColumns)}}var wi=(()=>{let e=class e extends Vt{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Gt(e)))(s||e)}})(),e.\u0275cmp=x({type:e,selectors:[["app-kanban-board-view"]],features:[bt],decls:4,vars:0,consts:[[1,"board"],[1,"columns"],[3,"column","connectedColumns"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"div",1),w(2,Hn,1,2,"app-kanban-column",2,qn),o()()),n&2&&(m(2),D(s.columns))},dependencies:[yi],styles:[".board[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow-x:auto;padding-bottom:10px}.columns[_ngcontent-%COMP%]{display:flex;gap:1.4rem;flex-grow:1}"],changeDetection:0});let t=e;return t})();var Qn=t=>({"background-color":t}),Yn=t=>[t];function Xn(t,e){t&1&&d(0,"th",17)}function Jn(t,e){if(t&1){let r=y();a(0,"td",18)(1,"mat-checkbox",19),C("click",function(n){let s=k(r).$implicit,p=f(2);return v(p.completeTask(s,n))}),o()()}if(t&2){let r=e.$implicit;m(),c("checked",r.completed)}}function Zn(t,e){t&1&&(a(0,"th",17),l(1," Name "),o())}function to(t,e){if(t&1&&(a(0,"td",20),l(1),o()),t&2){let r=e.$implicit;m(),h(" ",r.title," ")}}function eo(t,e){t&1&&(a(0,"th",17),l(1," Executor "),o())}function io(t,e){if(t&1&&(a(0,"td",20),l(1),o()),t&2){let r,i=e.$implicit;m(),h(" ",(r=i.executorMember==null?null:i.executorMember.fullName)!==null&&r!==void 0?r:"Unassigned"," ")}}function no(t,e){t&1&&(a(0,"th",17),l(1," Start Date "),o())}function oo(t,e){if(t&1&&(a(0,"td",20),l(1),M(2,"date"),o()),t&2){let r=e.$implicit;m(),h(" ",R(2,1,r.startDate,"EEEE, MMMM d")," ")}}function ao(t,e){t&1&&(a(0,"th",17),l(1," Due Date "),o())}function ro(t,e){if(t&1&&(l(0),M(1,"date")),t&2){let r=f().$implicit;h(" ",R(1,1,r.endDate,"EEEE, MMMM d")," ")}}function so(t,e){t&1&&l(0," Unset ")}function lo(t,e){if(t&1&&(a(0,"td",20),u(1,ro,2,4)(2,so,1,0),o()),t&2){let r=e.$implicit;m(),g(1,r.endDate?1:2)}}function mo(t,e){t&1&&(a(0,"th",17),l(1," Priority "),o())}function co(t,e){if(t&1&&(a(0,"td",20),l(1),o()),t&2){let r=e.$implicit,i=f(2);m(),h(" ",i.taskPriority(r)," ")}}function po(t,e){t&1&&d(0,"th",17)}function uo(t,e){if(t&1&&(a(0,"td",20),d(1,"app-task-more-menu",21),o()),t&2){let r=e.$implicit;m(),c("task",r)}}function _o(t,e){t&1&&d(0,"tr",22)}function fo(t,e){if(t&1&&d(0,"tr",23),t&2){let r=e.$implicit;c("routerLink",B(1,Yn,r.id))}}function go(t,e){if(t&1){let r=y();a(0,"mat-expansion-panel",1),C("opened",function(){k(r);let n=f();return v(n.panelOpenState=!0)})("closed",function(){k(r);let n=f();return v(n.panelOpenState=!1)}),a(1,"mat-expansion-panel-header")(2,"mat-panel-title"),d(3,"span",2),l(4),o()(),a(5,"div",3)(6,"table",4),d(7,"caption"),$(8,5),u(9,Xn,1,0,"th",6)(10,Jn,2,1,"td",7),z(),$(11,8),u(12,Zn,2,0,"th",6)(13,to,2,1,"td",9),z(),$(14,10),u(15,eo,2,0,"th",6)(16,io,2,1,"td",9),z(),$(17,11),u(18,no,2,0,"th",6)(19,oo,3,4,"td",9),z(),$(20,12),u(21,ao,2,0,"th",6)(22,lo,3,1,"td",9),z(),$(23,13),u(24,mo,2,0,"th",6)(25,co,2,1,"td",9),z(),$(26,14),u(27,po,1,0,"th",6)(28,uo,2,1,"td",9),z(),u(29,_o,1,0,"tr",15)(30,fo,1,3,"tr",16),o()()()}if(t&2){let r=f();m(3),c("ngStyle",B(5,Qn,r.column.color)),m(),h(" ",r.column.name," "),m(2),c("dataSource",r.column.tasks),m(23),c("matHeaderRowDef",r.displayedColumns),m(),c("matRowDefColumns",r.displayedColumns)}}var Di=(()=>{let e=class e{constructor(i,n){this.tasksService=i,this.toastrService=n,this.column=null,this.panelOpenState=!0,this.displayedColumns=["status","title","executor","priority","startDate","endDate","actions"]}onTaskMoreClick(i){i.stopPropagation()}taskPriority(i){switch(i.priority){case I.HIGH:return"High";case I.MEDIUM:return"Medium";case I.LOW:return"Low";default:return""}}completeTask(i,n){n.stopPropagation(),this.tasksService.toggleCompleteTask(i.id).pipe(E(s=>(this.toastrService.error("Failed to complete task."),b(()=>s))),P(1)).subscribe(()=>{this.tasksService.refetchTasks()})}};e.\u0275fac=function(n){return new(n||e)(_(F),_(q))},e.\u0275cmp=x({type:e,selectors:[["app-list-panel"]],inputs:{column:"column"},decls:1,vars:1,consts:[["expanded",""],["expanded","",3,"opened","closed"],[1,"panel__color",3,"ngStyle"],[1,"table_wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["class","checkbox-width","mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-cell","",4,"matCellDef"],["matColumnDef","executor"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","priority"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"checkbox-width"],[1,"table_task-status",3,"click","checked"],["mat-cell",""],[3,"task"],["mat-header-row",""],["mat-row","",3,"routerLink"]],template:function(n,s){n&1&&u(0,go,31,7,"mat-expansion-panel",0),n&2&&g(0,s.column?0:-1)},dependencies:[pt,tt,oe,ae,re,ee,me,pe,fe,de,ce,ge,ue,_e,he,Ce,Ft,Z],styles:[".table_wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase;color:#afafaf}.mdc-data-table__cell[_ngcontent-%COMP%], .mdc-data-table__header-cell[_ngcontent-%COMP%]{border-bottom:none}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{background:#f3f3f3}.panel__color[_ngcontent-%COMP%]{width:5px;height:100%;background:#ccc;margin-right:12px}[_nghost-%COMP%]     .mdc-checkbox__background{border-radius:5px}[_nghost-%COMP%]     .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:#adacac}[_nghost-%COMP%]     .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background, [_nghost-%COMP%]     .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background, [_nghost-%COMP%]     .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{background-color:#eef5ee}.checkbox-width[_ngcontent-%COMP%]{width:10px}"],changeDetection:0});let t=e;return t})();var Co=(t,e)=>e.id;function xo(t,e){if(t&1&&d(0,"app-list-panel",1),t&2){let r=f().$implicit;c("column",r)}}function ko(t,e){if(t&1&&u(0,xo,1,1,"app-list-panel",1),t&2){let r=e.$implicit;g(0,r.tasks.length>0?0:-1)}}var Ei=(()=>{let e=class e extends Vt{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Gt(e)))(s||e)}})(),e.\u0275cmp=x({type:e,selectors:[["app-list-view"]],features:[bt],decls:3,vars:0,consts:[["multi","true",1,"list"],[3,"column"]],template:function(n,s){n&1&&(a(0,"mat-accordion",0),w(1,ko,1,1,null,null,Co),o()),n&2&&(m(),D(s.columns))},dependencies:[se,Di],styles:[".list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}"],changeDetection:0});let t=e;return t})();var bo=t=>[t];function So(t,e){t&1&&d(0,"th",15)}function Mo(t,e){if(t&1){let r=y();a(0,"td",16)(1,"mat-checkbox",17),C("click",function(n){let s=k(r).$implicit,p=f();return v(p.completeTask(s,n))}),o()()}if(t&2){let r=e.$implicit;m(),c("checked",r.completed)}}function To(t,e){t&1&&(a(0,"th",15),l(1," Name "),o())}function yo(t,e){if(t&1&&(a(0,"td",18),l(1),o()),t&2){let r=e.$implicit;m(),h(" ",r.title," ")}}function wo(t,e){t&1&&(a(0,"th",15),l(1," Executor "),o())}function Do(t,e){if(t&1&&(a(0,"td",18),l(1),o()),t&2){let r,i=e.$implicit;m(),h(" ",(r=i.executorMember==null?null:i.executorMember.fullName)!==null&&r!==void 0?r:"Unassigned"," ")}}function Eo(t,e){t&1&&(a(0,"th",15),l(1," Start Date "),o())}function Po(t,e){if(t&1&&(a(0,"td",18),l(1),M(2,"date"),o()),t&2){let r=e.$implicit;m(),h(" ",R(2,1,r.startDate,"EEEE, MMMM d")," ")}}function Io(t,e){t&1&&(a(0,"th",15),l(1," Due Date "),o())}function Oo(t,e){if(t&1&&(l(0),M(1,"date")),t&2){let r=f().$implicit;h(" ",R(1,1,r.endDate,"EEEE, MMMM d")," ")}}function Fo(t,e){t&1&&l(0," Unset ")}function Vo(t,e){if(t&1&&(a(0,"td",18),u(1,Oo,2,4)(2,Fo,1,0),o()),t&2){let r=e.$implicit;m(),g(1,r.endDate?1:2)}}function No(t,e){t&1&&(a(0,"th",15),l(1," Priority "),o())}function $o(t,e){if(t&1&&(a(0,"td",18),l(1),o()),t&2){let r=e.$implicit,i=f();m(),h(" ",i.taskPriority(r)," ")}}function zo(t,e){t&1&&(a(0,"th",15),l(1," Status "),o())}function Lo(t,e){if(t&1&&(a(0,"td",18),l(1),o()),t&2){let r=e.$implicit;m(),h(" ",r.status.name," ")}}function Ao(t,e){t&1&&d(0,"th",15)}function Bo(t,e){if(t&1&&(a(0,"td",18),d(1,"app-task-more-menu",19),o()),t&2){let r=e.$implicit;m(),c("task",r)}}function jo(t,e){t&1&&d(0,"tr",20)}function Ro(t,e){if(t&1&&d(0,"tr",21),t&2){let r=e.$implicit;c("routerLink",B(1,bo,r.id))}}var Pi=(()=>{let e=class e extends Vt{set columns(i){this.tasks=i.flatMap(n=>n.tasks)}constructor(i,n){super(),this.tasksService=i,this.toastrService=n,this.tasks=[],this.displayedColumns=["checkbox","title","executor","priority","startDate","endDate","status","actions"]}onTaskMoreClick(i){i.stopPropagation()}taskPriority(i){switch(i.priority){case I.HIGH:return"High";case I.MEDIUM:return"Medium";case I.LOW:return"Low";default:return""}}completeTask(i,n){n.stopPropagation(),this.tasksService.toggleCompleteTask(i.id).pipe(E(s=>(this.toastrService.error("Failed to complete task."),b(()=>s))),P(1)).subscribe(()=>{this.tasksService.refetchTasks()})}};e.\u0275fac=function(n){return new(n||e)(_(F),_(q))},e.\u0275cmp=x({type:e,selectors:[["app-table-view"]],inputs:{columns:"columns"},features:[bt],decls:29,vars:3,consts:[[1,"table_wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","checkbox"],["mat-header-cell","",4,"matHeaderCellDef"],["class","checkbox-width","mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-cell","",4,"matCellDef"],["matColumnDef","executor"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","priority"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"checkbox-width"],[1,"table_task-status",3,"click","checked"],["mat-cell",""],[3,"task"],["mat-header-row",""],["mat-row","",3,"routerLink"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"table",1),d(2,"caption"),$(3,2),u(4,So,1,0,"th",3)(5,Mo,2,1,"td",4),z(),$(6,5),u(7,To,2,0,"th",3)(8,yo,2,1,"td",6),z(),$(9,7),u(10,wo,2,0,"th",3)(11,Do,2,1,"td",6),z(),$(12,8),u(13,Eo,2,0,"th",3)(14,Po,3,4,"td",6),z(),$(15,9),u(16,Io,2,0,"th",3)(17,Vo,3,1,"td",6),z(),$(18,10),u(19,No,2,0,"th",3)(20,$o,2,1,"td",6),z(),$(21,11),u(22,zo,2,0,"th",3)(23,Lo,2,1,"td",6),z(),$(24,12),u(25,Ao,1,0,"th",3)(26,Bo,2,1,"td",6),z(),u(27,jo,1,0,"tr",13)(28,Ro,1,3,"tr",14),o()()),n&2&&(m(),c("dataSource",s.tasks),m(26),c("matHeaderRowDef",s.displayedColumns),m(),c("matRowDefColumns",s.displayedColumns))},dependencies:[tt,ee,me,pe,fe,de,ce,ge,ue,_e,he,Ce,Ft,Z],styles:["[_nghost-%COMP%]     .mdc-checkbox__background{border-radius:5px}[_nghost-%COMP%]     .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background, [_nghost-%COMP%]     .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background, [_nghost-%COMP%]     .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{background-color:#eef5ee}[_nghost-%COMP%]     .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:#adacac}[_nghost-%COMP%]     .mat-mdc-table{border:1px solid #e9e9e9;background:none}[_nghost-%COMP%]     .mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-header-cell{font-size:12px;text-transform:uppercase;color:#afafaf}[_nghost-%COMP%]     .mdc-data-table__cell, [_nghost-%COMP%]     .mdc-data-table__header-cell{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-row:hover .mat-mdc-cell{background:#f3f3f3}[_nghost-%COMP%]     .mat-mdc-table tbody, [_nghost-%COMP%]     .mat-mdc-table tfoot, [_nghost-%COMP%]     .mat-mdc-table thead, [_nghost-%COMP%]     .mat-mdc-cell, [_nghost-%COMP%]     .mat-mdc-footer-cell, [_nghost-%COMP%]     .mat-mdc-header-row, [_nghost-%COMP%]     .mat-mdc-row, [_nghost-%COMP%]     .mat-mdc-footer-row, [_nghost-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{background:none}.table_wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}table[_ngcontent-%COMP%]{width:100%;border-radius:6px;background:#fff!important;padding:12px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:table;width:100%}.checkbox-width[_ngcontent-%COMP%]{width:10px}"],changeDetection:0});let t=e;return t})();function qo(t,e){if(t&1&&(a(0,"section",0)(1,"div",2)(2,"div",3)(3,"main",4)(4,"div",5)(5,"h2",6),l(6),o(),a(7,"p",7),l(8),o()(),a(9,"div",8),d(10,"quill-view",9),o()(),d(11,"app-task-notes",10),o(),d(12,"app-task-details-sidebar",10),o()()),t&2){let r=f();m(6),j(r.task.title),m(2),j(r.task.description),m(2),c("content",r.task.content),m(),c("task",r.task),m(),c("task",r.task)}}function Ho(t,e){t&1&&(a(0,"section",1)(1,"mat-icon"),l(2,"error_outline"),o(),a(3,"h1"),l(4," Something went wrong while loading the task. "),d(5,"br"),l(6," Please, Try again tater! "),o()())}var Ii=(()=>{let e=class e{constructor(i,n,s,p){this.route=i,this.tasksService=n,this.toastService=s,this.cd=p,this.isError=!1,this.task=null,this.getTaskByUrl()}getTaskByUrl(){let i=this.route.snapshot.paramMap.get("taskId"),n=Number(i);if(isNaN(n)){this.toastService.error("The task id is invalid");return}this.tasksService.getTaskById(n).pipe(E(s=>(this.toastService.error("Failed to load task"),this.isError=!0,b(()=>s))),Oe(()=>{this.cd.markForCheck()}),P(1)).subscribe(s=>{this.task=s})}};e.\u0275fac=function(n){return new(n||e)(_(Wt),_(F),_(q),_(ct))},e.\u0275cmp=x({type:e,selectors:[["app-task-view-page"]],decls:2,vars:2,consts:[[1,"page"],[1,"vtask__error"],[1,"vtask__wrapper"],[1,"vtask__left"],[1,"vtask__content"],[1,"vtask__header"],[1,"vtask__header-title"],[1,"vtask__header-subtitle"],[1,"vtask__description"],["format","html","theme","snow",3,"content"],[3,"task"]],template:function(n,s){n&1&&u(0,qo,13,5,"section",0)(1,Ho,7,0,"section",1),n&2&&(g(0,s.task&&!s.isError?0:-1),m(),g(1,s.isError?1:-1))},dependencies:[A,ni,xi,vi],styles:["[_nghost-%COMP%]     .ql-editor{padding:0}mat-form-field[_ngcontent-%COMP%]{width:100%}.vtask__wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:22px}@media (max-width: 64em){.vtask__wrapper[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.vtask__left[_ngcontent-%COMP%]{width:100%;flex:1;display:flex;flex-direction:column;gap:22px}@media (max-width: 64em){.vtask__left[_ngcontent-%COMP%]{order:2}}.vtask__content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:22px}.vtask__header-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.vtask__header-subtitle[_ngcontent-%COMP%]{margin-top:8px!important;font-size:14px;color:#727272}.vtask__description[_ngcontent-%COMP%]{margin-top:22px;padding:16px 24px;background:#fbfcfd;border-radius:6px;border:1px solid #e0e0e0}.vtask__error[_ngcontent-%COMP%]{height:calc(100vh - 300px);width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.vtask__error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:70px;width:70px;height:70px;color:#888}.vtask__error[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:22px!important;font-size:16px;text-align:center;font-weight:500;color:#888}@media (max-width: 64em){app-task-details-sidebar[_ngcontent-%COMP%]{width:100%;order:1}}textarea[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let t=e;return t})();var Go=()=>({height:"50px","border-radius":"8px"}),Wo=()=>({height:"210px","border-radius":"8px"});function Ko(t,e){if(t&1&&d(0,"app-kanban-board-view",5),t&2){let r=f(2);c("columns",r.data)}}function Qo(t,e){if(t&1&&d(0,"app-list-view",5),t&2){let r=f(2);c("columns",r.data)}}function Yo(t,e){if(t&1&&d(0,"app-table-view",5),t&2){let r=f(2);c("columns",r.data)}}function Xo(t,e){if(t&1&&u(0,Ko,1,1)(1,Qo,1,1)(2,Yo,1,1),t&2){let r,i=f(2);g(0,(r=i.filter.view)==="Kanban"?0:r==="List"?1:r==="Table"?2:-1)}}function Jo(t,e){t&1&&(a(0,"div",6),d(1,"ngx-skeleton-loader",7)(2,"ngx-skeleton-loader",7),o()),t&2&&(m(),c("theme",$t(2,Go)),m(),c("theme",$t(3,Wo)))}function Zo(t,e){if(t&1&&(a(0,"div",3),w(1,Jo,3,4,"div",6,Ne),o()),t&2){let r=f(2);m(),D(r.skeletonArray)}}function ta(t,e){t&1&&(a(0,"div",4)(1,"h1",8),l(2,"404"),o(),a(3,"div",9)(4,"h2",10),l(5," Oops.. "),d(6,"br"),l(7," We couldn't find a tasks list you are looking for. "),o(),a(8,"button",11)(9,"a",12),l(10,"Return Back"),o()()()())}function ea(t,e){if(t&1&&u(0,Xo,3,1)(1,Zo,3,0,"div",3)(2,ta,11,0,"div",4),t&2){let r=e;g(0,r.data?0:-1),m(),g(1,r.loading?1:-1),m(),g(2,r.error?2:-1)}}var Oi=(()=>{let e=class e{constructor(i){this.tasksService=i,this.skeletonArray=new Array(10).fill(0),this.destroy$=new lt,this.filter={},this.columns$=this.tasksService.refetchTasks$.pipe(Fe([]),N(()=>this.loadStatusesWithTasks()))}ngOnInit(){this.tasksService.refetchTasks()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadStatusesWithTasks(){return this.tasksService.getStatusesWithTasks(this.filter)}onFilter(i){this.filter=i,this.tasksService.refetchTasks()}};e.\u0275fac=function(n){return new(n||e)(_(F))},e.\u0275cmp=x({type:e,selectors:[["app-tasks-list-page"]],decls:7,vars:5,consts:[[1,"page"],[3,"filter"],[1,"tasks__content"],[1,"tasks__loading-page"],[1,"tasks__error","page"],[3,"columns"],[1,"tasks__loading-column"],["count","1","appearance","line",3,"theme"],[1,"tasks__error-title"],[1,"tasks__error-content"],[1,"tasks__error-subtitle"],["mat-flat-button","","color","primary","routerLink","/hub/overview"],["routerLink","/hub/overview"]],template:function(n,s){if(n&1&&(a(0,"section",0),d(1,"app-tasks-toolbar"),a(2,"app-tasks-filter",1),C("filter",function(T){return s.onFilter(T)}),o(),a(3,"div",2),u(4,ea,3,3),M(5,"withLoading"),M(6,"async"),o()()),n&2){let p;m(4),g(4,(p=L(6,3,L(5,1,s.columns$)))?4:-1,p)}},dependencies:[tt,U,Ke,wi,Mi,Ei,Pi,Si,W,Ze],styles:[".tasks__content[_ngcontent-%COMP%]{margin-top:22px}.tasks__loading-page[_ngcontent-%COMP%]{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));grid-template-rows:none}.tasks__error[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;height:100%;margin-top:10%}.tasks__error-content[_ngcontent-%COMP%]{z-index:10;display:flex;flex-direction:column;align-items:center}.tasks__error-title[_ngcontent-%COMP%]{color:#d8d7d7;font-size:280px;font-weight:600;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5;opacity:.25}@media screen and (max-width: 48em){.tasks__error-title[_ngcontent-%COMP%]{font-size:180px}}.tasks__error-subtitle[_ngcontent-%COMP%]{color:#000;font-size:26px;margin-bottom:26px;text-align:center;line-height:1.4}@media screen and (max-width: 48em){.tasks__error-subtitle[_ngcontent-%COMP%]{font-size:20px}}"],changeDetection:0});let t=e;return t})();var ia=[{path:"",component:Oi},{path:":taskId",component:Ii}],Fi=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ht({type:e}),e.\u0275inj=qt({imports:[Se.forChild(ia),Se]});let t=e;return t})();var gs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ht({type:e}),e.\u0275inj=qt({imports:[Le,Fi,ei,oi.forRoot()]});let t=e;return t})();export{gs as TasksModule};
