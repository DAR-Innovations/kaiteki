import{a as We}from"./chunk-ZNUKZR2F.js";import"./chunk-AY35MMXY.js";import{c as U}from"./chunk-LZVTTR4F.js";import{a as _e}from"./chunk-SSMAG4H5.js";import{$a as Le,A as fe,D as P,E as B,F as Q,G,Ia as Oe,Ja as Ve,Ka as Fe,O as ue,P as be,R as he,U as ge,Ua as ke,V as Ce,Va as Ie,W as Me,Wa as $e,X,Xa as je,Z as xe,_a as Re,aa as we,ab as Ne,ba as ve,bb as ze,cb as Ae,db as He,eb as Be,fb as Qe,gb as Ge,hb as Ue,la as ye,m as pe,o as de,p as H,pb as q,qa as Te,qb as qe,ra as Se,ta as Pe,u as K,ua as Ee,wa as De}from"./chunk-XOZLSJZG.js";import"./chunk-4N6BO7AP.js";import{Aa as h,Eb as x,F as J,Gb as ae,Hb as $,I as ee,Ib as j,Jb as r,K as V,Ka as T,Kb as o,Lb as f,Mb as w,N as te,Nb as v,Pb as C,Sb as _,Ub as p,X as ie,Y as ne,_ as re,aa as oe,ac as R,bb as I,bc as m,dc as u,eb as s,ec as L,f as O,fa as F,fb as M,gd as z,id as A,jd as le,mc as D,nc as me,nd as ce,o as W,pa as g,qa as k,s as Z,uc as S,vc as N,wb as d,wc as se,yb as c,za as b}from"./chunk-IF3PND7Q.js";import"./chunk-REV7FFDQ.js";import"./chunk-MON7YFGF.js";function rt(e,t){if(e&1&&(r(0,"mat-option",6),m(1),o()),e&2){let a=t.$implicit;c("matTooltip",a)("value",a),s(),u(" ",a," ")}}var Xe=(()=>{let t=class t{constructor(i,n){this.router=i,this.route=n,this.filter=new T,this.destroy$=new O,this.views=["Table","Cards"],this.form=new Me({searchValue:new X(""),view:new X})}ngOnInit(){this.patchInitialFormValues(),this.trackFormValueChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}patchInitialFormValues(){let i=this.getQueryParameters();this.form.patchValue(i),this.filter.emit(i)}trackFormValueChanges(){this.form.valueChanges.pipe(ee(800),te(),re(this.destroy$)).subscribe(i=>{let n={searchValue:i.searchValue??void 0,view:i.view??void 0};this.saveQueryParameters(n),this.filter.emit(n)})}saveQueryParameters(i){this.router.navigate([],{queryParams:ue(i),queryParamsHandling:"merge"})}getQueryParameters(){let i={searchValue:"",view:this.views[0]},n=this.route.snapshot.queryParams;return be(n,i)}};t.\u0275fac=function(n){return new(n||t)(M(de),M(pe))},t.\u0275cmp=g({type:t,selectors:[["app-members-filter"]],outputs:{filter:"filter"},decls:19,vars:1,consts:[[1,"filter"],[1,"filter__fields",3,"formGroup"],["appearance","outline"],["matPrefix",""],["matInput","","type","text","formControlName","searchValue"],["formControlName","view"],[3,"matTooltip","value"]],template:function(n,l){n&1&&(r(0,"section",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),m(5,"Filters"),o()(),r(6,"form",1)(7,"mat-form-field",2)(8,"mat-label"),m(9,"Search"),o(),r(10,"mat-icon",3),m(11,"search"),o(),f(12,"input",4),o(),r(13,"mat-form-field",2)(14,"mat-label"),m(15,"View"),o(),r(16,"mat-select",5),$(17,rt,2,3,"mat-option",6,ae),o()()()()()()),n&2&&(s(6),c("formGroup",l.form),s(11),j(l.views))},dependencies:[P,je,ke,Ie,$e,Ee,Pe,Te,Se,Oe,fe,De,xe,he,ge,Ce,we,ve],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter[_ngcontent-%COMP%]{margin-top:22px}.filter__fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;align-items:start}"],changeDetection:0});let e=t;return e})();function st(e,t){if(e&1){let a=C();r(0,"div",0)(1,"div",1)(2,"h1",2),m(3),o()(),r(4,"div",3)(5,"app-button",4),_("click",function(n){b(a);let l=p();return h(l.onAddNewClick(n))}),r(6,"p"),m(7,"Invite"),o()()()()}e&2&&(s(3),u("",t.name," Members"))}var Ye=(()=>{let t=class t{constructor(i,n){this.dialog=i,this.teamsService=n,this.currentTeam$=this.teamsService.currentTeam$}onAddNewClick(i){i.preventDefault(),this.dialog.open(We,{minWidth:"30%"}).afterClosed().pipe(V(1)).subscribe()}};t.\u0275fac=function(n){return new(n||t)(M(ye),M(U))},t.\u0275cmp=g({type:t,selectors:[["app-members-toolbar"]],decls:2,vars:3,consts:[[1,"dashboard__toolbar"],[1,"dashboard__toolbar-left"],[1,"dashboard__toolbar-title"],[1,"dashboard__toolbar-right"],["icon","add",1,"dashboard__toolbar-item",3,"click"]],template:function(n,l){if(n&1&&(d(0,st,8,1,"div",0),S(1,"async")),n&2){let y;x(0,(y=N(1,1,l.currentTeam$))?0:-1,y)}},dependencies:[q,A],styles:[".dashboard__toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;overflow-x:auto;overflow-y:hidden}.dashboard__toolbar-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.dashboard__toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}@media (max-width: 40em){.dashboard__toolbar-left[_ngcontent-%COMP%]{display:none}}.dashboard__toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.dashboard__toolbar-item[_ngcontent-%COMP%]{text-overflow:ellipsis;text-wrap:nowrap}"],changeDetection:0});let e=t;return e})();var pt=(e,t)=>t.id,dt=(e,t)=>({background:e,color:t}),ft=e=>[e];function _t(e,t){if(e&1){let a=C();r(0,"div",2),f(1,"img",3),r(2,"h3",4),m(3),o(),r(4,"span",5),m(5),o(),r(6,"div",6),m(7),o(),r(8,"div",7)(9,"app-button",8),m(10," Action "),o(),r(11,"mat-menu",null,0)(13,"button",9)(14,"mat-icon"),m(15,"person_outline"),o(),r(16,"span"),m(17,"View"),o()(),r(18,"button",10),_("click",function(){b(a);let n=p().$implicit,l=p();return h(l.onDeleteMember(n.id))}),r(19,"mat-icon"),m(20,"delete"),o(),r(21,"span"),m(22,"Remove"),o()()()()()}if(e&2){let a=R(12),i=p().$implicit,n=p();s(),c("src",i.avatarUrl,I)("alt",i.firstname),s(2),L("",i.firstname," ",i.lastname,""),s(2),u(" ",i.position," "),s(),c("ngStyle",me(9,dt,n.getPerformanceColor(i.performance)[1],n.getPerformanceColor(i.performance)[0])),s(),u(" ",i.performance,"% "),s(2),c("matMenuTriggerFor",a),s(4),c("routerLink",D(12,ft,i.id))}}function ut(e,t){if(e&1&&d(0,_t,23,14,"div",2),e&2){let a=t.$implicit;x(0,a?0:-1)}}var Ze=(()=>{let t=class t{constructor(){this.delete=new T,this.members=[]}onDeleteMember(i){this.delete.emit(i)}trackByTeamMembers(i,n){return n.id}getPerformanceColor(i){return i<=100&&i>=70?["#6d9f33","#F0F5EA"]:i<70&&i>=40?["#f4a40f","#FDF5E7"]:["#ef6a6b","#FDF0F0"]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=g({type:t,selectors:[["app-members-cards-view"]],inputs:{members:"members"},outputs:{delete:"delete"},decls:3,vars:0,consts:[["actionMenu","matMenu"],[1,"members__cards"],[1,"members__cards__item"],["loading","lazy",1,"members__cards__item-img",3,"src","alt"],[1,"members__cards__item-title"],[1,"members__cards__item-desc"],[1,"members__cards__item-performance",3,"ngStyle"],[1,"members__cards__item-bottom"],["variant","outline",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(n,l){n&1&&(r(0,"div",1),$(1,ut,1,1,null,null,pt),o()),n&2&&(s(),j(l.members))},dependencies:[z,q,P,Q,B,G,H],styles:[".members__cards[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));grid-template-rows:none}.members__cards__item[_ngcontent-%COMP%]{position:relative;padding:16px;height:fit-content;border-radius:10px;background:#fff;border:1px solid #e9e9e9;overflow:hidden;word-wrap:break-word;display:flex;flex-direction:column;align-items:center}.members__cards__item-img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:9999px;object-fit:cover;background:#ccc}.members__cards__item-bottom[_ngcontent-%COMP%]{width:100%;margin-top:18px}.members__cards__item-title[_ngcontent-%COMP%]{font-weight:500;margin-top:14px}.members__cards__item-performance[_ngcontent-%COMP%]{width:fit-content;padding:2px 6px;position:absolute;right:16px;top:12px;border-radius:4px;font-size:12px}.members__cards__item-desc[_ngcontent-%COMP%]{font-size:12px;color:#575757}"],changeDetection:0});let e=t;return e})();var ht=e=>({color:e}),gt=e=>[e];function Ct(e,t){e&1&&(r(0,"th",13),m(1," Name "),o())}function Mt(e,t){if(e&1&&(r(0,"td",14)(1,"div",15),f(2,"img",16),r(3,"p"),m(4),o()()()),e&2){let a=t.$implicit;s(2),c("src",a.avatar,I)("alt",a.firstname),s(2),L("",a.firstname," ",a.lastname,"")}}function xt(e,t){e&1&&(r(0,"th",13),m(1," Position "),o())}function wt(e,t){if(e&1&&(r(0,"td",14),m(1),o()),e&2){let a=t.$implicit;s(),u(" ",a.position," ")}}function vt(e,t){e&1&&(r(0,"th",13),m(1," Email "),o())}function yt(e,t){if(e&1&&(r(0,"td",14),m(1),o()),e&2){let a=t.$implicit;s(),u(" ",a.email," ")}}function Tt(e,t){e&1&&(r(0,"th",13),m(1," Since "),o())}function St(e,t){if(e&1&&(r(0,"td",14),m(1),S(2,"date"),o()),e&2){let a=t.$implicit;s(),u(" ",se(2,1,a.joinedDate,"EEEE, MMMM d")," ")}}function Pt(e,t){e&1&&(r(0,"th",13),m(1," Performance "),o())}function Et(e,t){if(e&1&&(r(0,"td",14)(1,"p",17),m(2),o()()),e&2){let a=t.$implicit,i=p();s(),c("ngStyle",D(2,ht,i.getPerformanceColor(a.performance))),s(),u(" ",a.performance,"% ")}}function Dt(e,t){e&1&&f(0,"th",13)}function Ot(e,t){if(e&1){let a=C();r(0,"td",14)(1,"button",18),_("click",function(n){b(a);let l=p();return h(l.onMoreClick(n))}),r(2,"mat-icon"),m(3,"more_horizont"),o()(),r(4,"mat-menu",null,0)(6,"button",19)(7,"mat-icon"),m(8,"person_outline"),o(),r(9,"span"),m(10,"View"),o()(),r(11,"button",20),_("click",function(){let n=b(a).$implicit,l=p();return h(l.onDeleteMember(n.id))}),r(12,"mat-icon"),m(13,"delete"),o(),r(14,"span"),m(15,"Remove"),o()()()()}if(e&2){let a=t.$implicit,i=R(5);s(),c("matMenuTriggerFor",i),s(5),c("routerLink",D(2,gt,a.id))}}function Vt(e,t){e&1&&f(0,"tr",21)}function Ft(e,t){e&1&&f(0,"tr",22)}var et=(()=>{let t=class t{constructor(){this.delete=new T,this.members=[],this.displayedColumns=["name","position","email","entryDate","performance","actions"]}onDeleteMember(i){this.delete.emit(i)}onMoreClick(i){i.stopPropagation()}getPerformanceColor(i){return i>=100&&i>=70?"#6d9f33":i<70&&i>=40?"#f4a40f":"#ef6a6b"}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=g({type:t,selectors:[["app-members-table-view"]],inputs:{members:"members"},outputs:{delete:"delete"},decls:23,vars:3,consts:[["taskMoreMenu","matMenu"],[1,"members-table__wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["matColumnDef","email"],["matColumnDef","entryDate"],["matColumnDef","performance"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"members-table__name-avatar"],["loading","lazy",3,"src","alt"],[1,"members-table__performance",3,"ngStyle"],[3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,l){n&1&&(r(0,"div",1)(1,"table",2),f(2,"caption"),w(3,3),d(4,Ct,2,0,"th",4)(5,Mt,5,4,"td",5),v(),w(6,6),d(7,xt,2,0,"th",4)(8,wt,2,1,"td",5),v(),w(9,7),d(10,vt,2,0,"th",4)(11,yt,2,1,"td",5),v(),w(12,8),d(13,Tt,2,0,"th",4)(14,St,3,4,"td",5),v(),w(15,9),d(16,Pt,2,0,"th",4)(17,Et,3,4,"td",5),v(),w(18,10),d(19,Dt,1,0,"th",4)(20,Ot,16,4,"td",5),v(),d(21,Vt,1,0,"tr",11)(22,Ft,1,0,"tr",12),o()()),n&2&&(s(),c("dataSource",l.members),s(20),c("matHeaderRowDef",l.displayedColumns),s(),c("matRowDefColumns",l.displayedColumns))},dependencies:[z,P,Q,B,G,Re,Ne,Be,ze,Le,Qe,Ae,He,Ge,Ue,H,le],styles:["[_nghost-%COMP%]     .mat-mdc-table{border:1px solid #e9e9e9;background:none}[_nghost-%COMP%]     .mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-header-cell{font-size:12px;text-transform:uppercase;color:#afafaf}[_nghost-%COMP%]     .mdc-data-table__cell, [_nghost-%COMP%]     .mdc-data-table__header-cell{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-row:hover .mat-mdc-cell{background:#e6f0fc}[_nghost-%COMP%]     .mat-mdc-table tbody, [_nghost-%COMP%]     .mat-mdc-table tfoot, [_nghost-%COMP%]     .mat-mdc-table thead, [_nghost-%COMP%]     .mat-mdc-cell, [_nghost-%COMP%]     .mat-mdc-footer-cell, [_nghost-%COMP%]     .mat-mdc-header-row, [_nghost-%COMP%]     .mat-mdc-row, [_nghost-%COMP%]     .mat-mdc-footer-row, [_nghost-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{background:none}.members-table__wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto}.members-table__name-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.members-table__name-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:none;width:26px;height:26px;border-radius:9999px;background:#afafaf}.members-table__name-avatar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600}.members-table__performance[_ngcontent-%COMP%]{font-weight:500}table[_ngcontent-%COMP%]{width:100%;border-radius:6px;background:#fff!important;padding:0 12px 12px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f8f8}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:160px;padding:14px}th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let e=t;return e})();function It(e,t){if(e&1){let a=C();r(0,"app-members-table-view",4),_("delete",function(n){b(a);let l=p(2);return h(l.onDeleteMember(n))}),o()}if(e&2){let a=p();c("members",a)}}function $t(e,t){if(e&1){let a=C();r(0,"app-members-cards-view",4),_("delete",function(n){b(a);let l=p(2);return h(l.onDeleteMember(n))}),o()}if(e&2){let a=p();c("members",a)}}function jt(e,t){if(e&1){let a=C();r(0,"div",2),d(1,It,1,1)(2,$t,1,1),o(),r(3,"app-paginator",3),_("page",function(n){b(a);let l=p();return h(l.onPage(n))}),o()}if(e&2){let a,i=p();s(),x(1,(a=i.filter.view)==="Table"?1:a==="Cards"?2:-1),s(2),c("pagination",i.pagination)}}var tt=(()=>{let t=class t{constructor(i,n){this.teamsService=i,this.toastService=n,this.refetchTeamMembersSubject=new O,this.refetchTeamMembers$=this.refetchTeamMembersSubject.asObservable(),this.filter={},this.pagination=Ve,this.teamMembers$=this.refetchTeamMembers$.pipe(ie([]),ne(()=>this.loadTeamMembers()))}ngOnInit(){this.refetchTeamMembers()}ngOnDestroy(){this.refetchTeamMembersSubject.next(),this.refetchTeamMembersSubject.complete()}refetchTeamMembers(){this.refetchTeamMembersSubject.next()}loadTeamMembers(){let i={size:this.pagination.size,page:this.pagination.page};return this.teamsService.searchTeamMembers(i,this.filter).pipe(oe(n=>{this.pagination.page=n.number,this.pagination.size=n.size,this.pagination.totalElements=n.totalElements,this.pagination.totalPages=n.totalPages}),Z(n=>n.content),J(n=>(this.toastService.open("Failed to get team members"),W(()=>n))))}onFilter(i){this.filter=i,this.refetchTeamMembers()}onPage(i){this.pagination.size=i.size,this.pagination.page=i.page,this.refetchTeamMembers()}onDeleteMember(i){this.teamsService.deleteTeamMember(i).pipe(J(n=>(this.toastService.open("Failed to delete team member"),W(()=>n))),V(1)).subscribe(()=>{this.toastService.open("Successfully removed team member"),this.refetchTeamMembers()})}};t.\u0275fac=function(n){return new(n||t)(M(U),M(_e))},t.\u0275cmp=g({type:t,selectors:[["app-members-list"]],decls:5,vars:3,consts:[[1,"page","members"],[3,"filter"],[1,"members__content"],[3,"page","pagination"],[3,"delete","members"]],template:function(n,l){if(n&1&&(r(0,"section",0),f(1,"app-members-toolbar"),r(2,"app-members-filter",1),_("filter",function(nt){return l.onFilter(nt)}),o(),d(3,jt,4,2),S(4,"async"),o()),n&2){let y;s(3),x(3,(y=N(4,1,l.teamMembers$))?3:-1,y)}},dependencies:[Fe,Ye,Xe,Ze,et,A],styles:[".members[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.members__content[_ngcontent-%COMP%]{flex:1;margin-top:22px}"],changeDetection:0});let e=t;return e})();var Rt=[{path:"",component:tt}],it=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=k({type:t}),t.\u0275inj=F({imports:[K.forChild(Rt),K]});let e=t;return e})();var ki=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=k({type:t}),t.\u0275inj=F({imports:[ce,qe,it]});let e=t;return e})();export{ki as MembersModule};
