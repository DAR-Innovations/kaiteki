import{a as Q}from"./chunk-SXEEXEST.js";import{a as J}from"./chunk-ON7GQ3QU.js";import{a as K}from"./chunk-CC5637K2.js";import{a as R}from"./chunk-AT67HQB2.js";import{Ia as B,o as V,p as A,rb as q,v as k}from"./chunk-TX7ZHAEW.js";import"./chunk-4N6BO7AP.js";import{Aa as S,F as m,Fb as I,Ib as j,Jb as G,K as d,Kb as c,Lb as r,Mb as g,Qb as T,Tb as D,Vb as M,Y as E,Yb as N,cb as P,cc as p,ec as w,fa as h,fb as a,gb as s,ld as $,o as l,pa as C,qa as v,qd as U,s as O,vc as z,wc as H,xb as y,za as b,zb as L}from"./chunk-SMBTFBOT.js";import"./chunk-REV7FFDQ.js";import{a as u,b as _}from"./chunk-MON7YFGF.js";var W=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=C({type:t,selectors:[["app-integrations-layout"]],decls:1,vars:0,template:function(n,f){n&1&&g(0,"router-outlet")},dependencies:[V],changeDetection:0});let e=t;return e})();var x={github:{id:1,name:"GitHub",description:"Code hosting platform for version control and collaboration",connected:!1,icon:"github",onConnect:()=>console.log("Connect GitHub"),onDisconnect:()=>console.log("Disconnect GitHub")},spotify:{id:2,name:"Spotify",description:"Digital music, podcast, and video service that gives you access to millions of songs and other content from creators all over the world",connected:!1,icon:"spotify",onConnect:()=>console.log("Connect Spotify"),onDisconnect:()=>console.log("Disconnect Spotify")},telegram:{id:3,name:"Telegram",description:"Cloud-based instant messaging app that works across several platforms accessed by people throughout the world.",connected:!1,icon:"telegram",onConnect:()=>console.log("Connect Telegram"),onDisconnect:()=>console.log("Disconnect Telegram")}};var it=(e,t)=>t.id;function nt(e,t){e&1&&(c(0,"span",7),p(1,"Enabled"),r())}function ot(e,t){if(e&1){let o=T();c(0,"button",11),D("click",function(){b(o);let n=M().$implicit;return S(n.onConnect())}),p(1," Connect "),r()}}function rt(e,t){if(e&1){let o=T();c(0,"button",12),D("click",function(){b(o);let n=M().$implicit;return S(n.onDisconnect())}),p(1," Disconnect "),r()}}function ct(e,t){if(e&1&&(c(0,"div",3)(1,"div",4)(2,"div",5),g(3,"img",6),y(4,nt,2,0,"span",7),r(),y(5,ot,2,0,"button",8)(6,rt,2,0),r(),c(7,"h4",9),p(8),r(),c(9,"p",10),p(10),r()()),e&2){let o=t.$implicit;a(3),N("src","assets/images/integrations/",o.icon,".svg",P),L("alt",o.name),a(),I(4,o.connected?4:-1),a(),I(5,o.connected?6:5),a(3),w(" ",o.name," "),a(2),w(" ",o.description," ")}}var X=(()=>{let t=class t{constructor(i,n,f,Z,tt){this.spotifyService=i,this.telegramService=n,this.integrationsService=f,this.toastService=Z,this.router=tt,this.integrations$=this.integrationsService.integrations$.pipe(E(()=>this.loadIntegrations()))}loadIntegrations(){return this.integrationsService.getUserIntegrations().pipe(O(i=>[_(u({},x.github),{connected:i.github?.enabled??!1,onConnect:()=>console.log("Connect GitHub"),onDisconnect:()=>console.log("Disconnect GitHub")}),_(u({},x.spotify),{connected:i.spotify?.enabled??!1,onConnect:()=>this.onSpotifyConnect(),onDisconnect:()=>this.onSpotifyDisconnect()}),_(u({},x.telegram),{connected:i.telegram?.enabled??!1,onConnect:()=>this.onTelegramConnect(),onDisconnect:()=>this.onTelegramDisconnect()})]),m(i=>(this.toastService.error("Failed to get integrations"),l(()=>i))))}onSpotifyConnect(){this.spotifyService.getConnectIntegrationUrl().pipe(d(1)).subscribe(i=>{window.location.replace(i.loginUrl)})}onSpotifyDisconnect(){this.spotifyService.disconnectSpotifyIntegration().pipe(d(1),m(i=>(this.toastService.error("Failed to disconnect Spotify"),l(()=>i)))).subscribe(()=>{this.toastService.open("Spotify integration disconnected!"),this.integrationsService.refreshIntegrations()})}onTelegramConnect(){this.telegramService.connectIntegration().pipe(m(i=>(this.toastService.error("Failed to connect Telegram"),l(()=>i))),d(1)).subscribe(()=>{this.toastService.open("Telegram integration connected!"),this.router.navigate(["/hub/integrations/telegram"])})}onTelegramDisconnect(){this.telegramService.disconnectIntegration().pipe(m(i=>(this.toastService.error("Failed to disconnect Telegram"),l(()=>i))),d(1)).subscribe(()=>{this.toastService.open("Telegram integration disconnected!"),this.integrationsService.refreshIntegrations()})}};t.\u0275fac=function(n){return new(n||t)(s(J),s(Q),s(K),s(R),s(A))},t.\u0275cmp=C({type:t,selectors:[["app-integrations-list"]],decls:6,vars:2,consts:[["value","Integrations"],[1,"page"],[1,"integrations"],[1,"integrations__item"],[1,"integrations__item-header"],[1,"integrations__item-header-left"],[1,"integrations__item-icon",3,"src","alt"],[1,"integrations__item-enabled-tag"],[1,"integrations__item-connect"],[1,"integrations__item-title"],[1,"integrations__item-description"],[1,"integrations__item-connect",3,"click"],[1,"integrations__item-disconnect",3,"click"]],template:function(n,f){n&1&&(g(0,"app-page-header",0),c(1,"section",1)(2,"div",2),j(3,ct,11,7,"div",3,it),z(5,"async"),r()()),n&2&&(a(3),G(H(5,0,f.integrations$)))},dependencies:[B,$],styles:[".integrations[_ngcontent-%COMP%]{display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-template-rows:none}.integrations__item[_ngcontent-%COMP%]{border:1px solid #e9e9e9;padding:12px 16px;border-radius:10px;background:#fff}.integrations__item-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.integrations__item-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.integrations__item-enabled-tag[_ngcontent-%COMP%]{font-size:10px;color:#216435;padding:1px 8px;border-radius:8px;background:#c8f8d4}.integrations__item-icon[_ngcontent-%COMP%]{width:28px;height:28px}.integrations__item-connect[_ngcontent-%COMP%]{font-size:12px;border-radius:6px;border:1px solid #068e44;padding:6px 12px;color:#068e44}.integrations__item-connect[_ngcontent-%COMP%]:hover{background:#068e44;color:#f4f5f5}.integrations__item-connect-active[_ngcontent-%COMP%]{font-size:12px;border-radius:6px;background:#068e44;color:#f4f5f5;padding:6px 12px}.integrations__item-disconnect[_ngcontent-%COMP%]{font-size:12px;border-radius:6px;padding:6px 12px;color:#c57c7c;border:1px solid #c57c7c}.integrations__item-disconnect[_ngcontent-%COMP%]:hover{background:#f6e5e5}.integrations__item-title[_ngcontent-%COMP%]{font-size:14px;margin-top:12px!important;font-weight:500}.integrations__item-description[_ngcontent-%COMP%]{margin-top:4px!important;font-size:12px;color:#919191}"],changeDetection:0});let e=t;return e})();var at=[{path:"",component:W,children:[{path:"",component:X},{path:"spotify",loadChildren:()=>import("./chunk-FR5Z53MV.js").then(e=>e.SpotifyModule),title:"Spotify | Kaiteki"},{path:"telegram",loadChildren:()=>import("./chunk-V6P3RWCI.js").then(e=>e.TelegramModule),title:"Telegram | Kaiteki"},{path:"github",loadChildren:()=>import("./chunk-WR2PKIGQ.js").then(e=>e.GithubModule),title:"GitHub | Kaiteki"}]}],Y=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=v({type:t}),t.\u0275inj=h({imports:[k.forChild(at),k]});let e=t;return e})();var Ot=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=v({type:t}),t.\u0275inj=h({imports:[U,q,Y]});let e=t;return e})();export{Ot as IntegrationsModule};
