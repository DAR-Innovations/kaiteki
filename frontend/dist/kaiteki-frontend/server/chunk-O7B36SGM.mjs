import './polyfills.server.mjs';
import{a as ve}from"./chunk-OWNPRT5U.mjs";import{a as xe}from"./chunk-4DNZHWE2.mjs";import{a as we}from"./chunk-2YUA2CAX.mjs";import{b as U}from"./chunk-AM4SDK4B.mjs";import{a as ce}from"./chunk-HOL4TTOB.mjs";import{Da as _e,Qa as ge,ca as le,cb as y,eb as he,i as de,n as N,s as j,t as $,wa as O,ya as fe}from"./chunk-YAF7A7YL.mjs";import{b as me}from"./chunk-IWV7G257.mjs";import{Aa as te,B as Y,Bb as _,F as q,Hb as m,Ib as ie,K as G,Kb as B,Lb as I,Mb as o,Nb as a,Ob as l,Sb as ne,Vb as oe,X as J,Xb as h,Y as Q,ea as X,ec as p,fa as D,fc as E,gc as u,hb as s,ib as x,ic as ae,ja as Z,k as V,o as K,oc as C,pa as g,pc as re,qa as L,rd as b,s as M,sd as k,ud as se,wd as pe,xc as c,yc as v,za as ee,zb as f,zc as P}from"./chunk-JAB3SG4D.mjs";import"./chunk-6VT7JIM2.mjs";import{a as R,b as H}from"./chunk-FME56UVT.mjs";var F=(()=>{let t=class t{constructor(r){this.httpClient=r,this.baseUrl="/api/v1/users/analytics"}getStatistics(){return this.httpClient.get(`${this.baseUrl}/statistics`)}getPerformanceByPeriod(){return this.httpClient.get(`${this.baseUrl}/performance-by-period`)}getTasksCountByTeams(){return this.httpClient.get(`${this.baseUrl}/tasks-by-teams`)}};t.\u0275fac=function(i){return new(i||t)(Z(me))},t.\u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ce=()=>({height:"100%","min-height":"270px","border-radius":"8px"});function De(e,t){if(e&1&&(o(0,"div",1)(1,"div",3),l(2,"mat-progress-spinner",4),o(3,"p",5),p(4),c(5,"number"),a()(),o(6,"p",6),p(7,"Overall Performance"),a()()),e&2){let n=h();s(2),_("value",n.data.performance),s(2),u(" ",P(5,2,n.data.performance,"1.1-1"),"% ")}}function Le(e,t){e&1&&l(0,"ngx-skeleton-loader",2),e&2&&_("theme",C(1,Ce))}function Be(e,t){if(e&1&&f(0,De,8,5,"div",1)(1,Le,1,2,"ngx-skeleton-loader",2),e&2){let n=t;m(0,n.data?0:-1),s(),m(1,n.loading?1:-1)}}function Ie(e,t){if(e&1&&(o(0,"div",7)(1,"div",9)(2,"p",10),p(3,"Performance(%) by period"),a()(),o(4,"div"),l(5,"canvas",11),a()()),e&2){let n=h(),r=h();s(5),_("data",n.data)("options",r.performanceChartOptions)}}function je(e,t){e&1&&l(0,"ngx-skeleton-loader",8),e&2&&_("theme",C(1,Ce))}function $e(e,t){if(e&1&&f(0,Ie,6,2,"div",7)(1,je,1,2,"ngx-skeleton-loader",8),e&2){let n=t;m(0,n.data?0:-1),s(),m(1,n.loading||n.error?1:-1)}}var be=(()=>{let t=class t{constructor(r,i){this.performanceService=r,this.usersAnalyticsService=i,this.userPerformance$=this.performanceService.getLatestUserPerformance().pipe(M(d=>H(R({},d),{performance:d.performance*100}))),this.performanceChartData$=this.usersAnalyticsService.getPerformanceByPeriod().pipe(M(d=>({labels:d.labels,datasets:[{data:d.data,label:"Performance by period",borderColor:"rgba(6, 142, 68, 0.8)",backgroundColor:"rgba(6, 142, 68, 0.4)",fill:!0,tension:.5}]}))),this.performanceChartOptions={responsive:!0,maintainAspectRatio:!1,font:{family:"Poppins, sans-serif",size:14}}}};t.\u0275fac=function(i){return new(i||t)(x(we),x(F))},t.\u0275cmp=g({type:t,selectors:[["app-overview-performance-section"]],decls:7,vars:10,consts:[[1,"overview-section"],[1,"overview-section-statistics","performance"],["count","1","appearance","line",1,"overview-performance-stats-loading",3,"theme"],[1,"overview-performance-wrapper"],["diameter","150",3,"value"],[1,"overview-performance-value"],[1,"overview-performance-label"],[1,"overview-section-graph"],["count","1","appearance","line",1,"overview-performance-graph-loading",3,"theme"],[1,"overview-section-graph-toolbar"],[1,"overview-section-graph-title"],["baseChart","","height","250","type","line",3,"data","options"]],template:function(i,d){if(i&1&&(o(0,"div",0),f(1,Be,2,2),c(2,"withLoading"),c(3,"async"),f(4,$e,2,2),c(5,"withLoading"),c(6,"async"),a()),i&2){let w,T;s(),m(1,(w=v(3,4,v(2,2,d.userPerformance$)))?1:-1,w),s(3),m(4,(T=v(6,8,v(5,6,d.performanceChartData$)))?4:-1,T)}},dependencies:[ge,O,j,b,se,y],styles:["[_nghost-%COMP%]     mat-progress-spinner{box-shadow:0 0 0 15px #e9e9e9 inset;border-radius:50%}.overview-performance-stats-loading[_ngcontent-%COMP%]{grid-column:span 2/span 2}@media screen and (max-width: 48em){.overview-performance-stats-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.overview-performance-graph-loading[_ngcontent-%COMP%]{grid-column:span 3/span 3}@media screen and (max-width: 48em){.overview-performance-graph-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}"],changeDetection:0});let e=t;return e})();var ye=(()=>{let t=class t{constructor(){this.timeSource=Y(6e4),this.formattedTime=this.timeSource.pipe(J(new Date),M(()=>new Date))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=g({type:t,selectors:[["app-overview-sidebar-calendar"]],decls:9,vars:6,consts:[[1,"overview-sidebar"],[1,"overview-sidebar-title"],[1,"overview-sidebar-list"],[1,"overview-calendar-current"]],template:function(i,d){i&1&&(o(0,"div",0)(1,"p",1),p(2,"Datetime calendar"),a(),o(3,"div",2),l(4,"mat-calendar"),a(),o(5,"p",3),p(6),c(7,"async"),c(8,"date"),a()()),i&2&&(s(6),u(" ",P(8,3,v(7,1,d.formattedTime),"EEEE, MMMM, d, h:mm a")," "))},dependencies:[_e,b,k],styles:["[_nghost-%COMP%]     .mat-calendar-header{padding:0}[_nghost-%COMP%]     .mat-calendar{margin-top:-20px}.overview-calendar-current[_ngcontent-%COMP%]{text-align:center;font-size:16px;margin:22px 0!important;color:#494d55}"],changeDetection:0});let e=t;return e})();var Ne=()=>({height:"100%","min-height":"600px","border-radius":"8px"});function Ue(e,t){e&1&&l(0,"span",9)}function We(e,t){if(e&1&&(o(0,"div",4)(1,"div",5)(2,"p",6),p(3),a(),o(4,"p",7),p(5),a()(),o(6,"p",8),p(7),c(8,"date"),a()(),f(9,Ue,1,0,"span",9)),e&2){let n=t.$implicit,r=t.$index,i=t.$count;s(3),E(n.title),s(2),E(n.type),s(2),u(" ",P(8,4,n.start,"MMM d, h:mm a")," "),s(2),m(9,r!==i-1?9:-1)}}function Re(e,t){if(e&1&&(o(0,"div",0)(1,"p",2),p(2,"Upcoming events"),a(),o(3,"div",3),B(4,We,10,7,null,null,ie),a()()),e&2){let n=h();s(4),I(n.data)}}function He(e,t){e&1&&l(0,"ngx-skeleton-loader",1),e&2&&_("theme",C(1,Ne))}function Ve(e,t){if(e&1&&f(0,Re,6,0,"div",0)(1,He,1,2,"ngx-skeleton-loader",1),e&2){let n=t;m(0,n.data?0:-1),s(),m(1,n.loading?1:-1)}}var Pe=(()=>{let t=class t{constructor(r){this.eventsService=r,this.events$=this.eventsService.getEvents()}};t.\u0275fac=function(i){return new(i||t)(x(xe))},t.\u0275cmp=g({type:t,selectors:[["app-overview-sidebar-events"]],decls:3,vars:5,consts:[[1,"overview-sidebar"],["count","1","appearance","line",3,"theme"],[1,"overview-sidebar-title"],[1,"overview-sidebar-list"],[1,"overview-events-item"],[1,"overview-events-item-header"],[1,"overview-events-item-title"],[1,"overview-events-item-description"],[1,"overview-events-item-time"],[1,"overview-sidebar-list-divider"]],template:function(i,d){if(i&1&&(f(0,Ve,2,2),c(1,"withLoading"),c(2,"async")),i&2){let w;m(0,(w=v(2,3,v(1,1,d.events$)))?0:-1,w)}},dependencies:[O,b,k,y],changeDetection:0});let e=t;return e})();var Oe=()=>({height:"100%","min-height":"270px","border-radius":"8px"});function qe(e,t){if(e&1&&(o(0,"div",1)(1,"div",3)(2,"div",4)(3,"mat-icon"),p(4,"apps"),a()(),o(5,"div",5)(6,"p",6),p(7,"Total"),a(),o(8,"p",7),p(9),a()()(),o(10,"div",3)(11,"div",4)(12,"mat-icon"),p(13,"task_alt"),a()(),o(14,"div",5)(15,"p",6),p(16,"Completed"),a(),o(17,"p",7),p(18),a()()(),o(19,"div",3)(20,"div",4)(21,"mat-icon"),p(22,"downloading"),a()(),o(23,"div",5)(24,"p",6),p(25,"In progress"),a(),o(26,"p",7),p(27),a()()(),o(28,"div",3)(29,"div",4)(30,"mat-icon"),p(31,"apps"),a()(),o(32,"div",5)(33,"p",6),p(34,"Open"),a(),o(35,"p",7),p(36),a()()()()),e&2){let n=t;s(9),u("",n.totalTasksCount," Tasks"),s(9),u("",n.completedTasksCount," Tasks"),s(9),u("",n.inProgressTasksCount," Tasks"),s(9),u("",n.openTasksCount," Tasks")}}function Ge(e,t){e&1&&l(0,"ngx-skeleton-loader",2),e&2&&_("theme",C(1,Oe))}function Je(e,t){if(e&1&&f(0,qe,37,4,"div",1)(1,Ge,1,2,"ngx-skeleton-loader",2),e&2){let n,r=t;m(0,(n=r.data)?0:-1,n),s(),m(1,r.loading||r.error?1:-1)}}function Qe(e,t){if(e&1&&(o(0,"div",8)(1,"div",10)(2,"p",11),p(3,"Tasks by teams"),a()(),o(4,"div"),l(5,"canvas",12),a()()),e&2){let n=h(),r=h();s(5),_("data",n.data)("options",r.barChartOptions)}}function Xe(e,t){e&1&&l(0,"ngx-skeleton-loader",9),e&2&&_("theme",C(1,Oe))}function Ze(e,t){if(e&1&&f(0,Qe,6,2,"div",8)(1,Xe,1,2,"ngx-skeleton-loader",9),e&2){let n=t;m(0,n.data?0:-1),s(),m(1,n.loading||n.error?1:-1)}}var Se=(()=>{let t=class t{constructor(r){this.usersAnalyticsService=r,this.tasksAnalytics$=this.usersAnalyticsService.getStatistics(),this.completedTasksByTeams$=this.usersAnalyticsService.getTasksCountByTeams().pipe(M(i=>({labels:i.labels,datasets:[{data:i.data,label:"Active tasks by teams",borderRadius:8,backgroundColor:"rgba(6, 142, 68, 0.8)"}]}))),this.barChartOptions={responsive:!0,maintainAspectRatio:!1,font:{family:"Poppins, sans-serif",size:14}}}};t.\u0275fac=function(i){return new(i||t)(x(F))},t.\u0275cmp=g({type:t,selectors:[["app-overview-tasks-section"]],decls:7,vars:10,consts:[[1,"overview-section"],[1,"overview__tasks"],["count","1","appearance","line",1,"overview-section__task-analytics-loading",3,"theme"],[1,"overview__tasks-item"],[1,"overview__tasks-item-icon"],[1,"overview__tasks-item-body"],[1,"overview__tasks-item-title"],[1,"overview__tasks-item-number"],[1,"overview-section-graph"],["count","1","appearance","line",1,"overview-section__tasks-by-teams-loading",3,"theme"],[1,"overview-section-graph-toolbar"],[1,"overview-section-graph-title"],["baseChart","","height","250",3,"data","options"]],template:function(i,d){if(i&1&&(o(0,"div",0),f(1,Je,2,2),c(2,"withLoading"),c(3,"async"),f(4,Ze,2,2),c(5,"withLoading"),c(6,"async"),a()),i&2){let w,T;s(),m(1,(w=v(3,4,v(2,2,d.tasksAnalytics$)))?1:-1,w),s(3),m(4,(T=v(6,8,v(5,6,d.completedTasksByTeams$)))?4:-1,T)}},dependencies:[$,O,j,b,y],styles:[".overview__tasks[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);gap:12px;grid-column:span 2/span 2}@media screen and (max-width: 48em){.overview__tasks[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.overview__tasks-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;background:#fff;padding:12px;color:#242424;border:1px solid #e2e8f0}.overview__tasks-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:38px;width:38px;height:38px}.overview__tasks-item-title[_ngcontent-%COMP%]{font-weight:600}.overview__tasks-item-body[_ngcontent-%COMP%]{text-align:center;margin-top:12px}.overview__tasks-item-number[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:#707070}.overview-section__tasks-by-teams-loading[_ngcontent-%COMP%]{grid-column:span 3/span 3}@media screen and (max-width: 48em){.overview-section__tasks-by-teams-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.overview-section__task-analytics-loading[_ngcontent-%COMP%]{grid-column:span 2/span 2}@media screen and (max-width: 48em){.overview-section__task-analytics-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}"],changeDetection:0});let e=t;return e})();var tt=(e,t)=>t.id,it=e=>["/","hub","teams",e],nt=()=>({height:"100%","min-height":"180px","border-radius":"8px"});function ot(e,t){if(e&1&&(o(0,"a",6)(1,"p",7),p(2),a(),o(3,"p",8),p(4),c(5,"date"),a()()),e&2){let n=t.$implicit;_("routerLink",re(9,it,n.id)),s(2),E(n.name),s(2),ae(" Created at ",P(5,6,n.createdDate,"MMM d, y")," by ",n.owner.firstname," ",n.owner.lastname,". ",n.description,". ")}}function at(e,t){if(e&1){let n=ne();o(0,"div",0)(1,"div",2)(2,"h5",3),p(3,"My teams"),a()(),o(4,"div",4)(5,"button",5),oe("click",function(){ee(n);let i=h(2);return te(i.onCreateTeam())}),o(6,"mat-icon"),p(7,"add"),a(),o(8,"p"),p(9,"Create team"),a()(),B(10,ot,6,11,"a",6,tt),a()()}if(e&2){let n=h();s(10),I(n.data)}}function rt(e,t){e&1&&l(0,"ngx-skeleton-loader",1),e&2&&_("theme",C(1,nt))}function st(e,t){if(e&1&&f(0,at,12,0,"div",0)(1,rt,1,2,"ngx-skeleton-loader",1),e&2){let n=t;m(0,n.data?0:-1),s(),m(1,n.loading?1:-1)}}var Me=(()=>{let t=class t{constructor(r,i,d){this.teamsService=r,this.dialog=i,this.toastService=d,this.teams$=this.teamsService.teams$}onCreateTeam(){this.dialog.open(ve,{minWidth:"30%"}).afterClosed().pipe(Q(i=>i?this.teamsService.createTeam(i):V),q(i=>(this.toastService.open("Failed to create team"),K(()=>i))),G(1)).subscribe(()=>{this.toastService.open("Successfully created team"),this.teamsService.refetchTeams()})}};t.\u0275fac=function(i){return new(i||t)(x(U),x(le),x(ce))},t.\u0275cmp=g({type:t,selectors:[["app-overview-teams-list"]],decls:3,vars:5,consts:[[1,"overview__teams"],["count","1","appearance","line",1,"overview__teams-loading",3,"theme"],[1,"overview__teams-header"],[1,"overview__teams-title"],[1,"overview__teams-list"],[1,"overview__teams-add",3,"click"],[1,"overview__teams-item",3,"routerLink"],[1,"overview__teams-item-title"],[1,"overview__teams-item-description"]],template:function(i,d){if(i&1&&(f(0,st,2,2),c(1,"withLoading"),c(2,"async")),i&2){let w;m(0,(w=v(2,3,v(1,1,d.teams$)))?0:-1,w)}},dependencies:[$,de,O,b,k,y],styles:[".overview__teams[_ngcontent-%COMP%]{padding:22px;border:1px solid #e2e8f0;background:#fff;border-radius:8px}.overview__teams-title[_ngcontent-%COMP%]{color:#242424;font-size:16px;font-weight:600}.overview__teams-list[_ngcontent-%COMP%]{margin-top:20px;display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));grid-template-rows:none}.overview__teams-add[_ngcontent-%COMP%]{min-height:90px;padding:22px;display:flex;align-items:center;gap:8px;justify-content:center;border:1px dashed #e2e8f0;border-radius:8px;cursor:pointer;color:#424242;font-weight:500}.overview__teams-add[_ngcontent-%COMP%]:hover{background:#ebebeb}.overview__teams-item[_ngcontent-%COMP%]{padding:14px;background:#fff;border:1px solid #e2e8f0;border-radius:8px;cursor:pointer}.overview__teams-item-title[_ngcontent-%COMP%]{color:#242424;font-size:16px;font-weight:600}.overview__teams-item-description[_ngcontent-%COMP%]{margin-top:2px!important;font-size:14px;color:#525766;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.overview-section__teams-loading[_ngcontent-%COMP%]{grid-column:span 3/span 3}"],changeDetection:0});let e=t;return e})();var ke=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=g({type:t,selectors:[["app-overview-home"]],decls:10,vars:0,consts:[["value","Overview"],[1,"page","overview-wrapper"],[1,"overview-sections"],[1,"overview-left"],[1,"overview-right"]],template:function(i,d){i&1&&(l(0,"app-page-header",0),o(1,"section",1)(2,"div",2)(3,"div",3),l(4,"app-overview-tasks-section")(5,"app-overview-performance-section")(6,"app-overview-teams-list"),a(),o(7,"div",4),l(8,"app-overview-sidebar-calendar")(9,"app-overview-sidebar-events"),a()()())},dependencies:[fe,Me,be,Se,Pe,ye],styles:["[_nghost-%COMP%]     .overview-sections{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:20px}@media screen and (max-width: 48em){[_nghost-%COMP%]     .overview-sections{gap:16px;margin-top:16px}}[_nghost-%COMP%]     .overview-left{display:flex;flex-direction:column;gap:20px;grid-column:span 3/span 3}@media screen and (max-width: 64em){[_nghost-%COMP%]     .overview-left{grid-column:span 4/span 4}}[_nghost-%COMP%]     .overview-section{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:20px}@media screen and (max-width: 48em){[_nghost-%COMP%]     .overview-section{gap:16px}}[_nghost-%COMP%]     .overview-section-graph{grid-column:span 3/span 3;padding:24px;border:1px solid #e2e8f0;border-radius:8px;background:#fff}@media screen and (max-width: 48em){[_nghost-%COMP%]     .overview-section-graph{grid-column:span 5/span 5}}[_nghost-%COMP%]     .overview-section-graph-title{font-size:16px;font-weight:500}[_nghost-%COMP%]     .overview-section-graph-toolbar{display:flex;justify-content:space-between;gap:12px;margin-bottom:24px}[_nghost-%COMP%]     .overview-section-graph-select{padding:6px;border:1px solid #e2e8f0;border-radius:8px}[_nghost-%COMP%]     .overview-section-statistics{grid-column:span 2/span 2;padding:20px;border:1px solid #e2e8f0;border-radius:8px;background:#fff}@media screen and (max-width: 48em){[_nghost-%COMP%]     .overview-section-statistics{grid-column:span 5/span 5}}[_nghost-%COMP%]     .overview-section-statistics.performance{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:32px}[_nghost-%COMP%]     .overview-performance-wrapper{position:relative}[_nghost-%COMP%]     .overview-performance-label{font-size:16px;font-weight:600}[_nghost-%COMP%]     .overview-performance-value{width:100%;position:absolute;text-align:center;top:42%;font-size:20px;font-weight:600}[_nghost-%COMP%]     .overview-right{display:flex;flex-direction:column;gap:20px;grid-column:span 1/span 1}@media screen and (max-width: 48em){[_nghost-%COMP%]     .overview-right{gap:16px}}@media screen and (max-width: 64em){[_nghost-%COMP%]     .overview-right{grid-column:span 4/span 4}}[_nghost-%COMP%]     .overview-sidebar{padding:18px;border:1px solid #e2e8f0;border-radius:8px;background:#fff}[_nghost-%COMP%]     .overview-sidebar-title{font-size:16px;font-weight:600}[_nghost-%COMP%]     .overview-sidebar-list{margin-top:16px;display:flex;flex-direction:column;gap:12px}[_nghost-%COMP%]     .overview-sidebar-list-divider{width:100%;height:1px;background:#ecf3f0}[_nghost-%COMP%]     .overview-events-item{display:flex;align-items:center;gap:12px;justify-content:space-between}[_nghost-%COMP%]     .overview-events-item-description{font-size:12px;color:#a1a4aa}[_nghost-%COMP%]     .overview-events-item-time{color:#a1a4aa}"],changeDetection:0});let e=t;return e})();var mt=[{path:"",component:ke,title:"Overview | Kaiteki"}],Te=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=L({type:t}),t.\u0275inj=D({imports:[N.forChild(mt),N]});let e=t;return e})();var Yt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=L({type:t}),t.\u0275inj=D({imports:[pe,he,Te]});let e=t;return e})();export{Yt as OverviewModule};
