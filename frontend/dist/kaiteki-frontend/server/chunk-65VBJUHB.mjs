import './polyfills.server.mjs';
import{a as Tt}from"./chunk-GZ6MRWX4.mjs";import{a as re}from"./chunk-CKIO23JR.mjs";import{b as ze}from"./chunk-AM4SDK4B.mjs";import{a as E}from"./chunk-HOL4TTOB.mjs";import{Aa as We,Ba as Ke,E as Ie,G as Ve,I as W,K as je,L as K,La as Ye,M as Y,Ma as Je,N as J,Na as Xe,O as S,Oa as Ze,Q as X,Ra as et,Sa as tt,T as Z,Ta as it,U as ee,Ua as nt,Va as ot,Wa as rt,Xa as at,Ya as lt,Za as st,_a as mt,a as De,aa as Le,b as A,ca as $e,cb as pt,da as Re,db as ct,ea as Ne,eb as dt,f as Ee,fa as Ue,ga as Be,h as ke,ha as te,i as Oe,ka as ie,la as ne,n as ce,na as oe,pa as Ae,qa as Ge,sa as He,t as G,u as H,v as q,w as Q,wa as qe,za as Qe}from"./chunk-YAF7A7YL.mjs";import{b as Pe}from"./chunk-IWV7G257.mjs";import{Aa as I,Bb as p,F as j,Hb as C,I as ue,Ib as ve,Jb as me,Ka as Ce,Kb as M,Lb as b,Mb as o,N as _e,Nb as r,Ob as c,Pb as y,Qb as T,Rc as be,Sb as U,Vb as g,X as ge,Xb as h,Y as F,_ as L,_b as we,aa as he,dc as B,ea as $,eb as xe,ec as s,f as P,fa as R,fc as D,gc as x,hb as m,ib as d,ja as k,k as de,o as w,oc as Fe,pa as u,qa as N,rd as ye,s as fe,sd as Te,wd as Se,xc as V,yc as pe,za as O,zb as f,zc as Me}from"./chunk-JAB3SG4D.mjs";import"./chunk-6VT7JIM2.mjs";import{a as se,g as yt}from"./chunk-FME56UVT.mjs";var ut=(()=>{let t=class t{constructor(n,i){this.dialogRef=n,this.toastService=i,this.form=new J({description:new S("",[je.required]),files:new S([],[Ge.filesLimit(1)])})}onBackClick(){this.dialogRef.close()}onSubmit(){let{description:n,files:i}=this.form.getRawValue(),l=i?.[0]??void 0;if(!l||!n){this.toastService.error("Missing required fields");return}let _={description:n,file:l};this.dialogRef.close(_)}};t.\u0275fac=function(i){return new(i||t)(d(Le),d(E))},t.\u0275cmp=u({type:t,selectors:[["app-upload-file-dialog"]],decls:14,vars:3,consts:[["mat-dialog-title","",1,"upload-file__title"],["mat-dialog-content","",1,"upload-file"],[1,"upload-file__form",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","description","placeholder","Enter File Description","cdkTextareaAutosize","","cdkAutosizeMinRows","1"],["formControlName","files","fileslimit","1",3,"multiple"],["align","end"],["mat-stroked-button","",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"click","disabled"]],template:function(i,l){i&1&&(o(0,"h4",0),s(1,` Upload File
`),r(),o(2,"section",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),s(6,"Description"),r(),c(7,"textarea",4),r(),c(8,"file-upload",5),r()(),o(9,"mat-dialog-actions",6)(10,"button",7),g("click",function(){return l.onBackClick()}),s(11," Back "),r(),o(12,"button",8),g("click",function(){return l.onSubmit()}),s(13," Upload "),r()()),i&2&&(m(3),p("formGroup",l.form),m(5),p("multiple",!1),m(4),p("disabled",l.form.invalid))},dependencies:[A,ne,ie,te,Be,Re,Ue,Ne,X,W,K,Y,Z,ee,Ae,He],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.upload-file__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.upload-file__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:16px}.upload-file__form-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.row[_ngcontent-%COMP%]{display:flex;gap:22px}.quill__editor[_ngcontent-%COMP%]{width:100%;margin-bottom:1.6rem}"],changeDetection:0});let e=t;return e})();function Vt(e,t){if(e&1&&(o(0,"mat-option",5),s(1),r()),e&2){let a=t.$implicit;p("matTooltip",a.name)("value",a.id),m(),x(" ",a.name," ")}}function zt(e,t){if(e&1&&(o(0,"mat-option",5),s(1),r()),e&2){let a=t.$implicit;p("matTooltip",a.name)("value",a.id),m(),x(" ",a.name," ")}}var _t=(()=>{let t=class t{constructor(n,i,l){this.cd=n,this.router=i,this.route=l,this.filter=new Ce,this.destroy$=new P,this.views=[{id:"list",name:"List"},{id:"table",name:"Table"}],this.sorting=[{id:"createdAt,asc",name:"Date \u2197"},{id:"createdAt,desc",name:"Date \u2198"}],this.form=new J({searchValue:new S(""),view:new S(""),sort:new S("")})}ngOnInit(){this.patchInitialFormValues(),this.trackFormValueChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}patchInitialFormValues(){let n=this.getQueryParameters();this.form.patchValue({searchValue:n.searchValue,view:n.view,sort:n.sort}),this.filter.emit(n),this.cd.markForCheck()}trackFormValueChanges(){this.form.valueChanges.pipe(ue(800),_e(),L(this.destroy$)).subscribe(n=>{let i={searchValue:n.searchValue??void 0,view:n.view??void 0,sort:n.sort??void 0};this.saveQueryParameters(i),this.filter.emit(i)})}saveQueryParameters(n){this.router.navigate([],{queryParams:n,queryParamsHandling:"merge"})}getQueryParameters(){let n={searchValue:"",view:this.views[0].id,sort:this.sorting[1].id},i=this.route.snapshot.queryParams;return Ve(i,n)}};t.\u0275fac=function(i){return new(i||t)(d(be),d(ke),d(Ee))},t.\u0275cmp=u({type:t,selectors:[["app-files-filter"]],outputs:{filter:"filter"},decls:23,vars:1,consts:[[1,"filter"],[1,"filter__fields",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","searchValue","type","text","placeholder","Filename"],["formControlName","view"],[3,"matTooltip","value"],["formControlName","sort"]],template:function(i,l){i&1&&(o(0,"section",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),s(5,"Filters"),r()(),o(6,"form",1)(7,"mat-form-field",2)(8,"mat-label"),s(9,"Search"),r(),c(10,"input",3),r(),o(11,"mat-form-field",2)(12,"mat-label"),s(13,"View"),r(),o(14,"mat-select",4),M(15,Vt,2,3,"mat-option",5,me),r()(),o(17,"mat-form-field",2)(18,"mat-label"),s(19,"Sorting"),r(),o(20,"mat-select",6),M(21,zt,2,3,"mat-option",5,me),r()()()()()()),i&2&&(m(6),p("formGroup",l.form),m(9),b(l.views),m(6),b(l.sorting))},dependencies:[Ze,Ye,Je,Xe,ne,ie,te,Qe,De,oe,X,W,K,Y,Z,ee],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter[_ngcontent-%COMP%]{margin-top:22px}.filter__fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;align-items:start}"],changeDetection:0});let e=t;return e})();var gt=(()=>{let t=class t{constructor(n){this.httpClient=n,this.baseUrl="/api/v1/team-files"}uploadTeamFile(n,i){let l=new FormData;return l.append("file",i.file),l.append("description",i.description),this.httpClient.post(`${this.baseUrl}`,l,{params:{teamId:n}})}getTeamFiles(n,i,l){let _=se(se({teamId:n},l),i);return this.httpClient.get(`${this.baseUrl}`,{params:Ie(_)})}deleteTeamFile(n,i){return this.httpClient.delete(`${this.baseUrl}/${i}`,{params:{teamId:n}})}updateTeamFile(n,i,l){return this.httpClient.put(`${this.baseUrl}/${i}`,l,{params:{teamId:n}})}};t.\u0275fac=function(i){return new(i||t)(k(Pe))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ae=(()=>{let t=class t{constructor(n,i){this.teamFilesApiService=n,this.teamsService=i,this.refreshTeamFilesSubject=new P,this.refreshTeamFiles$=this.refreshTeamFilesSubject.asObservable()}triggerRefreshTeamFiles(){this.refreshTeamFilesSubject.next()}uploadTeamFile(n){return this.teamsService.currentTeam$.pipe(F(i=>i?this.teamFilesApiService.uploadTeamFile(i.id,n):w(()=>Error("No current team"))))}getTeamFiles(n,i){return this.teamsService.currentTeam$.pipe(F(l=>l?this.teamFilesApiService.getTeamFiles(l.id,n,i):w(()=>Error("No current team"))))}deleteTeamFile(n){return this.teamsService.currentTeam$.pipe(F(i=>i?this.teamFilesApiService.deleteTeamFile(i.id,n):w(()=>Error("No current team"))))}updateTeamFile(n,i){return this.teamsService.currentTeam$.pipe(F(l=>l?this.teamFilesApiService.updateTeamFile(l.id,n,i):w(()=>Error("No current team"))))}};t.\u0275fac=function(i){return new(i||t)(k(gt),k(ze))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ct=(()=>{let t=class t{constructor(n,i,l){this.dialog=n,this.teamFilesService=i,this.toastrService=l,this.unsubscribe$=new P}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onUploadButtonClick(){this.dialog.open(ut,{minWidth:"30%"}).afterClosed().pipe(F(i=>i?this.teamFilesService.uploadTeamFile(i):de),j(i=>(this.toastrService.error("Failed to upload a team file"),w(()=>i))),L(this.unsubscribe$)).subscribe(()=>{this.toastrService.open("Successfully uploaded team file"),this.teamFilesService.triggerRefreshTeamFiles()})}};t.\u0275fac=function(i){return new(i||t)(d($e),d(ae),d(E))},t.\u0275cmp=u({type:t,selectors:[["app-files-toolbar"]],decls:8,vars:0,consts:[[1,"files__toolbar"],[1,"files__toolbar-left"],[1,"files__toolbar-right"],["icon","upload",1,"files__toolbar-item",3,"click"]],template:function(i,l){i&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),s(3,"Files Manager"),r()(),o(4,"div",2)(5,"app-button",3),g("click",function(){return l.onUploadButtonClick()}),o(6,"p"),s(7,"Upload"),r()()()())},dependencies:[ct],styles:["h1[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.files__toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;justify-content:space-between;overflow-x:auto;overflow-y:hidden}.files__toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}@media (max-width: 40em){.files__toolbar-left[_ngcontent-%COMP%]{display:none}}.files__toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}"],changeDetection:0});let e=t;return e})();var xt=yt(Tt());var Rt=["Bytes","KB","MB","GB","TB"];function le(e){let t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(2)} ${Rt[t]}`}function At(e,t){if(e&1&&c(0,"img",4),e&2){let a=h(2);we("src","api/v1/files/",a.file.fileId,"",xe)}}function Gt(e,t){e&1&&(o(0,"mat-icon",10),s(1,"insert_drive_file"),r(),o(2,"p",11),s(3,"No document preview"),r())}function Ht(e,t){if(e&1&&(o(0,"div",1)(1,"div",3),f(2,At,1,2,"img",4)(3,Gt,4,0),r(),o(4,"p",5),s(5),r(),o(6,"p",6),s(7),r(),o(8,"div",7)(9,"p",8),s(10),r(),o(11,"p",9),s(12),r()()()),e&2){let a=h(),n=B(2);m(),p("matMenuTriggerFor",n),m(),C(2,a.isImage?2:3),m(2),p("matMenuTriggerFor",n)("matTooltip",a.file.description),m(),x(" ",a.file.description," "),m(2),D(a.file.filename),m(3),D(a.fileType),m(2),x(" ",a.getFormattedFileSize(a.file.size)," ")}}var vt=(()=>{let t=class t{constructor(n){this.filesService=n,this.file=null}getFormattedFileSize(n){return le(n)}onDownloadClick(){this.file&&this.filesService.downloadFile(this.file.fileId)}get fileType(){return this.file?xt.default[this.file.contentType].extensions?.[0].toLocaleUpperCase()??"Document":"Document"}get isImage(){return this.file?this.file.contentType.includes("image/"):!1}};t.\u0275fac=function(i){return new(i||t)(d(re))},t.\u0275cmp=u({type:t,selectors:[["app-files-list-item"]],inputs:{file:"file"},decls:7,vars:1,consts:[["menu","matMenu"],[1,"files__item"],["mat-menu-item","",3,"click"],[1,"files__item-preview-wrapper",3,"matMenuTriggerFor"],["loading","lazy","alt","Preview",1,"files__item-preview-img",3,"src"],[1,"files__item-title",3,"matMenuTriggerFor","matTooltip"],[1,"files__item-desc"],[1,"files__item-bottom"],[1,"files__item-type"],[1,"files__item-size"],[1,"files__item-preview-icon"],[1,"files__item-preview-title"]],template:function(i,l){if(i&1){let _=U();f(0,Ht,13,8,"div",1),o(1,"mat-menu",null,0)(3,"button",2),g("click",function(){return O(_),I(l.onDownloadClick())}),o(4,"mat-icon"),s(5,"download"),r(),s(6," Download "),r()()}i&2&&C(0,l.file?0:-1)},dependencies:[G,q,H,Q,oe],styles:[".files__item[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;background:#fff;border:1px solid #e2e8f0}.files__item-bottom[_ngcontent-%COMP%]{margin-top:16px;display:flex;align-items:center;gap:8px}.files__item-type[_ngcontent-%COMP%]{width:fit-content;font-size:12px;padding:4px 16px;border-radius:8px;background:#f1f5fa;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.files__item-title[_ngcontent-%COMP%]{margin-top:20px!important;margin-bottom:6px!important;font-size:14px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;cursor:pointer}.files__item-size[_ngcontent-%COMP%]{width:fit-content;font-size:12px;padding:4px 16px;border-radius:8px;background:#f1f5fa}.files__item-desc[_ngcontent-%COMP%]{font-size:12px;color:#575757;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.files__item-preview-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:240px;background:#f3f4f6;padding:20px;overflow:hidden;border-radius:8px;cursor:pointer}.files__item-preview-img[_ngcontent-%COMP%]{width:100%;max-height:100%;object-fit:contain}.files__item-preview-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px;color:#9ca3af}.files__item-preview-title[_ngcontent-%COMP%]{margin-top:12px!important;color:#9ca3af;font-size:12px}"],changeDetection:0});let e=t;return e})();var Qt=(e,t)=>t.id;function Wt(e,t){if(e&1&&c(0,"app-files-list-item",1),e&2){let a=t.$implicit;p("file",a)}}var wt=(()=>{let t=class t{constructor(){this.files=[]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=u({type:t,selectors:[["app-files-list-view"]],inputs:{files:"files"},decls:3,vars:0,consts:[[1,"files__list"],[3,"file"]],template:function(i,l){i&1&&(o(0,"div",0),M(1,Wt,1,1,"app-files-list-item",1,Qt),r()),i&2&&(m(),b(l.files))},dependencies:[vt],styles:[".files__list[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-template-rows:none}"],changeDetection:0});let e=t;return e})();function Jt(e,t){e&1&&(o(0,"th",13),s(1," Filename "),r())}function Xt(e,t){if(e&1&&(o(0,"td",14)(1,"p"),s(2),r()()),e&2){let a=t.$implicit;m(2),D(a.filename)}}function Zt(e,t){e&1&&(o(0,"th",13),s(1," Created Date "),r())}function ei(e,t){if(e&1&&(o(0,"td",14),s(1),V(2,"date"),r()),e&2){let a=t.$implicit;m(),x(" ",Me(2,1,a.createdDate,"EEEE, MMMM d")," ")}}function ti(e,t){e&1&&(o(0,"th",13),s(1," Type "),r())}function ii(e,t){if(e&1&&(o(0,"td",14),s(1),r()),e&2){let a=t.$implicit;m(),x(" ",a.contentType," ")}}function ni(e,t){e&1&&(o(0,"th",13),s(1," Size "),r())}function oi(e,t){if(e&1&&(o(0,"td",14),s(1),r()),e&2){let a=t.$implicit,n=h();m(),x(" ",n.getFormattedFileSize(a.size)," ")}}function ri(e,t){e&1&&(o(0,"th",13),s(1," Description "),r())}function ai(e,t){if(e&1&&(o(0,"td",14)(1,"p"),s(2),r()()),e&2){let a=t.$implicit;m(2),D(a.description)}}function li(e,t){e&1&&c(0,"th",13)}function si(e,t){if(e&1){let a=U();o(0,"td",14)(1,"button",15),g("click",function(i){O(a);let l=h();return I(l.onMoreClick(i))}),o(2,"mat-icon"),s(3,"more_horizont"),r()(),o(4,"mat-menu",null,0)(6,"button",16),g("click",function(){let i=O(a).$implicit,l=h();return I(l.onDownloadClick(i))}),o(7,"mat-icon"),s(8,"download"),r(),s(9," Download "),r()()()}if(e&2){let a=B(5);m(),p("matMenuTriggerFor",a)}}function mi(e,t){e&1&&c(0,"tr",17)}function pi(e,t){e&1&&c(0,"tr",18)}var Ft=(()=>{let t=class t{constructor(n){this.filesService=n,this.files=[],this.displayedColumns=["filename","createdDate","type","size","description","actions"]}onDownloadClick(n){this.filesService.downloadFile(n.fileId)}onMoreClick(n){n.stopPropagation()}getFormattedFileSize(n){return le(n)}};t.\u0275fac=function(i){return new(i||t)(d(re))},t.\u0275cmp=u({type:t,selectors:[["app-files-table-view"]],inputs:{files:"files"},decls:23,vars:3,consts:[["taskMoreMenu","matMenu"],[1,"files-table__wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","filename"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","type"],["matColumnDef","size"],["matColumnDef","description"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(o(0,"div",1)(1,"table",2),c(2,"caption"),y(3,3),f(4,Jt,2,0,"th",4)(5,Xt,3,1,"td",5),T(),y(6,6),f(7,Zt,2,0,"th",4)(8,ei,3,4,"td",5),T(),y(9,7),f(10,ti,2,0,"th",4)(11,ii,2,1,"td",5),T(),y(12,8),f(13,ni,2,0,"th",4)(14,oi,2,1,"td",5),T(),y(15,9),f(16,ri,2,0,"th",4)(17,ai,3,1,"td",5),T(),y(18,10),f(19,li,1,0,"th",4)(20,si,10,1,"td",5),T(),f(21,mi,1,0,"tr",11)(22,pi,1,0,"tr",12),r()()),i&2&&(m(),p("dataSource",l.files),m(20),p("matHeaderRowDef",l.displayedColumns),m(),p("matRowDefColumns",l.displayedColumns))},dependencies:[G,q,H,Q,et,it,at,nt,tt,lt,ot,rt,st,mt,Te],styles:["[_nghost-%COMP%]     .mat-mdc-table{border:1px solid #e2e8f0;background:none}[_nghost-%COMP%]     .mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-header-cell{font-size:12px;text-transform:uppercase;color:#afafaf}[_nghost-%COMP%]     .mdc-data-table__cell, [_nghost-%COMP%]     .mdc-data-table__header-cell{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-row:hover .mat-mdc-cell{background:#e2e8f0}[_nghost-%COMP%]     .mat-mdc-table tbody, [_nghost-%COMP%]     .mat-mdc-table tfoot, [_nghost-%COMP%]     .mat-mdc-table thead, [_nghost-%COMP%]     .mat-mdc-cell, [_nghost-%COMP%]     .mat-mdc-footer-cell, [_nghost-%COMP%]     .mat-mdc-header-row, [_nghost-%COMP%]     .mat-mdc-row, [_nghost-%COMP%]     .mat-mdc-footer-row, [_nghost-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{background:none}.files-table__wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-radius:8px;background:#fff!important;padding:0 12px 12px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8fafc}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:160px;padding:14px}th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let e=t;return e})();var di=()=>({height:"260px","border-radius":"8px"});function fi(e,t){if(e&1&&c(0,"app-files-list-view",6),e&2){let a=h(3);p("files",a.data)}}function ui(e,t){if(e&1&&c(0,"app-files-table-view",6),e&2){let a=h(3);p("files",a.data)}}function _i(e,t){if(e&1&&f(0,fi,1,1)(1,ui,1,1),e&2){let a,n=h(3);C(0,(a=n.filter.view)==="list"?0:a==="table"?1:-1)}}function gi(e,t){e&1&&(o(0,"div",7)(1,"p"),s(2,"No files found"),r()())}function hi(e,t){if(e&1&&f(0,_i,2,1)(1,gi,3,0),e&2){let a=h();C(0,a.data.length>0?0:1)}}function Ci(e,t){e&1&&(o(0,"div",8),c(1,"ngx-skeleton-loader",9),r()),e&2&&(m(),p("theme",Fe(1,di)))}function xi(e,t){if(e&1&&(o(0,"div",4),M(1,Ci,2,2,"div",8,ve),r()),e&2){let a=h(2);m(),b(a.skeletonArray)}}function vi(e,t){e&1&&(o(0,"div",5)(1,"h1",10),s(2,"404"),r(),o(3,"div",11)(4,"h2",12),s(5," Oops.. "),c(6,"br"),s(7," We couldn't find a files you are looking for. "),r(),o(8,"button",13)(9,"a",14),s(10,"Return Back"),r()()()())}function wi(e,t){if(e&1&&f(0,hi,2,1)(1,xi,3,0,"div",4)(2,vi,11,0,"div",5),e&2){let a=t;C(0,a.data?0:-1),m(),C(1,a.loading?1:-1),m(),C(2,a.error?2:-1)}}var Mt=(()=>{let t=class t{constructor(n,i){this.teamFilesService=n,this.toastService=i,this.skeletonArray=new Array(10).fill(0),this.filter={},this.pagination=We,this.files$=this.teamFilesService.refreshTeamFiles$.pipe(ge(null),F(()=>this.loadTeamFiles()))}ngOnInit(){this.teamFilesService.triggerRefreshTeamFiles()}onFilter(n){this.filter=n,this.teamFilesService.triggerRefreshTeamFiles()}onPage(n){this.pagination.size=n.size,this.pagination.page=n.page,this.teamFilesService.triggerRefreshTeamFiles()}loadTeamFiles(){let n={size:this.pagination.size,page:this.pagination.page};return this.teamFilesService.getTeamFiles(n,this.filter).pipe(he(i=>{this.pagination.page=i.number,this.pagination.size=i.size,this.pagination.totalElements=i.totalElements,this.pagination.totalPages=i.totalPages}),fe(i=>i.content),j(i=>(this.toastService.open("Failed to get team files"),w(()=>i))))}};t.\u0275fac=function(i){return new(i||t)(d(ae),d(E))},t.\u0275cmp=u({type:t,selectors:[["app-files-list"]],decls:8,vars:6,consts:[[1,"page","files"],[3,"filter"],[1,"files__content"],[3,"page","pagination"],[1,"files__loading"],[1,"files__error","page"],[3,"files"],[1,"files__empty"],[1,"files__loading-element"],["count","1","appearance","line",3,"theme"],[1,"files__error-title"],[1,"files__error-content"],[1,"files__error-subtitle"],["mat-flat-button","","color","primary","routerLink","/hub/overview"],["routerLink","/hub/overview"]],template:function(i,l){if(i&1&&(o(0,"section",0),c(1,"app-files-toolbar"),o(2,"app-files-filter",1),g("filter",function(z){return l.onFilter(z)}),r(),o(3,"div",2),f(4,wi,3,3),V(5,"withLoading"),V(6,"async"),r(),o(7,"app-paginator",3),g("page",function(z){return l.onPage(z)}),r()()),i&2){let _;m(4),C(4,(_=pe(6,4,pe(5,2,l.files$)))?4:-1,_),m(3),p("pagination",l.pagination)}},dependencies:[A,Oe,Ke,qe,Ct,_t,wt,Ft,ye,pt],styles:[".files[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.files__content[_ngcontent-%COMP%]{flex:1;margin-top:22px}.files__empty[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;font-size:14px;font-weight:400;color:#bdbdbd;text-transform:capitalize}.files__loading[_ngcontent-%COMP%]{gap:20px;overflow-x:auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));grid-template-rows:none}.files__error[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;height:100%}.files__error-content[_ngcontent-%COMP%]{z-index:10;display:flex;flex-direction:column;align-items:center}.files__error-title[_ngcontent-%COMP%]{color:#d8d7d7;font-size:280px;font-weight:600;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5;opacity:.25}@media screen and (max-width: 48em){.files__error-title[_ngcontent-%COMP%]{font-size:180px}}.files__error-subtitle[_ngcontent-%COMP%]{color:#000;font-size:26px;margin-bottom:26px;text-align:center;line-height:1.4}@media screen and (max-width: 48em){.files__error-subtitle[_ngcontent-%COMP%]{font-size:20px}}"],changeDetection:0});let e=t;return e})();var Fi=[{path:"",component:Mt}],bt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=N({type:t}),t.\u0275inj=R({imports:[ce.forChild(Fi),ce]});let e=t;return e})();var Mn=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=N({type:t}),t.\u0275inj=R({imports:[Se,dt,bt]});let e=t;return e})();export{Mn as FilesModule};
