import './polyfills.server.mjs';
import{a as f,b as ce,c as me,d as pe,e as de,f as ve,g as fe,h as he,i as ue}from"./chunk-NN5CVUGD.mjs";import{a as le}from"./chunk-L5LRC7N5.mjs";import"./chunk-6TNBXS62.mjs";import"./chunk-OXKDUHB6.mjs";import{a as A}from"./chunk-25DJJPSL.mjs";import{G as z,L as K,M as J,N as X,O as Y,Q as Z,T as ee,U as te,V as ne,W as ie,X as oe,ca as re,eb as se,f as H,h as U,n as E,ya as ae}from"./chunk-UGHUVQZH.mjs";import"./chunk-IWV7G257.mjs";import{Bb as l,Da as g,Hb as x,I as S,Ib as N,Ka as j,Kb as W,Lb as B,Mb as r,N as I,Nb as a,Ob as u,Rc as R,Vb as v,Xb as _,_ as T,ec as P,f as M,fa as k,gc as $,hb as s,ib as p,pa as m,qa as D,rd as Q,ub as C,wd as q,xc as L,yc as G,zb as b}from"./chunk-JAB3SG4D.mjs";import"./chunk-6VT7JIM2.mjs";import{a as F,b as V}from"./chunk-FME56UVT.mjs";function De(t,e){if(t&1&&(r(0,"option",6),P(1),a()),t&2){let c=e.$implicit;l("value",c.id),s(),$(" ",c.name," ")}}var we=(()=>{let e=class e{constructor(n,i,o,d){this.cd=n,this.router=i,this.route=o,this.toastService=d,this.filter=new j,this.destroy$=new M,this.views=[{id:f.Day,name:"Day"},{id:f.Week,name:"Week"},{id:f.Month,name:"Month"}],this.form=new X({view:new Y(f.Week)})}ngOnInit(){this.patchInitialFormValues(),this.trackFormValueChanges()}ngOnDestroy(){this.destroy$.complete()}patchInitialFormValues(){let n=this.getQueryParameters();this.form.patchValue(n),this.filter.emit(n),this.cd.markForCheck()}trackFormValueChanges(){this.form.valueChanges.pipe(S(800),I(),T(this.destroy$)).subscribe(n=>{if(!n.view){this.toastService.error("Missing form values");return}let i={view:n.view};this.saveQueryParameters(i),this.filter.emit(i)})}saveQueryParameters(n){this.router.navigate([],{queryParams:n,queryParamsHandling:"merge"})}getQueryParameters(){let n={view:f.Week},i=this.route.snapshot.queryParams;return z(i,n)}};e.\u0275fac=function(i){return new(i||e)(p(R),p(U),p(H),p(A))},e.\u0275cmp=m({type:e,selectors:[["app-events-toolbar"]],outputs:{filter:"filter"},decls:10,vars:1,consts:[[1,"events__toolbar"],[1,"events__toolbar-left"],[1,"events__toolbar-right"],[3,"formGroup"],["type","text"],["matInput","","formControlName","view",1,"events__toolbar-selector"],[3,"value"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),P(3,"Upcoming Events"),a()(),r(4,"div",2)(5,"form",3),u(6,"input",4),r(7,"select",5),W(8,De,2,2,"option",6,N),a()()()()),i&2&&(s(5),l("formGroup",o.form),s(3),B(o.views))},dependencies:[Z,ie,oe,ne,K,J,ee,te],styles:["h1[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.events__toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;justify-content:space-between;overflow-x:auto;overflow-y:hidden}.events__toolbar-selector[_ngcontent-%COMP%]{padding:8px 32px 8px 12px;border:1px solid #ccc;border-radius:8px;background:#fff;-webkit-appearance:none;appearance:none;background-image:url(/assets/images/icons/arrow-down.svg);background-size:24px;background-repeat:no-repeat;background-position:calc(100% - 6px) center}.events__toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}@media (max-width: 40em){.events__toolbar-left[_ngcontent-%COMP%]{display:none}}.events__toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}"],changeDetection:0});let t=e;return t})();var y=(()=>{let e=class e{set events(n){this.displayEvents=n.map(i=>V(F({},i),{start:new Date(i.start),end:new Date(i.end)}))}constructor(n){this.dialog=n,this.displayEvents=[],this.viewDate=new Date,this.refresh=new M}onSelectEvent(n){console.log(n)}};e.\u0275fac=function(i){return new(i||e)(p(re))},e.\u0275cmp=m({type:e,selectors:[["app-events-base-view"]],inputs:{events:"events"},decls:0,vars:0,template:function(i,o){},encapsulation:2,changeDetection:0});let t=e;return t})();var Ce=(()=>{let e=class e extends y{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=g(e)))(o||e)}})(),e.\u0275cmp=m({type:e,selectors:[["app-events-day-view"]],features:[C],decls:2,vars:3,consts:[[1,"events__calendar"],[3,"eventClicked","viewDate","events","refresh"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"mwl-calendar-day-view",1),v("eventClicked",function(h){return o.onSelectEvent(h.event)}),a()()),i&2&&(s(),l("viewDate",o.viewDate)("events",o.displayEvents)("refresh",o.refresh))},dependencies:[fe],styles:["[_nghost-%COMP%]     .cal-week-view{width:100%;font-family:Poppins,sans-serif}[_nghost-%COMP%]     .cal-week-view .cal-time-events .cal-event{border-radius:6px}[_nghost-%COMP%]     .cal-week-view .cal-event{background:#d1ffd391;border-color:#18d648;color:#0a5e1c;font-weight:500}[_nghost-%COMP%]     .cal-week-view .cal-time{font-weight:400;padding:20px 0;color:#646464}[_nghost-%COMP%]     .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment, [_nghost-%COMP%]     .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment{border-bottom:unset}[_nghost-%COMP%]     .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment:hover, [_nghost-%COMP%]     .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment:hover{background:transparent}.events__calendar[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden}"],changeDetection:0});let t=e;return t})();var ye=(()=>{let e=class e extends y{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=g(e)))(o||e)}})(),e.\u0275cmp=m({type:e,selectors:[["app-events-month-view"]],features:[C],decls:2,vars:3,consts:[[1,"events__calendar"],[3,"eventClicked","viewDate","events","refresh"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"mwl-calendar-month-view",1),v("eventClicked",function(h){return o.onSelectEvent(h.event)}),a()()),i&2&&(s(),l("viewDate",o.viewDate)("events",o.displayEvents)("refresh",o.refresh))},dependencies:[de],styles:["[_nghost-%COMP%]     .cal-month-view .cal-header .cal-cell{padding:16px;border:.1px solid #dfdede;border-bottom:unset}[_nghost-%COMP%]     .cal-month-view .cal-header .cal-cell:nth-child(2n){border-left:unset;border-right:unset}[_nghost-%COMP%]     .cal-month-view .cal-header{font-weight:500}[_nghost-%COMP%]     .cal-month-view .cal-day-badge{background-color:#068e44}[_nghost-%COMP%]     .cal-month-view .cal-event{background-color:#068e44}[_nghost-%COMP%]     .cal-month-view{width:100%;min-width:800px;font-family:Poppins,sans-serif}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today{background:#d1ffd3}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today .cal-day-number{color:#242424;opacity:1}.events__calendar[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden}"],changeDetection:0});let t=e;return t})();var _e=(()=>{let e=class e extends y{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=g(e)))(o||e)}})(),e.\u0275cmp=m({type:e,selectors:[["app-events-week-view"]],features:[C],decls:2,vars:3,consts:[[1,"events__calendar"],[3,"eventClicked","viewDate","events","refresh"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"mwl-calendar-week-view",1),v("eventClicked",function(h){return o.onSelectEvent(h.event)}),a()()),i&2&&(s(),l("viewDate",o.viewDate)("events",o.displayEvents)("refresh",o.refresh))},dependencies:[ve],styles:["[_nghost-%COMP%]     .cal-week-view{width:100%;min-width:800px;font-family:Poppins,sans-serif}[_nghost-%COMP%]     .cal-week-view .cal-time-events .cal-event{border-radius:6px}[_nghost-%COMP%]     .cal-week-view .cal-event{background:#d1ffd391;border-color:#18d648;color:#0a5e1c;font-weight:500}[_nghost-%COMP%]     .cal-week-view .cal-day-headers .cal-header{padding:10px}[_nghost-%COMP%]     .cal-week-view .cal-day-headers .cal-header b{font-weight:500}[_nghost-%COMP%]     .cal-week-view .cal-day-headers .cal-header span{font-size:12px}[_nghost-%COMP%]     .cal-week-view .cal-time{font-weight:400;padding:20px 0;color:#646464}[_nghost-%COMP%]     .cal-week-view .cal-hour:not(:last-child) .cal-hour-segment, [_nghost-%COMP%]     .cal-week-view .cal-hour:last-child :not(:last-child) .cal-hour-segment{border-bottom:unset}[_nghost-%COMP%]     .cal-week-view .cal-header.cal-today{background:#068e44;color:#f4f5f5}[_nghost-%COMP%]     .cal-week-view .cal-header.cal-weekend span{color:#021601}.events__calendar[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden}"],changeDetection:0});let t=e;return t})();function Oe(t,e){if(t&1&&u(0,"app-events-day-view",4),t&2){let c=_();l("events",c)}}function Fe(t,e){if(t&1&&u(0,"app-events-week-view",4),t&2){let c=_();l("events",c)}}function Ve(t,e){if(t&1&&u(0,"app-events-month-view",4),t&2){let c=_();l("events",c)}}function Se(t,e){if(t&1&&(r(0,"div",3),b(1,Oe,1,1)(2,Fe,1,1)(3,Ve,1,1),a()),t&2){let c,n=_();s(),x(1,(c=n.filter.view)===n.calendarViews.Day?1:c===n.calendarViews.Week?2:c===n.calendarViews.Month?3:-1)}}var Me=(()=>{let e=class e{constructor(n){this.eventsService=n,this.events$=this.eventsService.getEvents(),this.filter={},this.calendarViews=f}onFilter(n){this.filter=n}};e.\u0275fac=function(i){return new(i||e)(p(le))},e.\u0275cmp=m({type:e,selectors:[["app-events-list"]],decls:5,vars:3,consts:[["value","Events"],[1,"page"],[3,"filter"],[1,"events__content"],[3,"events"]],template:function(i,o){if(i&1&&(u(0,"app-page-header",0),r(1,"section",1)(2,"app-events-toolbar",2),v("filter",function(h){return o.onFilter(h)}),a(),b(3,Se,4,1,"div",3),L(4,"async"),a()),i&2){let d;s(3),x(3,(d=G(4,1,o.events$))?3:-1,d)}},dependencies:[ae,we,ye,_e,Ce,Q],styles:[".events__content[_ngcontent-%COMP%]{margin-top:22px}"],changeDetection:0});let t=e;return t})();var Ie=[{path:"",component:Me,title:"Events | Kaiteki"}],ke=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=D({type:e}),e.\u0275inj=k({imports:[E.forChild(Ie),E]});let t=e;return t})();var O=class extends pe{weekViewHour({date:e}){return new Intl.DateTimeFormat("pt-BR",{hour:"numeric",hour12:!1,minute:"numeric",hourCycle:"h23"}).format(e)}dayViewHour({date:e}){return new Intl.DateTimeFormat("pt-BR",{hour:"numeric",hour12:!1,minute:"numeric",hourCycle:"h23"}).format(e)}},Ot=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=D({type:e}),e.\u0275inj=k({providers:[{provide:me,useClass:O}],imports:[q,se,ke,he.forRoot({provide:ce,useFactory:ue})]});let t=e;return t})();export{Ot as EventsModule};
