import './polyfills.server.mjs';
import{a as Mt}from"./chunk-CKIO23JR.mjs";import{a as Wt}from"./chunk-FE426TB2.mjs";import{a as vt}from"./chunk-OXSDZOOI.mjs";import{a as xe}from"./chunk-NH6I23EI.mjs";import"./chunk-7XOCG3NU.mjs";import{a as xt}from"./chunk-2YUA2CAX.mjs";import{b as G}from"./chunk-AM4SDK4B.mjs";import{a as _e}from"./chunk-HOL4TTOB.mjs";import{Aa as it,Ba as nt,E as Q,F as Ae,G as Ne,I as Re,L as ze,La as rt,M as He,Ma as ot,N as Ue,Na as at,O as ye,Oa as mt,Q as We,Qa as st,Ra as lt,Sa as pt,T as Qe,Ta as ct,U as Ge,Ua as dt,Va as _t,Wa as ft,Xa as bt,Ya as ut,Za as gt,_a as ht,a as je,ca as qe,cb as E,db as Ce,eb as Ct,f as fe,h as Le,ha as Ke,i as be,ia as Je,ka as Xe,la as Ye,n as Me,na as Ze,s as U,t as D,u as ue,v as ge,w as he,wa as q,x as W,ya as et,za as tt}from"./chunk-YAF7A7YL.mjs";import{b as de}from"./chunk-IWV7G257.mjs";import{Aa as P,Bb as p,F as K,Hb as d,I as ke,Jb as Fe,K as J,Ka as R,Kb as me,Lb as se,Mb as o,N as Ie,Nb as a,Ob as f,Pb as B,Qb as j,Sb as I,Vb as M,X as Oe,Xb as _,Y as ne,_ as De,_b as z,aa as Ee,dc as le,ea as re,ec as s,f as ie,fa as oe,fc as Y,gc as x,hb as m,hc as H,ib as g,ja as X,jd as $e,n as S,o as $,oc as O,pa as C,pc as L,pd as pe,qa as ae,qc as Ve,rd as T,s as k,sd as ce,wd as Be,xc as b,yc as h,za as y,zb as c,zc as Z}from"./chunk-JAB3SG4D.mjs";import"./chunk-6VT7JIM2.mjs";import{a as ee,b as te,g as Ut}from"./chunk-FME56UVT.mjs";var wt=Ut(Wt());var yt=(()=>{let t=class t{constructor(i){this.httpClient=i,this.baseUrl="/api/v1/members"}getTeamMemberById(i){return this.httpClient.get(`${this.baseUrl}/${i}`)}};t.\u0275fac=function(n){return new(n||t)(X(de))},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function qt(e,t){if(e&1&&(o(0,"div",1)(1,"div",2),f(2,"ngx-avatars",3),o(3,"div")(4,"p",4),s(5),a(),o(6,"p",5),s(7),b(8,"date"),a()()(),o(9,"div",6)(10,"div",7)(11,"p",8),s(12,"Email"),a(),o(13,"p",9),s(14),a()(),o(15,"div",7)(16,"p",8),s(17,"Birth date"),a(),o(18,"p",9),s(19),b(20,"date"),a()(),o(21,"div",7)(22,"p",8),s(23,"Worked for"),a(),o(24,"p",9),s(25),a()()()()),e&2){let r=t,i=_(2);m(2),z("src","api/v1/files/",r.avatarId,""),p("name",r.fullName),m(3),Y(r.fullName),m(2),H(" ",r.position,", since ",Z(8,9,r.joinedDate,"longDate")," "),m(7),Y(r.email),m(5),Y(Z(20,12,r.birthDate,"longDate")),m(6),Y(i.getWorkPeriodString(r.joinedDate))}}function Kt(e,t){if(e&1&&c(0,qt,26,15,"div",1),e&2){let r;d(0,(r=t.data)?0:-1,r)}}var St=(()=>{let t=class t{constructor(i){this.teamMembersService=i,this.member$=S(null)}ngOnInit(){this.member$=this.teamMembersService.getTeamMemberById(this.memberId)}getWorkPeriodString(i){let n=(0,wt.default)().diff(i,"hours",!0),l=Math.floor(n/(365*24)),u=Math.floor(n%(365*24)/(30*24)),v=Math.floor(n%(30*24)/24),A=Math.floor(n%24),N=[];return l>0&&N.push(`${l} year${l>1?"s":""}`),u>0&&N.push(`${u} month${u>1?"s":""}`),v>0&&N.push(`${v} day${v>1?"s":""}`),A>0&&N.length===0&&N.push(`${A} hour${A>1?"s":""}`),N.join(", ")}};t.\u0275fac=function(n){return new(n||t)(g(yt))},t.\u0275cmp=C({type:t,selectors:[["app-member-details-info"]],inputs:{memberId:"memberId"},decls:4,vars:5,consts:[[1,"member__info-wrapper"],[1,"member__info-card"],[1,"member__info-card-details"],["size","80","bgColor","#64748B",3,"src","name"],[1,"member__info-card-details-name"],[1,"member__info-card-details-position"],[1,"member__info-card-info"],[1,"member__info-card-info-section"],[1,"member__info-card-info-label"],[1,"member__info-card-info-value"]],template:function(n,l){if(n&1&&(o(0,"section",0),c(1,Kt,1,1),b(2,"withLoading"),b(3,"async"),a()),n&2){let u;m(),d(1,(u=h(3,3,h(2,1,l.member$)))?1:-1,u)}},dependencies:[W,T,ce,E],styles:[".member__info-card[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;gap:30px;flex-wrap:wrap;background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:24px;margin-bottom:20px}.member__info-card-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.member__info-card-details-name[_ngcontent-%COMP%]{font-weight:600;font-size:24px;margin-bottom:4px!important}.member__info-card-details-position[_ngcontent-%COMP%]{color:#535353}.member__info-card-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;column-gap:60px;row-gap:14px}.member__info-card-info-section[_ngcontent-%COMP%]{grid-column:span 1/span 1}.member__info-card-info-label[_ngcontent-%COMP%]{color:#6b6b6b;text-align:center}.member__info-card-info-value[_ngcontent-%COMP%]{text-align:center;font-weight:500}"],changeDetection:0});let e=t;return e})();var V=(()=>{let t=class t{constructor(i,n){this.httpClient=i,this.teamsService=n,this.baseUrl="/api/v1/members/analytics"}getStatistics(i){return this.httpClient.get(`${this.baseUrl}/statistics`,{params:Q({teamMemberId:i})})}getPerformanceByPeriod(i){return this.httpClient.get(`${this.baseUrl}/performance-by-period`,{params:Q({teamMemberId:i})})}getTasksCountByPriority(i){return this.httpClient.get(`${this.baseUrl}/tasks-by-status`,{params:Q({teamMemberId:i})})}getTaskPrioritiesCountsByPeriods(i,n){return this.httpClient.get(`${this.baseUrl}/tasks-priorities-by-periods`,{params:Q({teamMemberId:i,taskPriority:n})})}exportMembers(i,n){let l=te(ee({},n),{teamId:i});return this.httpClient.get(`${this.baseUrl}/export`,{params:Q(l),responseType:"blob"})}exportCurrentTeamMembers(i){return this.teamsService.currentTeam$.pipe(ne(n=>n?this.exportMembers(n.id,i):$(()=>Error("No current team"))))}};t.\u0275fac=function(n){return new(n||t)(X(de),X(G))},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Xt=["memberId",""],Ot=()=>({height:"100%","min-height":"270px","border-radius":"8px"});function Yt(e,t){if(e&1&&(o(0,"div",1)(1,"div",3),f(2,"mat-progress-spinner",4),o(3,"p",5),s(4),a()(),o(5,"p",6),s(6,"Overall Performance"),a()()),e&2){let r=_();m(2),p("value",r.data.performance),m(2),x("",r.data.performance,"%")}}function Zt(e,t){e&1&&f(0,"ngx-skeleton-loader",2),e&2&&p("theme",O(1,Ot))}function ei(e,t){if(e&1&&c(0,Yt,7,2,"div",1)(1,Zt,1,2,"ngx-skeleton-loader",2),e&2){let r=t;d(0,r.data?0:-1),m(),d(1,r.loading?1:-1)}}function ti(e,t){if(e&1&&(o(0,"div",7)(1,"div",9)(2,"p",10),s(3,"Performance(%) by period"),a()(),o(4,"div"),f(5,"canvas",11),a()()),e&2){let r=_(),i=_();m(5),p("data",r.data)("options",i.performanceChartOptions)}}function ii(e,t){e&1&&f(0,"ngx-skeleton-loader",8),e&2&&p("theme",O(1,Ot))}function ni(e,t){if(e&1&&c(0,ti,6,2,"div",7)(1,ii,1,2,"ngx-skeleton-loader",8),e&2){let r=t;d(0,r.data?0:-1),m(),d(1,r.loading||r.error?1:-1)}}var Dt=(()=>{let t=class t{constructor(i,n){this.performanceService=i,this.membersAnalyticsService=n,this.memberPerformance$=S(null),this.performanceChartData$=S(null),this.performanceChartOptions={responsive:!0,maintainAspectRatio:!1,font:{family:"Poppins, sans-serif",size:14}}}ngOnInit(){this.memberPerformance$=this.performanceService.getTeamMemberPerformance(this.memberId).pipe(k(i=>te(ee({},i),{performance:i.performance*100}))),this.performanceChartData$=this.membersAnalyticsService.getPerformanceByPeriod(this.memberId).pipe(k(i=>({labels:i.labels,datasets:[{data:i.data,label:"Performance by period",borderColor:"rgba(6, 142, 68, 0.8)",backgroundColor:"rgba(6, 142, 68, 0.4)",fill:!0,tension:.5}]})))}};t.\u0275fac=function(n){return new(n||t)(g(xt),g(V))},t.\u0275cmp=C({type:t,selectors:[["app-member-performance-section","memberId",""]],inputs:{memberId:"memberId"},attrs:Xt,decls:7,vars:10,consts:[[1,"member__details-section"],[1,"member__details-section-statistics","performance"],["count","1","appearance","line",1,"member__details-performance-stats-loading",3,"theme"],[1,"member__details-performance-wrapper"],["diameter","150",3,"value"],[1,"member__details-performance-value"],[1,"member__details-performance-label"],[1,"member__details-section-graph"],["count","1","appearance","line",1,"member__details-performance-graph-loading",3,"theme"],[1,"member__details-section-graph-toolbar"],[1,"member__details-section-graph-title"],["baseChart","","height","250","type","line",3,"data","options"]],template:function(n,l){if(n&1&&(o(0,"div",0),c(1,ei,2,2),b(2,"withLoading"),b(3,"async"),c(4,ni,2,2),b(5,"withLoading"),b(6,"async"),a()),n&2){let u,v;m(),d(1,(u=h(3,4,h(2,2,l.memberPerformance$)))?1:-1,u),m(3),d(4,(v=h(6,8,h(5,6,l.performanceChartData$)))?4:-1,v)}},dependencies:[st,q,U,T,E],styles:["[_nghost-%COMP%]     mat-progress-spinner{box-shadow:0 0 0 15px #e9e9e9 inset;border-radius:50%}.member__details-performance-stats-loading[_ngcontent-%COMP%]{grid-column:span 2/span 2}@media screen and (max-width: 48em){.member__details-performance-stats-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.member__details-performance-graph-loading[_ngcontent-%COMP%]{grid-column:span 3/span 3}@media screen and (max-width: 48em){.member__details-performance-graph-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}"],changeDetection:0});let e=t;return e})();var Et=()=>({height:"100%","min-height":"270px","border-radius":"8px"});function oi(e,t){if(e&1&&(o(0,"div",1)(1,"div",3)(2,"div",4)(3,"mat-icon"),s(4,"apps"),a()(),o(5,"div",5)(6,"p",6),s(7,"Total"),a(),o(8,"p",7),s(9),a()()(),o(10,"div",3)(11,"div",4)(12,"mat-icon"),s(13,"task_alt"),a()(),o(14,"div",5)(15,"p",6),s(16,"Completed"),a(),o(17,"p",7),s(18),a()()(),o(19,"div",3)(20,"div",4)(21,"mat-icon"),s(22,"downloading"),a()(),o(23,"div",5)(24,"p",6),s(25,"In progress"),a(),o(26,"p",7),s(27),a()()(),o(28,"div",3)(29,"div",4)(30,"mat-icon"),s(31,"apps"),a()(),o(32,"div",5)(33,"p",6),s(34,"Open"),a(),o(35,"p",7),s(36),a()()()()),e&2){let r=t;m(9),x("",r.totalTasksCount," Tasks"),m(9),x("",r.completedTasksCount," Tasks"),m(9),x("",r.inProgressTasksCount," Tasks"),m(9),x("",r.openTasksCount," Tasks")}}function ai(e,t){e&1&&f(0,"ngx-skeleton-loader",2),e&2&&p("theme",O(1,Et))}function mi(e,t){if(e&1&&c(0,oi,37,4,"div",1)(1,ai,1,2,"ngx-skeleton-loader",2),e&2){let r,i=t;d(0,(r=i.data)?0:-1,r),m(),d(1,i.loading||i.error?1:-1)}}function si(e,t){if(e&1&&(o(0,"div",8)(1,"div",10)(2,"p",11),s(3,"Tasks count by statuses"),a()(),o(4,"div"),f(5,"canvas",12),a()()),e&2){let r=_(),i=_();m(5),p("data",r.data)("options",i.barChartOptions)}}function li(e,t){e&1&&f(0,"ngx-skeleton-loader",9),e&2&&p("theme",O(1,Et))}function pi(e,t){if(e&1&&c(0,si,6,2,"div",8)(1,li,1,2,"ngx-skeleton-loader",9),e&2){let r=t;d(0,r.data?0:-1),m(),d(1,r.loading||r.error?1:-1)}}var Ft=(()=>{let t=class t{constructor(i){this.membersAnalyticsService=i,this.tasksAnalytics$=S(null),this.tasksCountByPriority$=S(null),this.barChartOptions={responsive:!0,maintainAspectRatio:!1,font:{family:"Poppins, sans-serif",size:14}}}ngOnInit(){this.tasksAnalytics$=this.membersAnalyticsService.getStatistics(this.memberId),this.tasksCountByPriority$=this.membersAnalyticsService.getTasksCountByPriority(this.memberId).pipe(k(i=>({labels:i.labels,datasets:[{data:i.data,label:"Tasks count by status",borderRadius:8,backgroundColor:"rgba(6, 142, 68, 0.8)"}]})))}};t.\u0275fac=function(n){return new(n||t)(g(V))},t.\u0275cmp=C({type:t,selectors:[["app-member-tasks-section"]],inputs:{memberId:"memberId"},decls:7,vars:10,consts:[[1,"member__details-section"],[1,"member__details__tasks"],["count","1","appearance","line",1,"member__details-section__task-analytics-loading",3,"theme"],[1,"member__details__tasks-item"],[1,"member__details__tasks-item-icon"],[1,"member__details__tasks-item-body"],[1,"member__details__tasks-item-title"],[1,"member__details__tasks-item-number"],[1,"member__details-section-graph"],["count","1","appearance","line",1,"member__details-section__tasks-by-teams-loading",3,"theme"],[1,"member__details-section-graph-toolbar"],[1,"member__details-section-graph-title"],["baseChart","","height","250",3,"data","options"]],template:function(n,l){if(n&1&&(o(0,"div",0),c(1,mi,2,2),b(2,"withLoading"),b(3,"async"),c(4,pi,2,2),b(5,"withLoading"),b(6,"async"),a()),n&2){let u,v;m(),d(1,(u=h(3,4,h(2,2,l.tasksAnalytics$)))?1:-1,u),m(3),d(4,(v=h(6,8,h(5,6,l.tasksCountByPriority$)))?4:-1,v)}},dependencies:[D,q,U,T,E],styles:[".member__details__tasks[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);gap:12px;grid-column:span 2/span 2}@media screen and (max-width: 48em){.member__details__tasks[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.member__details__tasks-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;background:#fff;padding:12px;color:#242424;border:1px solid #e2e8f0}.member__details__tasks-item-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.member__details__tasks-item-title[_ngcontent-%COMP%]{font-weight:600}.member__details__tasks-item-body[_ngcontent-%COMP%]{text-align:center;margin-top:12px}.member__details__tasks-item-number[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;color:#707070}.member__details-section__tasks-by-teams-loading[_ngcontent-%COMP%]{grid-column:span 3/span 3}@media screen and (max-width: 48em){.member__details-section__tasks-by-teams-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}.member__details-section__task-analytics-loading[_ngcontent-%COMP%]{grid-column:span 2/span 2}@media screen and (max-width: 48em){.member__details-section__task-analytics-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}"],changeDetection:0});let e=t;return e})();function di(e,t){if(e&1&&(o(0,"mat-option",6),s(1),a()),e&2){let r=t.$implicit;p("matTooltip",r)("value",r),m(),x(" ",r," ")}}var Vt=(()=>{let t=class t{constructor(i,n){this.router=i,this.route=n,this.filter=new R,this.destroy$=new ie,this.views=["Table","Cards"],this.form=new Ue({searchValue:new ye(""),view:new ye})}ngOnInit(){this.patchInitialFormValues(),this.trackFormValueChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}patchInitialFormValues(){let i=this.getQueryParameters();this.form.patchValue(i),this.filter.emit(i)}trackFormValueChanges(){this.form.valueChanges.pipe(ke(800),Ie(),De(this.destroy$)).subscribe(i=>{let n={searchValue:i.searchValue??void 0,view:i.view??void 0};this.saveQueryParameters(n),this.filter.emit(n)})}saveQueryParameters(i){this.router.navigate([],{queryParams:Ae(i),queryParamsHandling:"merge"})}getQueryParameters(){let i={searchValue:"",view:this.views[0]},n=this.route.snapshot.queryParams;return Ne(n,i)}};t.\u0275fac=function(n){return new(n||t)(g(Le),g(fe))},t.\u0275cmp=C({type:t,selectors:[["app-members-filter"]],outputs:{filter:"filter"},decls:19,vars:1,consts:[[1,"filter"],[1,"filter__fields",3,"formGroup"],["appearance","outline"],["matPrefix",""],["matInput","","type","text","formControlName","searchValue"],["formControlName","view"],[3,"matTooltip","value"]],template:function(n,l){n&1&&(o(0,"section",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),s(5,"Filters"),a()(),o(6,"form",1)(7,"mat-form-field",2)(8,"mat-label"),s(9,"Search"),a(),o(10,"mat-icon",3),s(11,"search"),a(),f(12,"input",4),a(),o(13,"mat-form-field",2)(14,"mat-label"),s(15,"View"),a(),o(16,"mat-select",5),me(17,di,2,3,"mat-option",6,Fe),a()()()()()()),n&2&&(m(6),p("formGroup",l.form),m(11),se(l.views))},dependencies:[D,mt,rt,ot,at,Ye,Xe,Ke,Je,tt,je,Ze,We,Re,ze,He,Qe,Ge],styles:["[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter[_ngcontent-%COMP%]{margin-top:22px}.filter__fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem;align-items:start}"],changeDetection:0});let e=t;return e})();function ui(e,t){if(e&1){let r=I();o(0,"div",0)(1,"div",1)(2,"h1",2),s(3),a()(),o(4,"div",3)(5,"app-button",4),M("click",function(n){y(r);let l=_();return P(l.onExportClick(n))}),o(6,"p"),s(7,"Export"),a()(),o(8,"app-button",5),M("click",function(n){y(r);let l=_();return P(l.onAddNewClick(n))}),o(9,"p"),s(10,"Invite"),a()()()()}e&2&&(m(3),x("",t.name," Members"))}var $t=(()=>{let t=class t{constructor(i,n,l,u,v){this.dialog=i,this.teamsService=n,this.teamMembersAnalyticsService=l,this.toastService=u,this.filesService=v,this.currentTeam$=this.teamsService.currentTeam$}onAddNewClick(i){i.preventDefault(),this.dialog.open(vt,{minWidth:"30%"}).afterClosed().pipe(J(1)).subscribe()}onExportClick(i){i.preventDefault(),this.teamMembersAnalyticsService.exportCurrentTeamMembers({}).pipe(K(n=>(this.toastService.error("Failed to export members"),$(()=>n))),J(1)).subscribe(n=>{this.filesService.downloadBlob(n),this.toastService.open("Successfully exported members")})}};t.\u0275fac=function(n){return new(n||t)(g(qe),g(G),g(V),g(_e),g(Mt))},t.\u0275cmp=C({type:t,selectors:[["app-members-toolbar"]],decls:2,vars:3,consts:[[1,"dashboard__toolbar"],[1,"dashboard__toolbar-left"],[1,"dashboard__toolbar-title"],[1,"dashboard__toolbar-right"],["icon","download","variant","light",1,"dashboard__toolbar-item",3,"click"],["icon","add",1,"dashboard__toolbar-item",3,"click"]],template:function(n,l){if(n&1&&(c(0,ui,11,1,"div",0),b(1,"async")),n&2){let u;d(0,(u=h(1,1,l.currentTeam$))?0:-1,u)}},dependencies:[Ce,T],styles:[".dashboard__toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;overflow-x:auto;overflow-y:hidden}.dashboard__toolbar-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.dashboard__toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}@media (max-width: 40em){.dashboard__toolbar-left[_ngcontent-%COMP%]{display:none}}.dashboard__toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.dashboard__toolbar-item[_ngcontent-%COMP%]{text-overflow:ellipsis;text-wrap:nowrap}"],changeDetection:0});let e=t;return e})();var Ci=(e,t)=>t.id,Bt=e=>[e],xi=(e,t)=>({background:e,color:t});function vi(e,t){if(e&1){let r=I();o(0,"div",2),f(1,"ngx-avatars",3),o(2,"h3",4),s(3),a(),o(4,"span",5),s(5),a(),o(6,"div",6),s(7),a(),o(8,"div",7)(9,"app-button",8),M("click",function(n){y(r);let l=_(2);return P(l.onMenuClick(n))}),s(10," More "),a(),o(11,"mat-menu",null,0)(13,"button",9)(14,"mat-icon"),s(15,"person_outline"),a(),o(16,"span"),s(17,"View"),a()(),o(18,"button",10),M("click",function(){y(r);let n=_().$implicit,l=_();return P(l.onDeleteMember(n.id))}),o(19,"mat-icon"),s(20,"delete"),a(),o(21,"span"),s(22,"Remove"),a()()()()()}if(e&2){let r=le(12),i=_().$implicit,n=_();p("routerLink",L(11,Bt,i.id)),m(),z("src","api/v1/files/",i.avatarId,""),p("name",i.fullName),m(2),H("",i.firstname," ",i.lastname,""),m(2),x(" ",i.position," "),m(),p("ngStyle",Ve(13,xi,n.getPerformanceColor(i.performance)[1],n.getPerformanceColor(i.performance)[0])),m(),x(" ",i.performance,"% "),m(2),p("matMenuTriggerFor",r),m(4),p("routerLink",L(16,Bt,i.id))}}function Mi(e,t){if(e&1&&c(0,vi,23,18,"div",2),e&2){let r=t.$implicit;d(0,r?0:-1)}}var jt=(()=>{let t=class t{constructor(){this.delete=new R,this.members=[]}onDeleteMember(i){this.delete.emit(i)}onMenuClick(i){i.stopPropagation()}trackByTeamMembers(i,n){return n.id}getPerformanceColor(i){return i<=100&&i>=70?["#6d9f33","#F0F5EA"]:i<70&&i>=40?["#f4a40f","#FDF5E7"]:["#ef6a6b","#FDF0F0"]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=C({type:t,selectors:[["app-members-cards-view"]],inputs:{members:"members"},outputs:{delete:"delete"},decls:3,vars:0,consts:[["actionMenu","matMenu"],[1,"members__cards"],[1,"members__cards__item",3,"routerLink"],["size","80","bgColor","#64748B",3,"src","name"],[1,"members__cards__item-title"],[1,"members__cards__item-desc"],[1,"members__cards__item-performance",3,"ngStyle"],[1,"members__cards__item-bottom"],["variant","outline",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(n,l){n&1&&(o(0,"div",1),me(1,Mi,1,1,null,null,Ci),a()),n&2&&(m(),se(l.members))},dependencies:[pe,Ce,D,ge,ue,he,be,W],styles:[".members__cards[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;gap:14px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));grid-template-rows:none}.members__cards__item[_ngcontent-%COMP%]{cursor:pointer;position:relative;padding:16px;height:fit-content;border-radius:8px;background:#fff;border:1px solid #e2e8f0;overflow:hidden;word-wrap:break-word;display:flex;flex-direction:column;align-items:center}.members__cards__item-bottom[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:18px}.members__cards__item-title[_ngcontent-%COMP%]{font-weight:500;margin-top:14px}.members__cards__item-performance[_ngcontent-%COMP%]{width:fit-content;padding:2px 8px;position:absolute;right:16px;top:12px;border-radius:4px;font-size:14px;text-align:center}.members__cards__item-desc[_ngcontent-%COMP%]{font-size:12px;color:#575757}"],changeDetection:0});let e=t;return e})();var Pi=e=>({color:e}),Lt=e=>[e];function wi(e,t){e&1&&(o(0,"th",13),s(1," Name "),a())}function Si(e,t){if(e&1&&(o(0,"td",14)(1,"div",15),f(2,"ngx-avatars",16),o(3,"p"),s(4),a()()()),e&2){let r=t.$implicit;m(2),z("src","api/v1/files/",r.avatarId,""),p("name",r.fullName),m(2),H("",r.firstname," ",r.lastname,"")}}function Ti(e,t){e&1&&(o(0,"th",13),s(1," Position "),a())}function ki(e,t){if(e&1&&(o(0,"td",14),s(1),a()),e&2){let r=t.$implicit;m(),x(" ",r.position," ")}}function Ii(e,t){e&1&&(o(0,"th",13),s(1," Email "),a())}function Oi(e,t){if(e&1&&(o(0,"td",14),s(1),a()),e&2){let r=t.$implicit;m(),x(" ",r.email," ")}}function Di(e,t){e&1&&(o(0,"th",13),s(1," Since "),a())}function Ei(e,t){if(e&1&&(o(0,"td",14),s(1),b(2,"date"),a()),e&2){let r=t.$implicit;m(),x(" ",Z(2,1,r.joinedDate,"EEEE, MMMM d")," ")}}function Fi(e,t){e&1&&(o(0,"th",13),s(1," Performance "),a())}function Vi(e,t){if(e&1&&(o(0,"td",14)(1,"p",17),s(2),a()()),e&2){let r=t.$implicit,i=_();m(),p("ngStyle",L(2,Pi,i.getPerformanceColor(r.performance))),m(),x(" ",r.performance,"% ")}}function $i(e,t){e&1&&f(0,"th",13)}function Bi(e,t){if(e&1){let r=I();o(0,"td",14)(1,"button",18),M("click",function(n){y(r);let l=_();return P(l.onMoreClick(n))}),o(2,"mat-icon"),s(3,"more_horizont"),a()(),o(4,"mat-menu",null,0)(6,"button",19)(7,"mat-icon"),s(8,"person_outline"),a(),o(9,"span"),s(10,"View"),a()(),o(11,"button",20),M("click",function(){let n=y(r).$implicit,l=_();return P(l.onDeleteMember(n.id))}),o(12,"mat-icon"),s(13,"delete"),a(),o(14,"span"),s(15,"Remove"),a()()()()}if(e&2){let r=t.$implicit,i=le(5);m(),p("matMenuTriggerFor",i),m(5),p("routerLink",L(2,Lt,r.id))}}function ji(e,t){e&1&&f(0,"tr",21)}function Li(e,t){if(e&1&&f(0,"tr",22),e&2){let r=t.$implicit;p("routerLink",L(1,Lt,r.id))}}var At=(()=>{let t=class t{constructor(){this.delete=new R,this.members=[],this.displayedColumns=["name","position","email","entryDate","performance","actions"]}onDeleteMember(i){this.delete.emit(i)}onMoreClick(i){i.stopPropagation()}getPerformanceColor(i){return i>=70&&i<=100?"#6d9f33":i>=40&&i<70?"#f4a40f":"#ef6a6b"}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=C({type:t,selectors:[["app-members-table-view"]],inputs:{members:"members"},outputs:{delete:"delete"},decls:23,vars:3,consts:[["taskMoreMenu","matMenu"],[1,"members-table__wrapper"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","position"],["matColumnDef","email"],["matColumnDef","entryDate"],["matColumnDef","performance"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"routerLink",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"members-table__name-avatar"],["size","30","bgColor","#64748B",3,"src","name"],[1,"members-table__performance",3,"ngStyle"],[3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",3,"routerLink"]],template:function(n,l){n&1&&(o(0,"div",1)(1,"table",2),f(2,"caption"),B(3,3),c(4,wi,2,0,"th",4)(5,Si,5,5,"td",5),j(),B(6,6),c(7,Ti,2,0,"th",4)(8,ki,2,1,"td",5),j(),B(9,7),c(10,Ii,2,0,"th",4)(11,Oi,2,1,"td",5),j(),B(12,8),c(13,Di,2,0,"th",4)(14,Ei,3,4,"td",5),j(),B(15,9),c(16,Fi,2,0,"th",4)(17,Vi,3,4,"td",5),j(),B(18,10),c(19,$i,1,0,"th",4)(20,Bi,16,4,"td",5),j(),c(21,ji,1,0,"tr",11)(22,Li,1,3,"tr",12),a()()),n&2&&(m(),p("dataSource",l.members),m(20),p("matHeaderRowDef",l.displayedColumns),m(),p("matRowDefColumns",l.displayedColumns))},dependencies:[pe,D,ge,ue,he,lt,ct,bt,dt,pt,ut,_t,ft,gt,ht,be,W,ce],styles:["[_nghost-%COMP%]     .mat-mdc-table{border:1px solid #e2e8f0;background:none}[_nghost-%COMP%]     .mat-mdc-row .mat-mdc-cell{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}[_nghost-%COMP%]     .mat-mdc-header-cell{font-size:12px;text-transform:uppercase;color:#afafaf}[_nghost-%COMP%]     .mdc-data-table__cell, [_nghost-%COMP%]     .mdc-data-table__header-cell{border-bottom:none}[_nghost-%COMP%]     .mat-mdc-row:hover .mat-mdc-cell{background:#e2e8f0}[_nghost-%COMP%]     .mat-mdc-table tbody, [_nghost-%COMP%]     .mat-mdc-table tfoot, [_nghost-%COMP%]     .mat-mdc-table thead, [_nghost-%COMP%]     .mat-mdc-cell, [_nghost-%COMP%]     .mat-mdc-footer-cell, [_nghost-%COMP%]     .mat-mdc-header-row, [_nghost-%COMP%]     .mat-mdc-row, [_nghost-%COMP%]     .mat-mdc-footer-row, [_nghost-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{background:none}.members-table__wrapper[_ngcontent-%COMP%]{display:block;overflow-x:auto}.members-table__name-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.members-table__name-avatar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600}.members-table__performance[_ngcontent-%COMP%]{font-weight:500}table[_ngcontent-%COMP%]{width:100%;border-radius:8px;background:#fff!important;padding:0 12px 12px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8fafc}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:160px;padding:14px}th[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0});let e=t;return e})();var Te=()=>({height:"100%","min-height":"270px","border-radius":"8px"});function Ni(e,t){if(e&1&&(o(0,"div",1)(1,"div",3)(2,"p",4),s(3," Task counts by high priority over periods "),a()(),o(4,"div"),f(5,"canvas",5),a()()),e&2){let r=_(2);m(5),p("data",t)("options",r.chartOptions)}}function Ri(e,t){e&1&&f(0,"ngx-skeleton-loader",2),e&2&&p("theme",O(1,Te))}function zi(e,t){if(e&1&&c(0,Ni,6,2,"div",1)(1,Ri,1,2,"ngx-skeleton-loader",2),e&2){let r,i=t;d(0,(r=i.data)?0:-1,r),m(),d(1,i.loading||i.error?1:-1)}}function Hi(e,t){if(e&1&&(o(0,"div",1)(1,"div",3)(2,"p",4),s(3," Task counts by medium priority over periods "),a()(),o(4,"div"),f(5,"canvas",5),a()()),e&2){let r=_(2);m(5),p("data",t)("options",r.chartOptions)}}function Ui(e,t){e&1&&f(0,"ngx-skeleton-loader",2),e&2&&p("theme",O(1,Te))}function Wi(e,t){if(e&1&&c(0,Hi,6,2,"div",1)(1,Ui,1,2,"ngx-skeleton-loader",2),e&2){let r,i=t;d(0,(r=i.data)?0:-1,r),m(),d(1,i.loading||i.error?1:-1)}}function Qi(e,t){if(e&1&&(o(0,"div",1)(1,"div",3)(2,"p",4),s(3," Task counts by low priority over periods "),a()(),o(4,"div"),f(5,"canvas",5),a()()),e&2){let r=_(2);m(5),p("data",t)("options",r.chartOptions)}}function Gi(e,t){e&1&&f(0,"ngx-skeleton-loader",2),e&2&&p("theme",O(1,Te))}function qi(e,t){if(e&1&&c(0,Qi,6,2,"div",1)(1,Gi,1,2,"ngx-skeleton-loader",2),e&2){let r,i=t;d(0,(r=i.data)?0:-1,r),m(),d(1,i.loading||i.error?1:-1)}}var Nt=(()=>{let t=class t{constructor(i){this.membersAnalyticsService=i,this.highChartData$=S(null),this.midChartData$=S(null),this.lowChartData$=S(null),this.chartOptions={responsive:!0,maintainAspectRatio:!1,font:{family:"Poppins, sans-serif",size:14}}}ngOnInit(){this.highChartData$=this.membersAnalyticsService.getTaskPrioritiesCountsByPeriods(this.memberId,xe.HIGH).pipe(k(i=>({labels:i.labels,datasets:[{data:i.data,label:"Performance by period",borderColor:"rgba(6, 142, 68, 0.8)",backgroundColor:"rgba(6, 142, 68, 0.4)",fill:!0,tension:.5}]}))),this.midChartData$=this.membersAnalyticsService.getTaskPrioritiesCountsByPeriods(this.memberId,xe.MEDIUM).pipe(k(i=>({labels:i.labels,datasets:[{data:i.data,label:"Count over period",borderColor:"rgba(6, 142, 68, 0.8)",backgroundColor:"rgba(6, 142, 68, 0.4)",fill:!0,tension:.5}]}))),this.lowChartData$=this.membersAnalyticsService.getTaskPrioritiesCountsByPeriods(this.memberId,xe.LOW).pipe(k(i=>({labels:i.labels,datasets:[{data:i.data,label:"Performance by period",borderColor:"rgba(6, 142, 68, 0.8)",backgroundColor:"rgba(6, 142, 68, 0.4)",fill:!0,tension:.5}]})))}};t.\u0275fac=function(n){return new(n||t)(g(V))},t.\u0275cmp=C({type:t,selectors:[["app-member-priorities-periods"]],inputs:{memberId:"memberId"},decls:10,vars:15,consts:[[1,"member-priorities__grid"],[1,"member__details-section-graph","member-priorities__grid-graph"],["count","1","appearance","line",1,"member__details-performance-graph-loading",3,"theme"],[1,"member__details-section-graph-toolbar"],[1,"member__details-section-graph-title"],["baseChart","","height","250","type","line",3,"data","options"]],template:function(n,l){if(n&1&&(o(0,"div",0),c(1,zi,2,2),b(2,"withLoading"),b(3,"async"),c(4,Wi,2,2),b(5,"withLoading"),b(6,"async"),c(7,qi,2,2),b(8,"withLoading"),b(9,"async"),a()),n&2){let u,v,A;m(),d(1,(u=h(3,5,h(2,3,l.highChartData$)))?1:-1,u),m(3),d(4,(v=h(6,9,h(5,7,l.midChartData$)))?4:-1,v),m(3),d(7,(A=h(9,13,h(8,11,l.lowChartData$)))?7:-1,A)}},dependencies:[q,U,T,E],styles:[".member-priorities__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,minmax(0,1fr));gap:20px}@media screen and (max-width: 48em){.member-priorities__grid[_ngcontent-%COMP%]{gap:16px}}.member-priorities__grid-graph[_ngcontent-%COMP%]{grid-column:span 2/span 2;padding:24px;border:1px solid #e2e8f0;border-radius:8px;background:#fff}@media screen and (max-width: 48em){.member-priorities__grid-graph[_ngcontent-%COMP%]{grid-column:span 6/span 6}}.member__details-performance-graph-loading[_ngcontent-%COMP%]{grid-column:span 3/span 3}@media screen and (max-width: 48em){.member__details-performance-graph-loading[_ngcontent-%COMP%]{grid-column:span 5/span 5}}"],changeDetection:0});let e=t;return e})();function Ji(e,t){if(e&1&&(o(0,"section",1),f(1,"app-member-details-info",2),o(2,"div",3),f(3,"app-member-priorities-periods",2)(4,"app-member-tasks-section",2)(5,"app-member-performance-section",2),a()()),e&2){let r=_();m(),p("memberId",r.memberId),m(2),p("memberId",r.memberId),m(),p("memberId",r.memberId),m(),p("memberId",r.memberId)}}var Rt=(()=>{let t=class t{constructor(i,n){this.route=i,this.location=n,this.memberId=null}ngOnInit(){this.memberId=this.getIdFromParams()}getIdFromParams(){let i=this.route.snapshot.paramMap.get("id");i||this.location.back();let n=Number(i);return isNaN(n)&&this.location.back(),n}};t.\u0275fac=function(n){return new(n||t)(g(fe),g($e))},t.\u0275cmp=C({type:t,selectors:[["app-member-details"]],decls:2,vars:1,consts:[["value","Member Details"],[1,"page","member__details-wrapper"],[3,"memberId"],[1,"member__details-sections"]],template:function(n,l){n&1&&(f(0,"app-page-header",0),c(1,Ji,6,4,"section",1)),n&2&&(m(),d(1,l.memberId?1:-1))},dependencies:[et,Ft,Dt,St,Nt],styles:["[_nghost-%COMP%]     .member__details-sections{display:flex;flex-direction:column;gap:20px;grid-column:span 3/span 3}@media screen and (max-width: 64em){[_nghost-%COMP%]     .member__details-sections{grid-column:span 4/span 4}}[_nghost-%COMP%]     .member__details-section{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:20px}@media screen and (max-width: 48em){[_nghost-%COMP%]     .member__details-section{gap:16px}}[_nghost-%COMP%]     .member__details-section-graph{grid-column:span 3/span 3;padding:24px;border:1px solid #e2e8f0;border-radius:8px;background:#fff}@media screen and (max-width: 48em){[_nghost-%COMP%]     .member__details-section-graph{grid-column:span 5/span 5}}[_nghost-%COMP%]     .member__details-section-graph-title{font-size:16px;font-weight:500}[_nghost-%COMP%]     .member__details-section-graph-toolbar{display:flex;justify-content:space-between;gap:12px;margin-bottom:24px}[_nghost-%COMP%]     .member__details-section-graph-select{padding:6px;border:1px solid #e2e8f0;border-radius:8px}[_nghost-%COMP%]     .member__details-section-statistics{grid-column:span 2/span 2;padding:20px;border:1px solid #e2e8f0;border-radius:8px;background:#fff}@media screen and (max-width: 48em){[_nghost-%COMP%]     .member__details-section-statistics{grid-column:span 5/span 5}}[_nghost-%COMP%]     .member__details-section-statistics.performance{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:32px}[_nghost-%COMP%]     .member__details-performance-wrapper{position:relative}[_nghost-%COMP%]     .member__details-performance-label{font-size:16px;font-weight:600}[_nghost-%COMP%]     .member__details-performance-value{width:100%;position:absolute;text-align:center;top:42%;font-size:20px;font-weight:600}"],changeDetection:0});let e=t;return e})();function Xi(e,t){if(e&1){let r=I();o(0,"app-members-table-view",4),M("delete",function(n){y(r);let l=_(2);return P(l.onDeleteMember(n))}),a()}if(e&2){let r=_();p("members",r)}}function Yi(e,t){if(e&1){let r=I();o(0,"app-members-cards-view",4),M("delete",function(n){y(r);let l=_(2);return P(l.onDeleteMember(n))}),a()}if(e&2){let r=_();p("members",r)}}function Zi(e,t){if(e&1){let r=I();o(0,"div",2),c(1,Xi,1,1)(2,Yi,1,1),a(),o(3,"app-paginator",3),M("page",function(n){y(r);let l=_();return P(l.onPage(n))}),a()}if(e&2){let r,i=_();m(),d(1,(r=i.filter.view)==="Table"?1:r==="Cards"?2:-1),m(2),p("pagination",i.pagination)}}var zt=(()=>{let t=class t{constructor(i,n){this.teamsService=i,this.toastService=n,this.refetchTeamMembersSubject=new ie,this.refetchTeamMembers$=this.refetchTeamMembersSubject.asObservable(),this.filter={},this.pagination=it,this.teamMembers$=this.refetchTeamMembers$.pipe(Oe([]),ne(()=>this.loadTeamMembers()))}ngOnInit(){this.refetchTeamMembers()}ngOnDestroy(){this.refetchTeamMembersSubject.next(),this.refetchTeamMembersSubject.complete()}refetchTeamMembers(){this.refetchTeamMembersSubject.next()}loadTeamMembers(){let i={size:this.pagination.size,page:this.pagination.page};return this.teamsService.searchTeamMembers(i,this.filter).pipe(Ee(n=>{this.pagination.page=n.number,this.pagination.size=n.size,this.pagination.totalElements=n.totalElements,this.pagination.totalPages=n.totalPages}),k(n=>n.content),K(n=>(this.toastService.open("Failed to get team members"),$(()=>n))))}onFilter(i){this.filter=i,this.refetchTeamMembers()}onPage(i){this.pagination.size=i.size,this.pagination.page=i.page,this.refetchTeamMembers()}onDeleteMember(i){this.teamsService.deleteTeamMember(i).pipe(K(n=>(this.toastService.open("Failed to delete team member"),$(()=>n))),J(1)).subscribe(()=>{this.toastService.open("Successfully removed team member"),this.refetchTeamMembers()})}};t.\u0275fac=function(n){return new(n||t)(g(G),g(_e))},t.\u0275cmp=C({type:t,selectors:[["app-members-list"]],decls:5,vars:3,consts:[[1,"page","members"],[3,"filter"],[1,"members__content"],[3,"page","pagination"],[3,"delete","members"]],template:function(n,l){if(n&1&&(o(0,"section",0),f(1,"app-members-toolbar"),o(2,"app-members-filter",1),M("filter",function(v){return l.onFilter(v)}),a(),c(3,Zi,4,2),b(4,"async"),a()),n&2){let u;m(3),d(3,(u=h(4,1,l.teamMembers$))?3:-1,u)}},dependencies:[nt,$t,Vt,jt,At,T],styles:[".members[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.members__content[_ngcontent-%COMP%]{flex:1;margin-top:22px}"],changeDetection:0});let e=t;return e})();var en=[{path:"",component:zt,title:"Members | Kaiteki"},{path:":id",component:Rt,title:"Member Details | Kaiteki"}],Ht=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ae({type:t}),t.\u0275inj=oe({imports:[Me.forChild(en),Me]});let e=t;return e})();var vr=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ae({type:t}),t.\u0275inj=oe({imports:[Be,Ct,Ht]});let e=t;return e})();export{vr as MembersModule};
